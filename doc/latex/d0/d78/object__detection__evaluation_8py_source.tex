\doxysection{object\+\_\+detection\+\_\+evaluation.\+py}
\hypertarget{object__detection__evaluation_8py_source}{}\label{object__detection__evaluation_8py_source}\index{src/main/resources/processing/video/detections/detection\_utils/utils/object\_detection\_evaluation.py@{src/main/resources/processing/video/detections/detection\_utils/utils/object\_detection\_evaluation.py}}
\mbox{\hyperlink{object__detection__evaluation_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00001}\mbox{\hyperlink{namespacedetection__utils_1_1utils_1_1object__detection__evaluation}{00001}}\ \textcolor{comment}{\#\ Copyright\ 2017\ The\ TensorFlow\ Authors.\ All\ Rights\ Reserved.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00002}00002\ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00003}00003\ \textcolor{comment}{\#\ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00004}00004\ \textcolor{comment}{\#\ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00005}00005\ \textcolor{comment}{\#\ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00006}00006\ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00007}00007\ \textcolor{comment}{\#\ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00008}00008\ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00009}00009\ \textcolor{comment}{\#\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00010}00010\ \textcolor{comment}{\#\ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00011}00011\ \textcolor{comment}{\#\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00012}00012\ \textcolor{comment}{\#\ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00013}00013\ \textcolor{comment}{\#\ limitations\ under\ the\ License.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00014}00014\ \textcolor{comment}{\#\ ==============================================================================}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00015}00015\ \textcolor{stringliteral}{"{}"{}"{}object\_detection\_evaluation\ module.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00016}00016\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00017}00017\ \textcolor{stringliteral}{ObjectDetectionEvaluation\ is\ a\ class\ which\ manages\ ground\ truth\ information\ of\ a}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00018}00018\ \textcolor{stringliteral}{object\ detection\ dataset,\ and\ computes\ frequently\ used\ detection\ metrics\ such\ as}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00019}00019\ \textcolor{stringliteral}{Precision,\ Recall,\ CorLoc\ of\ the\ provided\ detection\ results.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00020}00020\ \textcolor{stringliteral}{It\ supports\ the\ following\ operations:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00021}00021\ \textcolor{stringliteral}{1)\ Add\ ground\ truth\ information\ of\ images\ sequentially.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00022}00022\ \textcolor{stringliteral}{2)\ Add\ detection\ result\ of\ images\ sequentially.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00023}00023\ \textcolor{stringliteral}{3)\ Evaluate\ detection\ metrics\ on\ already\ inserted\ detection\ results.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00024}00024\ \textcolor{stringliteral}{4)\ Write\ evaluation\ result\ into\ a\ pickle\ file\ for\ future\ processing\ or}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00025}00025\ \textcolor{stringliteral}{\ \ \ visualization.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00026}00026\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00027}00027\ \textcolor{stringliteral}{Note:\ This\ module\ operates\ on\ numpy\ boxes\ }\textcolor{keywordflow}{and}\ box\ lists.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00028}00028\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00029}00029\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00030}00030\ \textcolor{stringliteral}{from\ \_\_future\_\_\ import\ absolute\_import}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00031}00031\ \textcolor{stringliteral}{from\ \_\_future\_\_\ import\ division}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00032}00032\ \textcolor{stringliteral}{from\ \_\_future\_\_\ import\ print\_function}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00033}00033\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00034}00034\ \textcolor{stringliteral}{from\ abc\ import\ ABCMeta}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00035}00035\ \textcolor{stringliteral}{from\ abc\ import\ abstractmethod}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00036}00036\ \textcolor{stringliteral}{import\ collections}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00037}00037\ \textcolor{stringliteral}{import\ logging}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00038}00038\ \textcolor{stringliteral}{import\ unicodedata}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00039}00039\ \textcolor{stringliteral}{import\ numpy\ as\ np}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00040}00040\ \textcolor{stringliteral}{import\ six}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00041}00041\ \textcolor{stringliteral}{from\ six.moves\ import\ range}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00042}00042\ \textcolor{stringliteral}{from\ six.moves\ import\ zip}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00043}00043\ \textcolor{stringliteral}{import\ tensorflow\ as\ tf}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00044}00044\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00045}00045\ \textcolor{stringliteral}{from\ object\_detection.core\ import\ standard\_fields}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00046}00046\ \textcolor{stringliteral}{from\ object\_detection.utils\ import\ label\_map\_util}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00047}00047\ \textcolor{stringliteral}{from\ object\_detection.utils\ import\ metrics}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00048}00048\ \textcolor{stringliteral}{from\ object\_detection.utils\ import\ per\_image\_evaluation}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00049}00049\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00050}00050\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00051}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator}{00051}}\ \textcolor{stringliteral}{class\ DetectionEvaluator(six.with\_metaclass(ABCMeta,\ object)):}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00052}00052\ \textcolor{stringliteral}{\ \ "{}"{}"{}Interface\ for\ object\ detection\ evalution\ classes.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00053}00053\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00054}00054\ \textcolor{stringliteral}{\ \ Example\ usage\ of\ the\ Evaluator:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00055}00055\ \textcolor{stringliteral}{\ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00056}00056\ \textcolor{stringliteral}{\ \ evaluator\ =\ \mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator}{DetectionEvaluator}}(categories)}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00057}00057\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00058}00058\ \textcolor{stringliteral}{\ \ }\textcolor{comment}{\#\ Detections\ and\ groundtruth\ for\ image\ 1.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00059}00059\ \ \ evaluator.add\_single\_groundtruth\_image\_info(...)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00060}00060\ \ \ evaluator.add\_single\_detected\_image\_info(...)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00061}00061\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00062}00062\ \ \ \textcolor{comment}{\#\ Detections\ and\ groundtruth\ for\ image\ 2.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00063}00063\ \ \ evaluator.add\_single\_groundtruth\_image\_info(...)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00064}00064\ \ \ evaluator.add\_single\_detected\_image\_info(...)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00065}00065\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00066}00066\ \ \ metrics\_dict\ =\ evaluator.evaluate()}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00067}00067\ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00068}00068\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00069}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a0ee7027b706833c21e6c6826173119f8}{00069}}\ \textcolor{stringliteral}{\ \ }\textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a0ee7027b706833c21e6c6826173119f8}{\_\_init\_\_}}(self,\ categories):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00070}00070\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Constructor.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00071}00071\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00072}00072\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00073}00073\ \textcolor{stringliteral}{\ \ \ \ \ \ categories:\ A\ list\ of\ dicts,\ each\ of\ which\ has\ the\ following\ keys\ -\/}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00074}00074\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ 'id'}:\ (required)\ an\ integer\ id\ uniquely\ identifying\ this\ category.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00075}00075\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'name'}:\ (required)\ string\ representing\ category\ name\ e.g.,\ \textcolor{stringliteral}{'cat'},\ \textcolor{stringliteral}{'dog'}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00076}00076\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00077}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a5d6398d376d23f05ba0d1bbbcec46a6e}{00077}}\ \textcolor{stringliteral}{\ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a5d6398d376d23f05ba0d1bbbcec46a6e}{\_categories}}\ =\ categories}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00078}00078\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00079}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_aa7d589b3b6a873db82fab018c9745899}{00079}}\ \textcolor{stringliteral}{\ \ }\textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_aa7d589b3b6a873db82fab018c9745899}{observe\_result\_dict\_for\_single\_example}}(self,\ eval\_dict):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00080}00080\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Observes\ an\ evaluation\ result\ dict\ for\ a\ single\ example.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00081}00081\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00082}00082\ \textcolor{stringliteral}{\ \ \ \ When\ executing\ eagerly,\ once\ all\ observations\ have\ been\ observed\ by\ this}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00083}00083\ \textcolor{stringliteral}{\ \ \ \ method\ you\ can\ use\ \`{}.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a397409af8c3ae8773fcfd489564a9a25}{evaluate}}()\`{}\ to\ get\ the\ final\ metrics.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00084}00084\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00085}00085\ \textcolor{stringliteral}{\ \ \ \ When\ using\ \`{}tf.estimator.Estimator\`{}\ }\textcolor{keywordflow}{for}\ evaluation\ this\ function\ \textcolor{keywordflow}{is}\ used\ by}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00086}00086\ \ \ \ \ \`{}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_adf40cdb418eaf8a25be78bda885c391c}{get\_estimator\_eval\_metric\_ops}}()\`{}\ to\ construct\ the\ metric\ update\ op.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00088}00088\ \ \ \ \ Args:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00089}00089\ \ \ \ \ \ \ eval\_dict:\ A\ dictionary\ that\ holds\ tensors\ \textcolor{keywordflow}{for}\ evaluating\ an\ object}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00090}00090\ \ \ \ \ \ \ \ \ detection\ model,\ returned\ \textcolor{keyword}{from}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00091}00091\ \ \ \ \ \ \ \ \ eval\_util.result\_dict\_for\_single\_example().}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00093}00093\ \ \ \ \ Returns:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00094}00094\ \ \ \ \ \ \ \textcolor{keywordtype}{None}\ when\ executing\ eagerly,\ \textcolor{keywordflow}{or}\ an\ update\_op\ that\ can\ be\ used\ to\ update}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00095}00095\ \ \ \ \ \ \ the\ eval\ metrics\ \textcolor{keywordflow}{in}\ \`{}tf.estimator.EstimatorSpec\`{}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00096}00096\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00097}00097\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{raise}\ NotImplementedError(\textcolor{stringliteral}{'Not\ implemented\ for\ this\ evaluator!'})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00098}00098\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00099}00099\ \ \ \textcolor{preprocessor}{@abstractmethod}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00100}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a989e90572d5b120dde5247d1655c198a}{00100}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a989e90572d5b120dde5247d1655c198a}{add\_single\_ground\_truth\_image\_info}}(self,\ image\_id,\ groundtruth\_dict):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00101}00101\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Adds\ groundtruth\ for\ a\ single\ image\ to\ be\ used\ for\ evaluation.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00102}00102\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00103}00103\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00104}00104\ \textcolor{stringliteral}{\ \ \ \ \ \ image\_id:\ A\ unique\ string/integer\ identifier\ }\textcolor{keywordflow}{for}\ the\ image.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00105}00105\ \ \ \ \ \ \ groundtruth\_dict:\ A\ dictionary\ of\ groundtruth\ numpy\ arrays\ required\ \textcolor{keywordflow}{for}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00106}00106\ \ \ \ \ \ \ \ \ evaluations.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00107}00107\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00108}00108\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00109}00109\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00110}00110\ \ \ \textcolor{preprocessor}{@abstractmethod}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00111}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_af0db7261aa7c44cdc75c34dbd97db97f}{00111}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_af0db7261aa7c44cdc75c34dbd97db97f}{add\_single\_detected\_image\_info}}(self,\ image\_id,\ detections\_dict):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00112}00112\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Adds\ detections\ for\ a\ single\ image\ to\ be\ used\ for\ evaluation.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00113}00113\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00114}00114\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00115}00115\ \textcolor{stringliteral}{\ \ \ \ \ \ image\_id:\ A\ unique\ string/integer\ identifier\ }\textcolor{keywordflow}{for}\ the\ image.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00116}00116\ \ \ \ \ \ \ detections\_dict:\ A\ dictionary\ of\ detection\ numpy\ arrays\ required\ \textcolor{keywordflow}{for}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00117}00117\ \ \ \ \ \ \ \ \ evaluation.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00118}00118\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00119}00119\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00121}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_adf40cdb418eaf8a25be78bda885c391c}{00121}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_adf40cdb418eaf8a25be78bda885c391c}{get\_estimator\_eval\_metric\_ops}}(self,\ eval\_dict):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00122}00122\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Returns\ dict\ of\ metrics\ to\ use\ with\ \`{}tf.estimator.EstimatorSpec\`{}.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00123}00123\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00124}00124\ \textcolor{stringliteral}{\ \ \ \ Note\ that\ this\ must\ only\ be\ implemented\ }\textcolor{keywordflow}{if}\ performing\ evaluation\ \textcolor{keyword}{with}\ a}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00125}00125\ \ \ \ \ \`{}tf.estimator.Estimator\`{}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00126}00126\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00127}00127\ \ \ \ \ Args:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00128}00128\ \ \ \ \ \ \ eval\_dict:\ A\ dictionary\ that\ holds\ tensors\ \textcolor{keywordflow}{for}\ evaluating\ an\ object}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00129}00129\ \ \ \ \ \ \ \ \ detection\ model,\ returned\ \textcolor{keyword}{from}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00130}00130\ \ \ \ \ \ \ \ \ eval\_util.result\_dict\_for\_single\_example().}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00131}00131\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00132}00132\ \ \ \ \ Returns:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00133}00133\ \ \ \ \ \ \ A\ dictionary\ of\ metric\ names\ to\ tuple\ of\ value\_op\ \textcolor{keywordflow}{and}\ update\_op\ that\ can}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00134}00134\ \ \ \ \ \ \ be\ used\ \textcolor{keyword}{as}\ eval\ metric\ ops\ \textcolor{keywordflow}{in}\ \`{}tf.estimator.EstimatorSpec\`{}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00135}00135\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00136}00136\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00137}00137\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00138}00138\ \ \ \textcolor{preprocessor}{@abstractmethod}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00139}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a397409af8c3ae8773fcfd489564a9a25}{00139}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a397409af8c3ae8773fcfd489564a9a25}{evaluate}}(self):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00140}00140\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Evaluates\ detections\ and\ returns\ a\ dictionary\ of\ metrics."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00141}00141\ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00142}00142\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00143}00143\ \ \ \textcolor{preprocessor}{@abstractmethod}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00144}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a52d729c8179d678a7afa9868df8ddcf6}{00144}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a52d729c8179d678a7afa9868df8ddcf6}{clear}}(self):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00145}00145\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Clears\ the\ state\ to\ prepare\ for\ a\ fresh\ evaluation."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00146}00146\ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00147}00147\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00148}00148\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00149}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator}{00149}}\ \textcolor{keyword}{class\ }ObjectDetectionEvaluator(DetectionEvaluator):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00150}00150\ \ \ \textcolor{stringliteral}{"{}"{}"{}A\ class\ to\ evaluate\ detections."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00151}00151\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00152}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_aed44cfdf4a749af49681d344b6bdb9ac}{00152}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_aed44cfdf4a749af49681d344b6bdb9ac}{\_\_init\_\_}}(self,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ categories,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ matching\_iou\_threshold=0.5,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ recall\_lower\_bound=0.0,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ recall\_upper\_bound=1.0,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ evaluate\_corlocs=False,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ evaluate\_precision\_recall=False,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metric\_prefix=None,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ use\_weighted\_mean\_ap=False,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ evaluate\_masks=False,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00162}00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ group\_of\_weight=0.0):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00163}00163\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Constructor.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00164}00164\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00165}00165\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00166}00166\ \textcolor{stringliteral}{\ \ \ \ \ \ categories:\ A\ list\ of\ dicts,\ each\ of\ which\ has\ the\ following\ keys\ -\/}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00167}00167\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ 'id'}:\ (required)\ an\ integer\ id\ uniquely\ identifying\ this\ category.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00168}00168\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'name'}:\ (required)\ string\ representing\ category\ name\ e.g.,\ \textcolor{stringliteral}{'cat'},\ \textcolor{stringliteral}{'dog'}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00169}00169\ \ \ \ \ \ \ matching\_iou\_threshold:\ IOU\ threshold\ to\ use\ \textcolor{keywordflow}{for}\ matching\ groundtruth}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00170}00170\ \ \ \ \ \ \ \ \ boxes\ to\ detection\ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00171}00171\ \ \ \ \ \ \ recall\_lower\_bound:\ lower\ bound\ of\ recall\ operating\ area.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00172}00172\ \ \ \ \ \ \ recall\_upper\_bound:\ upper\ bound\ of\ recall\ operating\ area.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00173}00173\ \ \ \ \ \ \ evaluate\_corlocs:\ (optional)\ boolean\ which\ determines\ \textcolor{keywordflow}{if}\ corloc\ scores\ are}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00174}00174\ \ \ \ \ \ \ \ \ to\ be\ returned\ \textcolor{keywordflow}{or}\ \textcolor{keywordflow}{not}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00175}00175\ \ \ \ \ \ \ evaluate\_precision\_recall:\ (optional)\ boolean\ which\ determines\ \textcolor{keywordflow}{if}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00176}00176\ \ \ \ \ \ \ \ \ precision\ \textcolor{keywordflow}{and}\ recall\ values\ are\ to\ be\ returned\ \textcolor{keywordflow}{or}\ \textcolor{keywordflow}{not}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00177}00177\ \ \ \ \ \ \ metric\_prefix:\ (optional)\ string\ prefix\ \textcolor{keywordflow}{for}\ metric\ name;\ \textcolor{keywordflow}{if}\ \textcolor{keywordtype}{None},\ no}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00178}00178\ \ \ \ \ \ \ \ \ prefix\ \textcolor{keywordflow}{is}\ used.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00179}00179\ \ \ \ \ \ \ use\_weighted\_mean\_ap:\ (optional)\ boolean\ which\ determines\ \textcolor{keywordflow}{if}\ the\ mean}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00180}00180\ \ \ \ \ \ \ \ \ average\ precision\ \textcolor{keywordflow}{is}\ computed\ directly\ \textcolor{keyword}{from}\ the\ scores\ \textcolor{keywordflow}{and}\ tp\_fp\_labels}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00181}00181\ \ \ \ \ \ \ \ \ of\ all\ classes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00182}00182\ \ \ \ \ \ \ evaluate\_masks:\ If\ \textcolor{keyword}{False},\ evaluation\ will\ be\ performed\ based\ on\ boxes.\ If}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00183}00183\ \ \ \ \ \ \ \ \ \textcolor{keyword}{True},\ mask\ evaluation\ will\ be\ performed\ instead.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00184}00184\ \ \ \ \ \ \ group\_of\_weight:\ Weight\ of\ group-\/of\ boxes.If\ set\ to\ 0,\ detections\ of\ the}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00185}00185\ \ \ \ \ \ \ \ \ correct\ \textcolor{keyword}{class\ }within\ a\ group-\/of\ box\ are\ ignored.\ If\ weight\ \textcolor{keywordflow}{is}\ >\ 0,\ then}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00186}00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ at\ least\ one\ detection\ falls\ within\ a\ group-\/of\ box\ \textcolor{keyword}{with}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00187}00187\ \ \ \ \ \ \ \ \ matching\_iou\_threshold,\ weight\ group\_of\_weight\ \textcolor{keywordflow}{is}\ added\ to\ true}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00188}00188\ \ \ \ \ \ \ \ \ positives.\ Consequently,\ \textcolor{keywordflow}{if}\ no\ detection\ falls\ within\ a\ group-\/of\ box,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00189}00189\ \ \ \ \ \ \ \ \ weight\ group\_of\_weight\ \textcolor{keywordflow}{is}\ added\ to\ false\ negatives.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00190}00190\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00191}00191\ \ \ \ \ Raises:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00192}00192\ \ \ \ \ \ \ ValueError:\ If\ the\ category\ ids\ are\ \textcolor{keywordflow}{not}\ 1-\/indexed.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00193}00193\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00194}00194\ \textcolor{stringliteral}{\ \ \ \ super(ObjectDetectionEvaluator,\ self).\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_aed44cfdf4a749af49681d344b6bdb9ac}{\_\_init\_\_}}(categories)}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00195}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac07e114a5577ee3ce655f63865522f15}{00195}}\ \textcolor{stringliteral}{\ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac07e114a5577ee3ce655f63865522f15}{\_num\_classes}}\ =\ max([cat['id'}]\ \textcolor{keywordflow}{for}\ cat\ \textcolor{keywordflow}{in}\ categories])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00196}00196\ \ \ \ \ \textcolor{keywordflow}{if}\ min(cat[\textcolor{stringliteral}{'id'}]\ \textcolor{keywordflow}{for}\ cat\ \textcolor{keywordflow}{in}\ categories)\ <\ 1:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00197}00197\ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ValueError(\textcolor{stringliteral}{'Classes\ should\ be\ 1-\/indexed.'})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00198}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a49c72af26d514b671648a78581a6ff2e}{00198}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a49c72af26d514b671648a78581a6ff2e}{\_matching\_iou\_threshold}}\ =\ matching\_iou\_threshold}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00199}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab21cedc30d00a7fb2536afd6da4be5c1}{00199}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab21cedc30d00a7fb2536afd6da4be5c1}{\_recall\_lower\_bound}}\ =\ recall\_lower\_bound}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00200}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_aa013faf122ae61660aca70c0eef3581b}{00200}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_aa013faf122ae61660aca70c0eef3581b}{\_recall\_upper\_bound}}\ =\ recall\_upper\_bound}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00201}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a6e235a0679854682fe5445b571b2c1f6}{00201}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a6e235a0679854682fe5445b571b2c1f6}{\_use\_weighted\_mean\_ap}}\ =\ use\_weighted\_mean\_ap}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00202}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{00202}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{\_label\_id\_offset}}\ =\ 1}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00203}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a3cb1d410774a7a965d478299b819a622}{00203}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a3cb1d410774a7a965d478299b819a622}{\_evaluate\_masks}}\ =\ evaluate\_masks}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00204}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a8585a20ca2be4e014760aedb299243c9}{00204}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a8585a20ca2be4e014760aedb299243c9}{\_group\_of\_weight}}\ =\ group\_of\_weight}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00205}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a57c959fcde4deb198b5263d8dfa2bd6b}{00205}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a57c959fcde4deb198b5263d8dfa2bd6b}{\_evaluation}}\ =\ \mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation}{ObjectDetectionEvaluation}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00206}00206\ \ \ \ \ \ \ \ \ num\_groundtruth\_classes=self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac07e114a5577ee3ce655f63865522f15}{\_num\_classes}},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00207}00207\ \ \ \ \ \ \ \ \ matching\_iou\_threshold=self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a49c72af26d514b671648a78581a6ff2e}{\_matching\_iou\_threshold}},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00208}00208\ \ \ \ \ \ \ \ \ recall\_lower\_bound=self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab21cedc30d00a7fb2536afd6da4be5c1}{\_recall\_lower\_bound}},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00209}00209\ \ \ \ \ \ \ \ \ recall\_upper\_bound=self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_aa013faf122ae61660aca70c0eef3581b}{\_recall\_upper\_bound}},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00210}00210\ \ \ \ \ \ \ \ \ use\_weighted\_mean\_ap=self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a6e235a0679854682fe5445b571b2c1f6}{\_use\_weighted\_mean\_ap}},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00211}00211\ \ \ \ \ \ \ \ \ label\_id\_offset=self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{\_label\_id\_offset}},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00212}00212\ \ \ \ \ \ \ \ \ group\_of\_weight=self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a8585a20ca2be4e014760aedb299243c9}{\_group\_of\_weight}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00213}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a46f2487e8fc9241b4159f3307050649f}{00213}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a46f2487e8fc9241b4159f3307050649f}{\_image\_ids}}\ =\ set([])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00214}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_addfb2e413ba073ec450b5f49fb776434}{00214}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_addfb2e413ba073ec450b5f49fb776434}{\_evaluate\_corlocs}}\ =\ evaluate\_corlocs}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00215}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a28bef0fcd0237c8ac6cdefe1569bd3ff}{00215}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a28bef0fcd0237c8ac6cdefe1569bd3ff}{\_evaluate\_precision\_recall}}\ =\ evaluate\_precision\_recall}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00216}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac64375adeb3cf6ab9c8188ae717000aa}{00216}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac64375adeb3cf6ab9c8188ae717000aa}{\_metric\_prefix}}\ =\ (metric\_prefix\ +\ \textcolor{stringliteral}{'\_'})\ \textcolor{keywordflow}{if}\ metric\_prefix\ \textcolor{keywordflow}{else}\ \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00217}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab0f956ef178b4fd9fd7265905cb94d74}{00217}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab0f956ef178b4fd9fd7265905cb94d74}{\_expected\_keys}}\ =\ set([}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00218}00218\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.key,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00219}00219\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_boxes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00220}00220\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_classes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00221}00221\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_difficult,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00222}00222\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_instance\_masks,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00223}00223\ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_boxes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00224}00224\ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_scores,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00225}00225\ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_classes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00226}00226\ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_masks}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00227}00227\ \ \ \ \ ])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00228}00228\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab41d97fe8bd18352726200eecf0bac5f}{\_build\_metric\_names}}()}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00229}00229\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00230}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab41d97fe8bd18352726200eecf0bac5f}{00230}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab41d97fe8bd18352726200eecf0bac5f}{\_build\_metric\_names}}(self):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00231}00231\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Builds\ a\ list\ with\ metric\ names."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00232}00232\ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab21cedc30d00a7fb2536afd6da4be5c1}{\_recall\_lower\_bound}}\ >\ 0.0\ \textcolor{keywordflow}{or}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_aa013faf122ae61660aca70c0eef3581b}{\_recall\_upper\_bound}}\ <\ 1.0:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00233}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a7c4c6f3c0cad1eecc10f5a4938dc7314}{00233}}\ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a7c4c6f3c0cad1eecc10f5a4938dc7314}{\_metric\_names}}\ =\ [}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00234}00234\ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac64375adeb3cf6ab9c8188ae717000aa}{\_metric\_prefix}}\ +}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00235}00235\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'Precision/mAP@\{\}IOU@[\{:.1f\},\{:.1f\}]Recall'}.format(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00236}00236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a49c72af26d514b671648a78581a6ff2e}{\_matching\_iou\_threshold}},\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab21cedc30d00a7fb2536afd6da4be5c1}{\_recall\_lower\_bound}},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00237}00237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_aa013faf122ae61660aca70c0eef3581b}{\_recall\_upper\_bound}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00238}00238\ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00239}00239\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00240}00240\ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a7c4c6f3c0cad1eecc10f5a4938dc7314}{\_metric\_names}}\ =\ [}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00241}00241\ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac64375adeb3cf6ab9c8188ae717000aa}{\_metric\_prefix}}\ +}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00242}00242\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'Precision/mAP@\{\}IOU'}.format(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a49c72af26d514b671648a78581a6ff2e}{\_matching\_iou\_threshold}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00243}00243\ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00244}00244\ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_addfb2e413ba073ec450b5f49fb776434}{\_evaluate\_corlocs}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00245}00245\ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a7c4c6f3c0cad1eecc10f5a4938dc7314}{\_metric\_names}}.append(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00246}00246\ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac64375adeb3cf6ab9c8188ae717000aa}{\_metric\_prefix}}\ +}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00247}00247\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'Precision/meanCorLoc@\{\}IOU'}.format(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a49c72af26d514b671648a78581a6ff2e}{\_matching\_iou\_threshold}}))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00248}00248\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00249}00249\ \ \ \ \ category\_index\ =\ \mbox{\hyperlink{namespacelabel__map__util_aaddc27c3b1afc5a5d48b38a0e58cb3bf}{label\_map\_util.create\_category\_index}}(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a5d6398d376d23f05ba0d1bbbcec46a6e}{\_categories}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00250}00250\ \ \ \ \ \textcolor{keywordflow}{for}\ idx\ \textcolor{keywordflow}{in}\ range(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac07e114a5577ee3ce655f63865522f15}{\_num\_classes}}):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00251}00251\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ idx\ +\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{\_label\_id\_offset}}\ \textcolor{keywordflow}{in}\ category\_index:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00252}00252\ \ \ \ \ \ \ \ \ category\_name\ =\ category\_index[idx\ +\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{\_label\_id\_offset}}][\textcolor{stringliteral}{'name'}]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00253}00253\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00254}00254\ \ \ \ \ \ \ \ \ \ \ category\_name\ =\ six.text\_type(category\_name,\ \textcolor{stringliteral}{'utf-\/8'})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00255}00255\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ TypeError:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00256}00256\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00257}00257\ \ \ \ \ \ \ \ \ category\_name\ =\ unicodedata.normalize(\textcolor{stringliteral}{'NFKD'},\ category\_name)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00258}00258\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ six.PY2:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00259}00259\ \ \ \ \ \ \ \ \ \ \ category\_name\ =\ category\_name.encode(\textcolor{stringliteral}{'ascii'},\ \textcolor{stringliteral}{'ignore'})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00260}00260\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a7c4c6f3c0cad1eecc10f5a4938dc7314}{\_metric\_names}}.append(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00261}00261\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac64375adeb3cf6ab9c8188ae717000aa}{\_metric\_prefix}}\ +\ \textcolor{stringliteral}{'PerformanceByCategory/AP@\{\}IOU/\{\}'}.format(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00262}00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a49c72af26d514b671648a78581a6ff2e}{\_matching\_iou\_threshold}},\ category\_name))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00263}00263\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_addfb2e413ba073ec450b5f49fb776434}{\_evaluate\_corlocs}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00264}00264\ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a7c4c6f3c0cad1eecc10f5a4938dc7314}{\_metric\_names}}.append(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00265}00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac64375adeb3cf6ab9c8188ae717000aa}{\_metric\_prefix}}\ +}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00266}00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'PerformanceByCategory/CorLoc@\{\}IOU/\{\}'}.format(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00267}00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a49c72af26d514b671648a78581a6ff2e}{\_matching\_iou\_threshold}},\ category\_name))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00268}00268\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00269}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a58fa4552263a7d7af84da8611245c526}{00269}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a58fa4552263a7d7af84da8611245c526}{add\_single\_ground\_truth\_image\_info}}(self,\ image\_id,\ groundtruth\_dict):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00270}00270\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Adds\ groundtruth\ for\ a\ single\ image\ to\ be\ used\ for\ evaluation.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00271}00271\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00272}00272\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00273}00273\ \textcolor{stringliteral}{\ \ \ \ \ \ image\_id:\ A\ unique\ string/integer\ identifier\ }\textcolor{keywordflow}{for}\ the\ image.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00274}00274\ \ \ \ \ \ \ groundtruth\_dict:\ A\ dictionary\ containing\ -\/}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00275}00275\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_boxes:\ float32\ numpy\ array}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00276}00276\ \ \ \ \ \ \ \ \ \ \ of\ shape\ [num\_boxes,\ 4]\ containing\ \`{}num\_boxes\`{}\ groundtruth\ boxes\ of}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00277}00277\ \ \ \ \ \ \ \ \ \ \ the\ format\ [ymin,\ xmin,\ ymax,\ xmax]\ \textcolor{keywordflow}{in}\ absolute\ image\ coordinates.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00278}00278\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_classes:\ integer\ numpy\ array}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00279}00279\ \ \ \ \ \ \ \ \ \ \ of\ shape\ [num\_boxes]\ containing\ 1-\/indexed\ groundtruth\ classes\ \textcolor{keywordflow}{for}\ the}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00280}00280\ \ \ \ \ \ \ \ \ \ \ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00281}00281\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_difficult:\ Optional\ length\ M}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00282}00282\ \ \ \ \ \ \ \ \ \ \ numpy\ boolean\ array\ denoting\ whether\ a\ ground\ truth\ box\ \textcolor{keywordflow}{is}\ a\ difficult}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00283}00283\ \ \ \ \ \ \ \ \ \ \ instance\ \textcolor{keywordflow}{or}\ \textcolor{keywordflow}{not}.\ This\ field\ \textcolor{keywordflow}{is}\ optional\ to\ support\ the\ case\ that\ no}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00284}00284\ \ \ \ \ \ \ \ \ \ \ boxes\ are\ difficult.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00285}00285\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_instance\_masks:\ Optional}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00286}00286\ \ \ \ \ \ \ \ \ \ \ numpy\ array\ of\ shape\ [num\_boxes,\ height,\ width]\ \textcolor{keyword}{with}\ values\ \textcolor{keywordflow}{in}\ \{0,\ 1\}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00287}00287\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00288}00288\ \ \ \ \ Raises:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00289}00289\ \ \ \ \ \ \ ValueError:\ On\ adding\ groundtruth\ \textcolor{keywordflow}{for}\ an\ image\ more\ than\ once.\ Will\ also}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00290}00290\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ error\ \textcolor{keywordflow}{if}\ instance\ masks\ are\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ groundtruth\ dictionary.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00291}00291\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00292}00292\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{if}\ image\_id\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a46f2487e8fc9241b4159f3307050649f}{\_image\_ids}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00293}00293\ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ValueError(\textcolor{stringliteral}{'Image\ with\ id\ \{\}\ already\ added.'}.format(image\_id))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00294}00294\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00295}00295\ \ \ \ \ groundtruth\_classes\ =\ (}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00296}00296\ \ \ \ \ \ \ \ \ groundtruth\_dict[standard\_fields.InputDataFields.groundtruth\_classes]\ -\/}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00297}00297\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{\_label\_id\_offset}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00298}00298\ \ \ \ \ \textcolor{comment}{\#\ If\ the\ key\ is\ not\ present\ in\ the\ groundtruth\_dict\ or\ the\ array\ is\ empty}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00299}00299\ \ \ \ \ \textcolor{comment}{\#\ (unless\ there\ are\ no\ annotations\ for\ the\ groundtruth\ on\ this\ image)}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00300}00300\ \ \ \ \ \textcolor{comment}{\#\ use\ values\ from\ the\ dictionary\ or\ insert\ None\ otherwise.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00301}00301\ \ \ \ \ \textcolor{keywordflow}{if}\ (standard\_fields.InputDataFields.groundtruth\_difficult\ \textcolor{keywordflow}{in}\ six.viewkeys(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00302}00302\ \ \ \ \ \ \ \ \ groundtruth\_dict)\ \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00303}00303\ \ \ \ \ \ \ \ \ (groundtruth\_dict[standard\_fields.InputDataFields.groundtruth\_difficult]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00304}00304\ \ \ \ \ \ \ \ \ \ .size\ \textcolor{keywordflow}{or}\ \textcolor{keywordflow}{not}\ groundtruth\_classes.size)):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00305}00305\ \ \ \ \ \ \ groundtruth\_difficult\ =\ groundtruth\_dict[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00306}00306\ \ \ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_difficult]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00307}00307\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00308}00308\ \ \ \ \ \ \ groundtruth\_difficult\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00309}00309\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ len(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a46f2487e8fc9241b4159f3307050649f}{\_image\_ids}})\ \%\ 1000:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00310}00310\ \ \ \ \ \ \ \ \ logging.warning(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00311}00311\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'image\ \%s\ does\ not\ have\ groundtruth\ difficult\ flag\ specified'},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00312}00312\ \ \ \ \ \ \ \ \ \ \ \ \ image\_id)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00313}00313\ \ \ \ \ groundtruth\_masks\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00314}00314\ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a3cb1d410774a7a965d478299b819a622}{\_evaluate\_masks}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00315}00315\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (standard\_fields.InputDataFields.groundtruth\_instance\_masks\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00316}00316\ \ \ \ \ \ \ \ \ \ \ groundtruth\_dict):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00317}00317\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ValueError(\textcolor{stringliteral}{'Instance\ masks\ not\ in\ groundtruth\ dictionary.'})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00318}00318\ \ \ \ \ \ \ groundtruth\_masks\ =\ groundtruth\_dict[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00319}00319\ \ \ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_instance\_masks]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00320}00320\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a57c959fcde4deb198b5263d8dfa2bd6b}{\_evaluation}}.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a58fa4552263a7d7af84da8611245c526}{add\_single\_ground\_truth\_image\_info}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00321}00321\ \ \ \ \ \ \ \ \ image\_key=image\_id,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00322}00322\ \ \ \ \ \ \ \ \ groundtruth\_boxes=groundtruth\_dict[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00323}00323\ \ \ \ \ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_boxes],}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00324}00324\ \ \ \ \ \ \ \ \ groundtruth\_class\_labels=groundtruth\_classes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00325}00325\ \ \ \ \ \ \ \ \ groundtruth\_is\_difficult\_list=groundtruth\_difficult,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00326}00326\ \ \ \ \ \ \ \ \ groundtruth\_masks=groundtruth\_masks)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00327}00327\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a46f2487e8fc9241b4159f3307050649f}{\_image\_ids}}.update([image\_id])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00328}00328\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00329}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a1adbf45798e36dd8fda9322d8ffea47e}{00329}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a1adbf45798e36dd8fda9322d8ffea47e}{add\_single\_detected\_image\_info}}(self,\ image\_id,\ detections\_dict):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00330}00330\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Adds\ detections\ for\ a\ single\ image\ to\ be\ used\ for\ evaluation.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00331}00331\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00332}00332\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00333}00333\ \textcolor{stringliteral}{\ \ \ \ \ \ image\_id:\ A\ unique\ string/integer\ identifier\ }\textcolor{keywordflow}{for}\ the\ image.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00334}00334\ \ \ \ \ \ \ detections\_dict:\ A\ dictionary\ containing\ -\/}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00335}00335\ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_boxes:\ float32\ numpy}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00336}00336\ \ \ \ \ \ \ \ \ \ \ array\ of\ shape\ [num\_boxes,\ 4]\ containing\ \`{}num\_boxes\`{}\ detection\ boxes}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00337}00337\ \ \ \ \ \ \ \ \ \ \ of\ the\ format\ [ymin,\ xmin,\ ymax,\ xmax]\ \textcolor{keywordflow}{in}\ absolute\ image\ coordinates.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00338}00338\ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_scores:\ float32\ numpy}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00339}00339\ \ \ \ \ \ \ \ \ \ \ array\ of\ shape\ [num\_boxes]\ containing\ detection\ scores\ \textcolor{keywordflow}{for}\ the\ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00340}00340\ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_classes:\ integer\ numpy}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00341}00341\ \ \ \ \ \ \ \ \ \ \ array\ of\ shape\ [num\_boxes]\ containing\ 1-\/indexed\ detection\ classes\ \textcolor{keywordflow}{for}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00342}00342\ \ \ \ \ \ \ \ \ \ \ the\ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00343}00343\ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_masks:\ uint8\ numpy\ array}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00344}00344\ \ \ \ \ \ \ \ \ \ \ of\ shape\ [num\_boxes,\ height,\ width]\ containing\ \`{}num\_boxes\`{}\ masks\ of}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00345}00345\ \ \ \ \ \ \ \ \ \ \ values\ ranging\ between\ 0\ \textcolor{keywordflow}{and}\ 1.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00346}00346\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00347}00347\ \ \ \ \ Raises:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00348}00348\ \ \ \ \ \ \ ValueError:\ If\ detection\ masks\ are\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ detections\ dictionary.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00349}00349\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00350}00350\ \textcolor{stringliteral}{\ \ \ \ detection\_classes\ =\ (}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00351}00351\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ detections\_dict[standard\_fields.DetectionResultFields.detection\_classes]}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00352}00352\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{\_label\_id\_offset}})}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00353}00353\ \textcolor{stringliteral}{\ \ \ \ detection\_masks\ =\ }\textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00354}00354\ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a3cb1d410774a7a965d478299b819a622}{\_evaluate\_masks}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00355}00355\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (standard\_fields.DetectionResultFields.detection\_masks\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00356}00356\ \ \ \ \ \ \ \ \ \ \ detections\_dict):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00357}00357\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ValueError(\textcolor{stringliteral}{'Detection\ masks\ not\ in\ detections\ dictionary.'})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00358}00358\ \ \ \ \ \ \ detection\_masks\ =\ detections\_dict[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00359}00359\ \ \ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_masks]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00360}00360\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a57c959fcde4deb198b5263d8dfa2bd6b}{\_evaluation}}.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a1adbf45798e36dd8fda9322d8ffea47e}{add\_single\_detected\_image\_info}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00361}00361\ \ \ \ \ \ \ \ \ image\_key=image\_id,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00362}00362\ \ \ \ \ \ \ \ \ detected\_boxes=detections\_dict[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00363}00363\ \ \ \ \ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_boxes],}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00364}00364\ \ \ \ \ \ \ \ \ detected\_scores=detections\_dict[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00365}00365\ \ \ \ \ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_scores],}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00366}00366\ \ \ \ \ \ \ \ \ detected\_class\_labels=detection\_classes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00367}00367\ \ \ \ \ \ \ \ \ detected\_masks=detection\_masks)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00368}00368\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00369}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_acb7bec77c34786be0eee176d14a2d8b0}{00369}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_acb7bec77c34786be0eee176d14a2d8b0}{evaluate}}(self):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00370}00370\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Compute\ evaluation\ result.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00371}00371\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00372}00372\ \textcolor{stringliteral}{\ \ \ \ Returns:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00373}00373\ \textcolor{stringliteral}{\ \ \ \ \ \ A\ dictionary\ of\ metrics\ }\textcolor{keyword}{with}\ the\ following\ fields\ -\/}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00374}00374\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00375}00375\ \ \ \ \ \ \ 1.\ summary\_metrics:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00376}00376\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'<prefix\ if\ not\ empty>\_Precision/mAP@<matching\_iou\_threshold>IOU'}:\ mean}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00377}00377\ \ \ \ \ \ \ \ \ average\ precision\ at\ the\ specified\ IOU\ threshold.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00378}00378\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00379}00379\ \ \ \ \ \ \ 2.\ per\_category\_ap:\ category\ specific\ results\ \textcolor{keyword}{with}\ keys\ of\ the\ form}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00380}00380\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'<prefix\ if\ not\ empty>\_PerformanceByCategory/}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00381}00381\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ mAP@<matching\_iou\_threshold>IOU/category'.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00382}00382\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00383}00383\ \textcolor{stringliteral}{\ \ \ \ (per\_class\_ap,\ mean\_ap,\ per\_class\_precision,\ per\_class\_recall,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00384}00384\ \textcolor{stringliteral}{\ \ \ \ \ per\_class\_corloc,\ mean\_corloc)\ =\ (}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00385}00385\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a57c959fcde4deb198b5263d8dfa2bd6b}{\_evaluation}}.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_acb7bec77c34786be0eee176d14a2d8b0}{evaluate}}())}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00386}00386\ \textcolor{stringliteral}{\ \ \ \ pascal\_metrics\ =\ \{self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a7c4c6f3c0cad1eecc10f5a4938dc7314}{\_metric\_names}}[0]:\ mean\_ap\}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00387}00387\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_addfb2e413ba073ec450b5f49fb776434}{\_evaluate\_corlocs}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00388}00388\ \ \ \ \ \ \ pascal\_metrics[self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a7c4c6f3c0cad1eecc10f5a4938dc7314}{\_metric\_names}}[1]]\ =\ mean\_corloc}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00389}00389\ \ \ \ \ category\_index\ =\ \mbox{\hyperlink{namespacelabel__map__util_aaddc27c3b1afc5a5d48b38a0e58cb3bf}{label\_map\_util.create\_category\_index}}(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a5d6398d376d23f05ba0d1bbbcec46a6e}{\_categories}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00390}00390\ \ \ \ \ \textcolor{keywordflow}{for}\ idx\ \textcolor{keywordflow}{in}\ range(per\_class\_ap.size):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00391}00391\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ idx\ +\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{\_label\_id\_offset}}\ \textcolor{keywordflow}{in}\ category\_index:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00392}00392\ \ \ \ \ \ \ \ \ category\_name\ =\ category\_index[idx\ +\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{\_label\_id\_offset}}][\textcolor{stringliteral}{'name'}]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00393}00393\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00394}00394\ \ \ \ \ \ \ \ \ \ \ category\_name\ =\ six.text\_type(category\_name,\ \textcolor{stringliteral}{'utf-\/8'})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00395}00395\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ TypeError:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00396}00396\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00397}00397\ \ \ \ \ \ \ \ \ category\_name\ =\ unicodedata.normalize(\textcolor{stringliteral}{'NFKD'},\ category\_name)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00398}00398\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ six.PY2:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00399}00399\ \ \ \ \ \ \ \ \ \ \ category\_name\ =\ category\_name.encode(\textcolor{stringliteral}{'ascii'},\ \textcolor{stringliteral}{'ignore'})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00400}00400\ \ \ \ \ \ \ \ \ display\_name\ =\ (}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00401}00401\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac64375adeb3cf6ab9c8188ae717000aa}{\_metric\_prefix}}\ +\ \textcolor{stringliteral}{'PerformanceByCategory/AP@\{\}IOU/\{\}'}.format(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00402}00402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a49c72af26d514b671648a78581a6ff2e}{\_matching\_iou\_threshold}},\ category\_name))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00403}00403\ \ \ \ \ \ \ \ \ pascal\_metrics[display\_name]\ =\ per\_class\_ap[idx]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00404}00404\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00405}00405\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Optionally\ add\ precision\ and\ recall\ values}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00406}00406\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a28bef0fcd0237c8ac6cdefe1569bd3ff}{\_evaluate\_precision\_recall}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00407}00407\ \ \ \ \ \ \ \ \ \ \ display\_name\ =\ (}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00408}00408\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac64375adeb3cf6ab9c8188ae717000aa}{\_metric\_prefix}}\ +}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00409}00409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'PerformanceByCategory/Precision@\{\}IOU/\{\}'}.format(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00410}00410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a49c72af26d514b671648a78581a6ff2e}{\_matching\_iou\_threshold}},\ category\_name))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00411}00411\ \ \ \ \ \ \ \ \ \ \ pascal\_metrics[display\_name]\ =\ per\_class\_precision[idx]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00412}00412\ \ \ \ \ \ \ \ \ \ \ display\_name\ =\ (}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00413}00413\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac64375adeb3cf6ab9c8188ae717000aa}{\_metric\_prefix}}\ +}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00414}00414\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'PerformanceByCategory/Recall@\{\}IOU/\{\}'}.format(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00415}00415\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a49c72af26d514b671648a78581a6ff2e}{\_matching\_iou\_threshold}},\ category\_name))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00416}00416\ \ \ \ \ \ \ \ \ \ \ pascal\_metrics[display\_name]\ =\ per\_class\_recall[idx]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00417}00417\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00418}00418\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Optionally\ add\ CorLoc\ metrics.classes}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00419}00419\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_addfb2e413ba073ec450b5f49fb776434}{\_evaluate\_corlocs}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00420}00420\ \ \ \ \ \ \ \ \ \ \ display\_name\ =\ (}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00421}00421\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac64375adeb3cf6ab9c8188ae717000aa}{\_metric\_prefix}}\ +}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00422}00422\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'PerformanceByCategory/CorLoc@\{\}IOU/\{\}'}.format(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00423}00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a49c72af26d514b671648a78581a6ff2e}{\_matching\_iou\_threshold}},\ category\_name))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00424}00424\ \ \ \ \ \ \ \ \ \ \ pascal\_metrics[display\_name]\ =\ per\_class\_corloc[idx]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00425}00425\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00426}00426\ \ \ \ \ \textcolor{keywordflow}{return}\ pascal\_metrics}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00427}00427\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00428}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a2e5e1a607bea165b140d173263957a92}{00428}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a2e5e1a607bea165b140d173263957a92}{clear}}(self):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00429}00429\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Clears\ the\ state\ to\ prepare\ for\ a\ fresh\ evaluation."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00430}00430\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a57c959fcde4deb198b5263d8dfa2bd6b}{\_evaluation}}\ =\ \mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation}{ObjectDetectionEvaluation}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00431}00431\ \ \ \ \ \ \ \ \ num\_groundtruth\_classes=self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac07e114a5577ee3ce655f63865522f15}{\_num\_classes}},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00432}00432\ \ \ \ \ \ \ \ \ matching\_iou\_threshold=self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a49c72af26d514b671648a78581a6ff2e}{\_matching\_iou\_threshold}},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00433}00433\ \ \ \ \ \ \ \ \ use\_weighted\_mean\_ap=self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a6e235a0679854682fe5445b571b2c1f6}{\_use\_weighted\_mean\_ap}},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00434}00434\ \ \ \ \ \ \ \ \ label\_id\_offset=self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{\_label\_id\_offset}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00435}00435\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a46f2487e8fc9241b4159f3307050649f}{\_image\_ids}}.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a2e5e1a607bea165b140d173263957a92}{clear}}()}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00436}00436\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00437}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a67a6b24091a76ab0e1d22a8310a4c58e}{00437}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a67a6b24091a76ab0e1d22a8310a4c58e}{get\_estimator\_eval\_metric\_ops}}(self,\ eval\_dict):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00438}00438\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Returns\ dict\ of\ metrics\ to\ use\ with\ \`{}tf.estimator.EstimatorSpec\`{}.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00439}00439\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00440}00440\ \textcolor{stringliteral}{\ \ \ \ Note\ that\ this\ must\ only\ be\ implemented\ }\textcolor{keywordflow}{if}\ performing\ evaluation\ \textcolor{keyword}{with}\ a}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00441}00441\ \ \ \ \ \`{}tf.estimator.Estimator\`{}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00442}00442\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00443}00443\ \ \ \ \ Args:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00444}00444\ \ \ \ \ \ \ eval\_dict:\ A\ dictionary\ that\ holds\ tensors\ \textcolor{keywordflow}{for}\ evaluating\ an\ object}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00445}00445\ \ \ \ \ \ \ \ \ detection\ model,\ returned\ \textcolor{keyword}{from}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00446}00446\ \ \ \ \ \ \ \ \ eval\_util.result\_dict\_for\_single\_example().\ It\ must\ contain}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00447}00447\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.key.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00448}00448\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00449}00449\ \ \ \ \ Returns:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00450}00450\ \ \ \ \ \ \ A\ dictionary\ of\ metric\ names\ to\ tuple\ of\ value\_op\ \textcolor{keywordflow}{and}\ update\_op\ that\ can}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00451}00451\ \ \ \ \ \ \ be\ used\ \textcolor{keyword}{as}\ eval\ metric\ ops\ \textcolor{keywordflow}{in}\ \`{}tf.estimator.EstimatorSpec\`{}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00452}00452\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00453}00453\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{comment}{\#\ remove\ unexpected\ fields}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00454}00454\ \ \ \ \ eval\_dict\_filtered\ =\ dict()}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00455}00455\ \ \ \ \ \textcolor{keywordflow}{for}\ key,\ value\ \textcolor{keywordflow}{in}\ eval\_dict.items():}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00456}00456\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ key\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab0f956ef178b4fd9fd7265905cb94d74}{\_expected\_keys}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00457}00457\ \ \ \ \ \ \ \ \ eval\_dict\_filtered[key]\ =\ value}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00458}00458\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00459}00459\ \ \ \ \ eval\_dict\_keys\ =\ list(eval\_dict\_filtered.keys())}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00460}00460\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00461}00461\ \ \ \ \ \textcolor{keyword}{def\ }update\_op(image\_id,\ *eval\_dict\_batched\_as\_list):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00462}00462\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Update\ operation\ that\ adds\ batch\ of\ images\ to\ ObjectDetectionEvaluator.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00463}00463\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00464}00464\ \textcolor{stringliteral}{\ \ \ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00465}00465\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ image\_id:\ image\ id\ (single\ id\ }\textcolor{keywordflow}{or}\ an\ array)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00466}00466\ \ \ \ \ \ \ \ \ *eval\_dict\_batched\_as\_list:\ the\ values\ of\ the\ dictionary\ of\ tensors.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00467}00467\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00468}00468\ \textcolor{stringliteral}{\ \ \ \ \ \ }\textcolor{keywordflow}{if}\ np.isscalar(image\_id):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00469}00469\ \ \ \ \ \ \ \ \ single\_example\_dict\ =\ dict(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00470}00470\ \ \ \ \ \ \ \ \ \ \ \ \ zip(eval\_dict\_keys,\ eval\_dict\_batched\_as\_list))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00471}00471\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a989e90572d5b120dde5247d1655c198a}{add\_single\_ground\_truth\_image\_info}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a58fa4552263a7d7af84da8611245c526}{add\_single\_ground\_truth\_image\_info}}(image\_id,\ single\_example\_dict)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00472}00472\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_af0db7261aa7c44cdc75c34dbd97db97f}{add\_single\_detected\_image\_info}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a1adbf45798e36dd8fda9322d8ffea47e}{add\_single\_detected\_image\_info}}(image\_id,\ single\_example\_dict)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00473}00473\ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00474}00474\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ unzipped\_tuple\ \textcolor{keywordflow}{in}\ zip(*eval\_dict\_batched\_as\_list):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00475}00475\ \ \ \ \ \ \ \ \ \ \ single\_example\_dict\ =\ dict(zip(eval\_dict\_keys,\ unzipped\_tuple))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00476}00476\ \ \ \ \ \ \ \ \ \ \ image\_id\ =\ single\_example\_dict[standard\_fields.InputDataFields.key]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00477}00477\ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a989e90572d5b120dde5247d1655c198a}{add\_single\_ground\_truth\_image\_info}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a58fa4552263a7d7af84da8611245c526}{add\_single\_ground\_truth\_image\_info}}(image\_id,\ single\_example\_dict)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00478}00478\ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_af0db7261aa7c44cdc75c34dbd97db97f}{add\_single\_detected\_image\_info}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a1adbf45798e36dd8fda9322d8ffea47e}{add\_single\_detected\_image\_info}}(image\_id,\ single\_example\_dict)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00479}00479\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00480}00480\ \ \ \ \ args\ =\ [eval\_dict\_filtered[standard\_fields.InputDataFields.key]]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00481}00481\ \ \ \ \ args.extend(six.itervalues(eval\_dict\_filtered))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00482}00482\ \ \ \ \ update\_op\ =\ tf.py\_func(update\_op,\ args,\ [])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00483}00483\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00484}00484\ \ \ \ \ \textcolor{keyword}{def\ }first\_value\_func():}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00485}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a65bba7d3dd7513be3666e297233812e7}{00485}}\ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a65bba7d3dd7513be3666e297233812e7}{\_metrics}}\ =\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a397409af8c3ae8773fcfd489564a9a25}{evaluate}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_acb7bec77c34786be0eee176d14a2d8b0}{evaluate}}()}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00486}00486\ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_detection_evaluator_a52d729c8179d678a7afa9868df8ddcf6}{clear}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a2e5e1a607bea165b140d173263957a92}{clear}}()}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00487}00487\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.float32(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a65bba7d3dd7513be3666e297233812e7}{\_metrics}}[self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a7c4c6f3c0cad1eecc10f5a4938dc7314}{\_metric\_names}}[0]])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00488}00488\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00489}00489\ \ \ \ \ \textcolor{keyword}{def\ }value\_func\_factory(metric\_name):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00490}00490\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00491}00491\ \ \ \ \ \ \ \textcolor{keyword}{def\ }value\_func():}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00492}00492\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.float32(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a65bba7d3dd7513be3666e297233812e7}{\_metrics}}[metric\_name])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00493}00493\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00494}00494\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ value\_func}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00495}00495\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00496}00496\ \ \ \ \ \textcolor{comment}{\#\ Ensure\ that\ the\ metrics\ are\ only\ evaluated\ once.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00497}00497\ \ \ \ \ first\_value\_op\ =\ tf.py\_func(first\_value\_func,\ [],\ tf.float32)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00498}00498\ \ \ \ \ eval\_metric\_ops\ =\ \{self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a7c4c6f3c0cad1eecc10f5a4938dc7314}{\_metric\_names}}[0]:\ (first\_value\_op,\ update\_op)\}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00499}00499\ \ \ \ \ \textcolor{keyword}{with}\ tf.control\_dependencies([first\_value\_op]):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00500}00500\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ metric\_name\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a7c4c6f3c0cad1eecc10f5a4938dc7314}{\_metric\_names}}[1:]:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00501}00501\ \ \ \ \ \ \ \ \ eval\_metric\_ops[metric\_name]\ =\ (tf.py\_func(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00502}00502\ \ \ \ \ \ \ \ \ \ \ \ \ value\_func\_factory(metric\_name),\ [],\ np.float32),\ update\_op)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00503}00503\ \ \ \ \ \textcolor{keywordflow}{return}\ eval\_metric\_ops}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00504}00504\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00505}00505\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00506}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_pascal_detection_evaluator}{00506}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_pascal_detection_evaluator}{PascalDetectionEvaluator}}(\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator}{ObjectDetectionEvaluator}}):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00507}00507\ \ \ \textcolor{stringliteral}{"{}"{}"{}A\ class\ to\ evaluate\ detections\ using\ PASCAL\ metrics."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00508}00508\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00509}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_pascal_detection_evaluator_a67db37288a070f64e0d7e6eeb81ada2d}{00509}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_pascal_detection_evaluator_a67db37288a070f64e0d7e6eeb81ada2d}{\_\_init\_\_}}(self,\ categories,\ matching\_iou\_threshold=0.5):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00510}00510\ \ \ \ \ super(PascalDetectionEvaluator,\ self).\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_pascal_detection_evaluator_a67db37288a070f64e0d7e6eeb81ada2d}{\_\_init\_\_}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00511}00511\ \ \ \ \ \ \ \ \ categories,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00512}00512\ \ \ \ \ \ \ \ \ matching\_iou\_threshold=matching\_iou\_threshold,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00513}00513\ \ \ \ \ \ \ \ \ evaluate\_corlocs=\textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00514}00514\ \ \ \ \ \ \ \ \ metric\_prefix=\textcolor{stringliteral}{'PascalBoxes'},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00515}00515\ \ \ \ \ \ \ \ \ use\_weighted\_mean\_ap=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00516}00516\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00517}00517\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00518}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_weighted_pascal_detection_evaluator}{00518}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_weighted_pascal_detection_evaluator}{WeightedPascalDetectionEvaluator}}(\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator}{ObjectDetectionEvaluator}}):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00519}00519\ \ \ \textcolor{stringliteral}{"{}"{}"{}A\ class\ to\ evaluate\ detections\ using\ weighted\ PASCAL\ metrics.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00520}00520\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00521}00521\ \textcolor{stringliteral}{\ \ Weighted\ PASCAL\ metrics\ computes\ the\ mean\ average\ precision\ }\textcolor{keyword}{as}\ the\ average}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00522}00522\ \ \ precision\ given\ the\ scores\ \textcolor{keywordflow}{and}\ tp\_fp\_labels\ of\ all\ classes.\ In\ comparison,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00523}00523\ \ \ PASCAL\ metrics\ computes\ the\ mean\ average\ precision\ \textcolor{keyword}{as}\ the\ mean\ of\ the}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00524}00524\ \ \ per-\/\textcolor{keyword}{class\ }average\ precisions.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00525}00525\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00526}00526\ \ \ This\ definition\ \textcolor{keywordflow}{is}\ very\ similar\ to\ the\ mean\ of\ the\ per-\/\textcolor{keyword}{class\ }average}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00527}00527\ \ \ precisions\ weighted\ by\ \textcolor{keyword}{class\ }frequency.\ However,\ they\ are\ typically\ \textcolor{keywordflow}{not}\ the}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00528}00528\ \ \ same\ \textcolor{keyword}{as}\ the\ average\ precision\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ a\ linear\ function\ of\ the\ scores\ \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00529}00529\ \ \ tp\_fp\_labels.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00530}00530\ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00531}00531\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00532}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_weighted_pascal_detection_evaluator_a0c4f3ee906506611b1173468094ce3c5}{00532}}\ \textcolor{stringliteral}{\ \ }\textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_weighted_pascal_detection_evaluator_a0c4f3ee906506611b1173468094ce3c5}{\_\_init\_\_}}(self,\ categories,\ matching\_iou\_threshold=0.5):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00533}00533\ \ \ \ \ super(WeightedPascalDetectionEvaluator,\ self).\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_weighted_pascal_detection_evaluator_a0c4f3ee906506611b1173468094ce3c5}{\_\_init\_\_}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00534}00534\ \ \ \ \ \ \ \ \ categories,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00535}00535\ \ \ \ \ \ \ \ \ matching\_iou\_threshold=matching\_iou\_threshold,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00536}00536\ \ \ \ \ \ \ \ \ evaluate\_corlocs=\textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00537}00537\ \ \ \ \ \ \ \ \ metric\_prefix=\textcolor{stringliteral}{'WeightedPascalBoxes'},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00538}00538\ \ \ \ \ \ \ \ \ use\_weighted\_mean\_ap=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00539}00539\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00540}00540\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00541}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_precision_at_recall_detection_evaluator}{00541}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_precision_at_recall_detection_evaluator}{PrecisionAtRecallDetectionEvaluator}}(\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator}{ObjectDetectionEvaluator}}):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00542}00542\ \ \ \textcolor{stringliteral}{"{}"{}"{}A\ class\ to\ evaluate\ detections\ using\ precision@recall\ metrics."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00543}00543\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00544}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_precision_at_recall_detection_evaluator_a84eff68d1a78314cf22ab613ffa3c11f}{00544}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_precision_at_recall_detection_evaluator_a84eff68d1a78314cf22ab613ffa3c11f}{\_\_init\_\_}}(self,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00545}00545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ categories,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00546}00546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ matching\_iou\_threshold=0.5,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00547}00547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ recall\_lower\_bound=0.0,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00548}00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ recall\_upper\_bound=1.0):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00549}00549\ \ \ \ \ super(PrecisionAtRecallDetectionEvaluator,\ self).\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_precision_at_recall_detection_evaluator_a84eff68d1a78314cf22ab613ffa3c11f}{\_\_init\_\_}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00550}00550\ \ \ \ \ \ \ \ \ categories,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00551}00551\ \ \ \ \ \ \ \ \ matching\_iou\_threshold=matching\_iou\_threshold,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00552}00552\ \ \ \ \ \ \ \ \ recall\_lower\_bound=recall\_lower\_bound,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00553}00553\ \ \ \ \ \ \ \ \ recall\_upper\_bound=recall\_upper\_bound,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00554}00554\ \ \ \ \ \ \ \ \ evaluate\_corlocs=\textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00555}00555\ \ \ \ \ \ \ \ \ metric\_prefix=\textcolor{stringliteral}{'PrecisionAtRecallBoxes'},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00556}00556\ \ \ \ \ \ \ \ \ use\_weighted\_mean\_ap=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00557}00557\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00558}00558\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00559}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_pascal_instance_segmentation_evaluator}{00559}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_pascal_instance_segmentation_evaluator}{PascalInstanceSegmentationEvaluator}}(\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator}{ObjectDetectionEvaluator}}):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00560}00560\ \ \ \textcolor{stringliteral}{"{}"{}"{}A\ class\ to\ evaluate\ instance\ masks\ using\ PASCAL\ metrics."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00561}00561\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00562}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_pascal_instance_segmentation_evaluator_ad5b9a4cf5cbaf049c8152d435ff46082}{00562}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_pascal_instance_segmentation_evaluator_ad5b9a4cf5cbaf049c8152d435ff46082}{\_\_init\_\_}}(self,\ categories,\ matching\_iou\_threshold=0.5):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00563}00563\ \ \ \ \ super(PascalInstanceSegmentationEvaluator,\ self).\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_pascal_instance_segmentation_evaluator_ad5b9a4cf5cbaf049c8152d435ff46082}{\_\_init\_\_}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00564}00564\ \ \ \ \ \ \ \ \ categories,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00565}00565\ \ \ \ \ \ \ \ \ matching\_iou\_threshold=matching\_iou\_threshold,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00566}00566\ \ \ \ \ \ \ \ \ evaluate\_corlocs=\textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00567}00567\ \ \ \ \ \ \ \ \ metric\_prefix=\textcolor{stringliteral}{'PascalMasks'},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00568}00568\ \ \ \ \ \ \ \ \ use\_weighted\_mean\_ap=\textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00569}00569\ \ \ \ \ \ \ \ \ evaluate\_masks=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00570}00570\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00571}00571\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00572}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_weighted_pascal_instance_segmentation_evaluator}{00572}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_weighted_pascal_instance_segmentation_evaluator}{WeightedPascalInstanceSegmentationEvaluator}}(\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator}{ObjectDetectionEvaluator}}):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00573}00573\ \ \ \textcolor{stringliteral}{"{}"{}"{}A\ class\ to\ evaluate\ instance\ masks\ using\ weighted\ PASCAL\ metrics.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00574}00574\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00575}00575\ \textcolor{stringliteral}{\ \ Weighted\ PASCAL\ metrics\ computes\ the\ mean\ average\ precision\ }\textcolor{keyword}{as}\ the\ average}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00576}00576\ \ \ precision\ given\ the\ scores\ \textcolor{keywordflow}{and}\ tp\_fp\_labels\ of\ all\ classes.\ In\ comparison,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00577}00577\ \ \ PASCAL\ metrics\ computes\ the\ mean\ average\ precision\ \textcolor{keyword}{as}\ the\ mean\ of\ the}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00578}00578\ \ \ per-\/\textcolor{keyword}{class\ }average\ precisions.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00579}00579\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00580}00580\ \ \ This\ definition\ \textcolor{keywordflow}{is}\ very\ similar\ to\ the\ mean\ of\ the\ per-\/\textcolor{keyword}{class\ }average}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00581}00581\ \ \ precisions\ weighted\ by\ \textcolor{keyword}{class\ }frequency.\ However,\ they\ are\ typically\ \textcolor{keywordflow}{not}\ the}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00582}00582\ \ \ same\ \textcolor{keyword}{as}\ the\ average\ precision\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ a\ linear\ function\ of\ the\ scores\ \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00583}00583\ \ \ tp\_fp\_labels.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00584}00584\ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00585}00585\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00586}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_weighted_pascal_instance_segmentation_evaluator_aed85f2486387d20925d170954e122c11}{00586}}\ \textcolor{stringliteral}{\ \ }\textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_weighted_pascal_instance_segmentation_evaluator_aed85f2486387d20925d170954e122c11}{\_\_init\_\_}}(self,\ categories,\ matching\_iou\_threshold=0.5):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00587}00587\ \ \ \ \ super(WeightedPascalInstanceSegmentationEvaluator,\ self).\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_weighted_pascal_instance_segmentation_evaluator_aed85f2486387d20925d170954e122c11}{\_\_init\_\_}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00588}00588\ \ \ \ \ \ \ \ \ categories,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00589}00589\ \ \ \ \ \ \ \ \ matching\_iou\_threshold=matching\_iou\_threshold,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00590}00590\ \ \ \ \ \ \ \ \ evaluate\_corlocs=\textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00591}00591\ \ \ \ \ \ \ \ \ metric\_prefix=\textcolor{stringliteral}{'WeightedPascalMasks'},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00592}00592\ \ \ \ \ \ \ \ \ use\_weighted\_mean\_ap=\textcolor{keyword}{True},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00593}00593\ \ \ \ \ \ \ \ \ evaluate\_masks=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00594}00594\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00595}00595\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00596}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator}{00596}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator}{OpenImagesDetectionEvaluator}}(\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator}{ObjectDetectionEvaluator}}):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00597}00597\ \ \ \textcolor{stringliteral}{"{}"{}"{}A\ class\ to\ evaluate\ detections\ using\ Open\ Images\ V2\ metrics.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00598}00598\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00599}00599\ \textcolor{stringliteral}{\ \ \ \ Open\ Images\ V2\ introduce\ group\_of\ type\ of\ bounding\ boxes\ }\textcolor{keywordflow}{and}\ this\ metric}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00600}00600\ \ \ \ \ handles\ those\ boxes\ appropriately.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00601}00601\ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00602}00602\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00603}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_a3c28eece590f6276205b5495c9ca57e0}{00603}}\ \textcolor{stringliteral}{\ \ }\textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_a3c28eece590f6276205b5495c9ca57e0}{\_\_init\_\_}}(self,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00604}00604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ categories,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00605}00605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ matching\_iou\_threshold=0.5,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00606}00606\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ evaluate\_masks=False,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00607}00607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ evaluate\_corlocs=False,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00608}00608\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metric\_prefix='OpenImagesV2',}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00609}00609\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ group\_of\_weight=0.0):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00610}00610\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Constructor.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00611}00611\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00612}00612\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00613}00613\ \textcolor{stringliteral}{\ \ \ \ \ \ categories:\ A\ list\ of\ dicts,\ each\ of\ which\ has\ the\ following\ keys\ -\/}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00614}00614\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ 'id'}:\ (required)\ an\ integer\ id\ uniquely\ identifying\ this\ category.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00615}00615\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'name'}:\ (required)\ string\ representing\ category\ name\ e.g.,\ \textcolor{stringliteral}{'cat'},\ \textcolor{stringliteral}{'dog'}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00616}00616\ \ \ \ \ \ \ matching\_iou\_threshold:\ IOU\ threshold\ to\ use\ \textcolor{keywordflow}{for}\ matching\ groundtruth}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00617}00617\ \ \ \ \ \ \ \ \ boxes\ to\ detection\ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00618}00618\ \ \ \ \ \ \ evaluate\_masks:\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{True},\ evaluator\ evaluates\ masks.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00619}00619\ \ \ \ \ \ \ evaluate\_corlocs:\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{True},\ additionally\ evaluates\ \textcolor{keywordflow}{and}\ returns\ CorLoc.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00620}00620\ \ \ \ \ \ \ metric\_prefix:\ Prefix\ name\ of\ the\ metric.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00621}00621\ \ \ \ \ \ \ group\_of\_weight:\ Weight\ of\ the\ group-\/of\ bounding\ box.\ If\ set\ to\ 0\ (default}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00622}00622\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ Open\ Images\ V2\ detection\ protocol),\ detections\ of\ the\ correct\ \textcolor{keyword}{class}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00623}00623\ \ \ \ \ \ \ \ \ within\ a\ group-\/of\ box\ are\ ignored.\ If\ weight\ \textcolor{keywordflow}{is}\ >\ 0,\ then\ \textcolor{keywordflow}{if}\ at\ least}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00624}00624\ \ \ \ \ \ \ \ \ one\ detection\ falls\ within\ a\ group-\/of\ box\ \textcolor{keyword}{with}\ matching\_iou\_threshold,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00625}00625\ \ \ \ \ \ \ \ \ weight\ group\_of\_weight\ \textcolor{keywordflow}{is}\ added\ to\ true\ positives.\ Consequently,\ \textcolor{keywordflow}{if}\ no}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00626}00626\ \ \ \ \ \ \ \ \ detection\ falls\ within\ a\ group-\/of\ box,\ weight\ group\_of\_weight\ \textcolor{keywordflow}{is}\ added}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00627}00627\ \ \ \ \ \ \ \ \ to\ false\ negatives.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00628}00628\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00629}00629\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00630}00630\ \textcolor{stringliteral}{\ \ \ \ super(OpenImagesDetectionEvaluator,\ self).\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_a3c28eece590f6276205b5495c9ca57e0}{\_\_init\_\_}}(}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00631}00631\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ categories,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00632}00632\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ matching\_iou\_threshold,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00633}00633\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ evaluate\_corlocs,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00634}00634\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ metric\_prefix=metric\_prefix,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00635}00635\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ group\_of\_weight=group\_of\_weight,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00636}00636\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ evaluate\_masks=evaluate\_masks)}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00637}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_ad626d6b0d23375a4f03cb414091c4887}{00637}}\ \textcolor{stringliteral}{\ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab0f956ef178b4fd9fd7265905cb94d74}{\_expected\_keys}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_ad626d6b0d23375a4f03cb414091c4887}{\_expected\_keys}}\ =\ set([}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00638}00638\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ standard\_fields.InputDataFields.key,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00639}00639\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_boxes,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00640}00640\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_classes,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00641}00641\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_group\_of,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00642}00642\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_boxes,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00643}00643\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_scores,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00644}00644\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_classes,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00645}00645\ \textcolor{stringliteral}{\ \ \ \ ])}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00646}00646\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{if}\ evaluate\_masks:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00647}00647\ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab0f956ef178b4fd9fd7265905cb94d74}{\_expected\_keys}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_ad626d6b0d23375a4f03cb414091c4887}{\_expected\_keys}}.add(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00648}00648\ \ \ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_instance\_masks)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00649}00649\ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab0f956ef178b4fd9fd7265905cb94d74}{\_expected\_keys}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_ad626d6b0d23375a4f03cb414091c4887}{\_expected\_keys}}.add(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00650}00650\ \ \ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_masks)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00651}00651\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00652}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_ae2f2597094561add3e696c7dd8c119b4}{00652}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_ae2f2597094561add3e696c7dd8c119b4}{add\_single\_ground\_truth\_image\_info}}(self,\ image\_id,\ groundtruth\_dict):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00653}00653\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Adds\ groundtruth\ for\ a\ single\ image\ to\ be\ used\ for\ evaluation.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00654}00654\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00655}00655\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00656}00656\ \textcolor{stringliteral}{\ \ \ \ \ \ image\_id:\ A\ unique\ string/integer\ identifier\ }\textcolor{keywordflow}{for}\ the\ image.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00657}00657\ \ \ \ \ \ \ groundtruth\_dict:\ A\ dictionary\ containing\ -\/}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00658}00658\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_boxes:\ float32\ numpy\ array}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00659}00659\ \ \ \ \ \ \ \ \ \ \ of\ shape\ [num\_boxes,\ 4]\ containing\ \`{}num\_boxes\`{}\ groundtruth\ boxes\ of}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00660}00660\ \ \ \ \ \ \ \ \ \ \ the\ format\ [ymin,\ xmin,\ ymax,\ xmax]\ \textcolor{keywordflow}{in}\ absolute\ image\ coordinates.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00661}00661\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_classes:\ integer\ numpy\ array}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00662}00662\ \ \ \ \ \ \ \ \ \ \ of\ shape\ [num\_boxes]\ containing\ 1-\/indexed\ groundtruth\ classes\ \textcolor{keywordflow}{for}\ the}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00663}00663\ \ \ \ \ \ \ \ \ \ \ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00664}00664\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_group\_of:\ Optional\ length\ M}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00665}00665\ \ \ \ \ \ \ \ \ \ \ numpy\ boolean\ array\ denoting\ whether\ a\ groundtruth\ box\ contains\ a}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00666}00666\ \ \ \ \ \ \ \ \ \ \ group\ of\ instances.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00667}00667\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00668}00668\ \ \ \ \ Raises:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00669}00669\ \ \ \ \ \ \ ValueError:\ On\ adding\ groundtruth\ \textcolor{keywordflow}{for}\ an\ image\ more\ than\ once.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00670}00670\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00671}00671\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{if}\ image\_id\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a46f2487e8fc9241b4159f3307050649f}{\_image\_ids}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_a2e05961171ea3948d2797c3a2ea6409c}{\_image\_ids}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00672}00672\ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ValueError(\textcolor{stringliteral}{'Image\ with\ id\ \{\}\ already\ added.'}.format(image\_id))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00673}00673\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00674}00674\ \ \ \ \ groundtruth\_classes\ =\ (}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00675}00675\ \ \ \ \ \ \ \ \ groundtruth\_dict[standard\_fields.InputDataFields.groundtruth\_classes]\ -\/}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00676}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_af2aa43e5f5696c004f6eede61c42e6d2}{00676}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{\_label\_id\_offset}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_af2aa43e5f5696c004f6eede61c42e6d2}{\_label\_id\_offset}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00677}00677\ \ \ \ \ \textcolor{comment}{\#\ If\ the\ key\ is\ not\ present\ in\ the\ groundtruth\_dict\ or\ the\ array\ is\ empty}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00678}00678\ \ \ \ \ \textcolor{comment}{\#\ (unless\ there\ are\ no\ annotations\ for\ the\ groundtruth\ on\ this\ image)}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00679}00679\ \ \ \ \ \textcolor{comment}{\#\ use\ values\ from\ the\ dictionary\ or\ insert\ None\ otherwise.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00680}00680\ \ \ \ \ \textcolor{keywordflow}{if}\ (standard\_fields.InputDataFields.groundtruth\_group\_of\ \textcolor{keywordflow}{in}\ six.viewkeys(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00681}00681\ \ \ \ \ \ \ \ \ groundtruth\_dict)\ \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00682}00682\ \ \ \ \ \ \ \ \ (groundtruth\_dict[standard\_fields.InputDataFields.groundtruth\_group\_of]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00683}00683\ \ \ \ \ \ \ \ \ \ .size\ \textcolor{keywordflow}{or}\ \textcolor{keywordflow}{not}\ groundtruth\_classes.size)):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00684}00684\ \ \ \ \ \ \ groundtruth\_group\_of\ =\ groundtruth\_dict[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00685}00685\ \ \ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_group\_of]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00686}00686\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00687}00687\ \ \ \ \ \ \ groundtruth\_group\_of\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00688}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_a2e05961171ea3948d2797c3a2ea6409c}{00688}}\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ len(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a46f2487e8fc9241b4159f3307050649f}{\_image\_ids}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_a2e05961171ea3948d2797c3a2ea6409c}{\_image\_ids}})\ \%\ 1000:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00689}00689\ \ \ \ \ \ \ \ \ logging.warning(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00690}00690\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'image\ \%s\ does\ not\ have\ groundtruth\ group\_of\ flag\ specified'},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00691}00691\ \ \ \ \ \ \ \ \ \ \ \ \ image\_id)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00692}00692\ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a3cb1d410774a7a965d478299b819a622}{\_evaluate\_masks}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00693}00693\ \ \ \ \ \ \ groundtruth\_masks\ =\ groundtruth\_dict[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00694}00694\ \ \ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_instance\_masks]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00695}00695\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00696}00696\ \ \ \ \ \ \ groundtruth\_masks\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00697}00697\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00698}00698\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a57c959fcde4deb198b5263d8dfa2bd6b}{\_evaluation}}.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_ae2f2597094561add3e696c7dd8c119b4}{add\_single\_ground\_truth\_image\_info}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00699}00699\ \ \ \ \ \ \ \ \ image\_id,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00700}00700\ \ \ \ \ \ \ \ \ groundtruth\_dict[standard\_fields.InputDataFields.groundtruth\_boxes],}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00701}00701\ \ \ \ \ \ \ \ \ groundtruth\_classes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00702}00702\ \ \ \ \ \ \ \ \ groundtruth\_is\_difficult\_list=\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00703}00703\ \ \ \ \ \ \ \ \ groundtruth\_is\_group\_of\_list=groundtruth\_group\_of,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00704}00704\ \ \ \ \ \ \ \ \ groundtruth\_masks=groundtruth\_masks)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00705}00705\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a46f2487e8fc9241b4159f3307050649f}{\_image\_ids}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_a2e05961171ea3948d2797c3a2ea6409c}{\_image\_ids}}.update([image\_id])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00706}00706\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00707}00707\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00708}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator}{00708}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator}{OpenImagesChallengeEvaluator}}(\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator}{OpenImagesDetectionEvaluator}}):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00709}00709\ \ \ \textcolor{stringliteral}{"{}"{}"{}A\ class\ implements\ Open\ Images\ Challenge\ metrics.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00710}00710\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00711}00711\ \textcolor{stringliteral}{\ \ \ \ Both\ Detection\ }\textcolor{keywordflow}{and}\ Instance\ Segmentation\ evaluation\ metrics\ are\ implemented.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00712}00712\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00713}00713\ \ \ \ \ Open\ Images\ Challenge\ Detection\ metric\ has\ two\ major\ changes\ \textcolor{keywordflow}{in}\ comparison}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00714}00714\ \ \ \ \ \textcolor{keyword}{with}\ Open\ Images\ V2\ detection\ metric:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00715}00715\ \ \ \ \ -\/\ a\ custom\ weight\ might\ be\ specified\ \textcolor{keywordflow}{for}\ detecting\ an\ object\ contained\ \textcolor{keywordflow}{in}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00716}00716\ \ \ \ \ a\ group-\/of\ box.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00717}00717\ \ \ \ \ -\/\ verified\ image-\/level\ labels\ should\ be\ explicitelly\ provided\ \textcolor{keywordflow}{for}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00718}00718\ \ \ \ \ evaluation:\ \textcolor{keywordflow}{in}\ case\ \textcolor{keywordflow}{in}\ image\ has\ neither\ positive\ nor\ negative\ image\ level}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00719}00719\ \ \ \ \ label\ of\ \textcolor{keyword}{class\ }c,\ all\ \mbox{\hyperlink{namespacedetections}{detections}}\ of\ this\ class\ on\ this\ image\ will\ be}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00720}00720\ \ \ \ \ ignored.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00721}00721\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00722}00722\ \ \ \ \ Open\ Images\ Challenge\ Instance\ Segmentation\ metric\ allows\ to\ measure\ per}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00723}00723\ \ \ \ \ formance\ of\ models\ \textcolor{keywordflow}{in}\ case\ of\ incomplete\ annotations:\ some\ instances\ are}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00724}00724\ \ \ \ \ annotations\ only\ on\ box\ level\ \textcolor{keywordflow}{and}\ some\ -\/\ on\ image-\/level.\ In\ addition,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00725}00725\ \ \ \ \ image-\/level\ labels\ are\ taken\ into\ account\ \textcolor{keyword}{as}\ \textcolor{keywordflow}{in}\ detection\ metric.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00726}00726\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00727}00727\ \ \ \ \ Open\ Images\ Challenge\ Detection\ metric\ default\ parameters:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00728}00728\ \ \ \ \ evaluate\_masks\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00729}00729\ \ \ \ \ group\_of\_weight\ =\ 1.0}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00730}00730\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00731}00731\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00732}00732\ \ \ \ \ Open\ Images\ Challenge\ Instance\ Segmentation\ metric\ default\ parameters:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00733}00733\ \ \ \ \ evaluate\_masks\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00734}00734\ \ \ \ \ (group\_of\_weight\ will\ \textcolor{keywordflow}{not}\ matter)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00735}00735\ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00736}00736\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00737}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a1b9ccec8b60be25851d90bf11ea4c977}{00737}}\ \textcolor{stringliteral}{\ \ }\textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a1b9ccec8b60be25851d90bf11ea4c977}{\_\_init\_\_}}(self,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00738}00738\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ categories,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00739}00739\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ evaluate\_masks=False,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00740}00740\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ matching\_iou\_threshold=0.5,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00741}00741\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ evaluate\_corlocs=False,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00742}00742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ group\_of\_weight=1.0):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00743}00743\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Constructor.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00744}00744\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00745}00745\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00746}00746\ \textcolor{stringliteral}{\ \ \ \ \ \ categories:\ A\ list\ of\ dicts,\ each\ of\ which\ has\ the\ following\ keys\ -\/}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00747}00747\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ 'id'}:\ (required)\ an\ integer\ id\ uniquely\ identifying\ this\ category.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00748}00748\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'name'}:\ (required)\ string\ representing\ category\ name\ e.g.,\ \textcolor{stringliteral}{'cat'},\ \textcolor{stringliteral}{'dog'}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00749}00749\ \ \ \ \ \ \ evaluate\_masks:\ set\ to\ true\ \textcolor{keywordflow}{for}\ instance\ segmentation\ metric\ \textcolor{keywordflow}{and}\ to\ false}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00750}00750\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ detection\ metric.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00751}00751\ \ \ \ \ \ \ matching\_iou\_threshold:\ IOU\ threshold\ to\ use\ \textcolor{keywordflow}{for}\ matching\ groundtruth}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00752}00752\ \ \ \ \ \ \ \ \ boxes\ to\ detection\ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00753}00753\ \ \ \ \ \ \ evaluate\_corlocs:\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{True},\ additionally\ evaluates\ \textcolor{keywordflow}{and}\ returns\ CorLoc.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00754}00754\ \ \ \ \ \ \ group\_of\_weight:\ Weight\ of\ group-\/of\ boxes.\ If\ set\ to\ 0,\ detections\ of\ the}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00755}00755\ \ \ \ \ \ \ \ \ correct\ \textcolor{keyword}{class\ }within\ a\ group-\/of\ box\ are\ ignored.\ If\ weight\ \textcolor{keywordflow}{is}\ >\ 0,\ then}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00756}00756\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ at\ least\ one\ detection\ falls\ within\ a\ group-\/of\ box\ \textcolor{keyword}{with}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00757}00757\ \ \ \ \ \ \ \ \ matching\_iou\_threshold,\ weight\ group\_of\_weight\ \textcolor{keywordflow}{is}\ added\ to\ true}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00758}00758\ \ \ \ \ \ \ \ \ positives.\ Consequently,\ \textcolor{keywordflow}{if}\ no\ detection\ falls\ within\ a\ group-\/of\ box,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00759}00759\ \ \ \ \ \ \ \ \ weight\ group\_of\_weight\ \textcolor{keywordflow}{is}\ added\ to\ false\ negatives.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00760}00760\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00761}00761\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ evaluate\_masks:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00762}00762\ \ \ \ \ \ \ metrics\_prefix\ =\ \textcolor{stringliteral}{'OpenImagesDetectionChallenge'}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00763}00763\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00764}00764\ \ \ \ \ \ \ metrics\_prefix\ =\ \textcolor{stringliteral}{'OpenImagesInstanceSegmentationChallenge'}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00765}00765\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00766}00766\ \ \ \ \ super(OpenImagesChallengeEvaluator,\ self).\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a1b9ccec8b60be25851d90bf11ea4c977}{\_\_init\_\_}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00767}00767\ \ \ \ \ \ \ \ \ categories,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00768}00768\ \ \ \ \ \ \ \ \ matching\_iou\_threshold,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00769}00769\ \ \ \ \ \ \ \ \ evaluate\_masks=evaluate\_masks,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00770}00770\ \ \ \ \ \ \ \ \ evaluate\_corlocs=evaluate\_corlocs,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00771}00771\ \ \ \ \ \ \ \ \ group\_of\_weight=group\_of\_weight,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00772}00772\ \ \ \ \ \ \ \ \ metric\_prefix=metrics\_prefix)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00773}00773\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00774}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a8a17f1ba185139b1dd55fbc912c7b26a}{00774}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a8a17f1ba185139b1dd55fbc912c7b26a}{\_evaluatable\_labels}}\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00775}00775\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ab0f956ef178b4fd9fd7265905cb94d74}{\_expected\_keys}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_ad626d6b0d23375a4f03cb414091c4887}{\_expected\_keys}}.add(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00776}00776\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_image\_classes)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00777}00777\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00778}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a04c39f47814705050fc88a071b8ff5bd}{00778}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a04c39f47814705050fc88a071b8ff5bd}{add\_single\_ground\_truth\_image\_info}}(self,\ image\_id,\ groundtruth\_dict):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00779}00779\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Adds\ groundtruth\ for\ a\ single\ image\ to\ be\ used\ for\ evaluation.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00780}00780\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00781}00781\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00782}00782\ \textcolor{stringliteral}{\ \ \ \ \ \ image\_id:\ A\ unique\ string/integer\ identifier\ }\textcolor{keywordflow}{for}\ the\ image.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00783}00783\ \ \ \ \ \ \ groundtruth\_dict:\ A\ dictionary\ containing\ -\/}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00784}00784\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_boxes:\ float32\ numpy\ array}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00785}00785\ \ \ \ \ \ \ \ \ \ \ of\ shape\ [num\_boxes,\ 4]\ containing\ \`{}num\_boxes\`{}\ groundtruth\ boxes\ of}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00786}00786\ \ \ \ \ \ \ \ \ \ \ the\ format\ [ymin,\ xmin,\ ymax,\ xmax]\ \textcolor{keywordflow}{in}\ absolute\ image\ coordinates.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00787}00787\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_classes:\ integer\ numpy\ array}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00788}00788\ \ \ \ \ \ \ \ \ \ \ of\ shape\ [num\_boxes]\ containing\ 1-\/indexed\ groundtruth\ classes\ \textcolor{keywordflow}{for}\ the}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00789}00789\ \ \ \ \ \ \ \ \ \ \ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00790}00790\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_image\_classes:\ integer\ 1D}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00791}00791\ \ \ \ \ \ \ \ \ \ \ numpy\ array\ containing\ all\ classes\ \textcolor{keywordflow}{for}\ which\ labels\ are\ verified.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00792}00792\ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_group\_of:\ Optional\ length\ M}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00793}00793\ \ \ \ \ \ \ \ \ \ \ numpy\ boolean\ array\ denoting\ whether\ a\ groundtruth\ box\ contains\ a}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00794}00794\ \ \ \ \ \ \ \ \ \ \ group\ of\ instances.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00795}00795\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00796}00796\ \ \ \ \ Raises:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00797}00797\ \ \ \ \ \ \ ValueError:\ On\ adding\ groundtruth\ \textcolor{keywordflow}{for}\ an\ image\ more\ than\ once.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00798}00798\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00799}00799\ \textcolor{stringliteral}{\ \ \ \ super(OpenImagesChallengeEvaluator,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00800}00800\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ self).\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a04c39f47814705050fc88a071b8ff5bd}{add\_single\_ground\_truth\_image\_info}}(image\_id,\ groundtruth\_dict)}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00801}00801\ \textcolor{stringliteral}{\ \ \ \ groundtruth\_classes\ =\ (}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00802}00802\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ groundtruth\_dict[standard\_fields.InputDataFields.groundtruth\_classes]\ -\/}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00803}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a63c2b39ec4a4f25a21bd4dd5329a2b52}{00803}}\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{\_label\_id\_offset}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_af2aa43e5f5696c004f6eede61c42e6d2}{\_label\_id\_offset}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a63c2b39ec4a4f25a21bd4dd5329a2b52}{\_label\_id\_offset}})}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00804}00804\ \textcolor{stringliteral}{\ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a8a17f1ba185139b1dd55fbc912c7b26a}{\_evaluatable\_labels}}[image\_id]\ =\ np.unique(}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00805}00805\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ np.concatenate(((groundtruth\_dict.get(}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00806}00806\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ standard\_fields.InputDataFields.groundtruth\_image\_classes,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00807}00807\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ np.array([],\ dtype=int))\ -\/\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{\_label\_id\_offset}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_af2aa43e5f5696c004f6eede61c42e6d2}{\_label\_id\_offset}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a63c2b39ec4a4f25a21bd4dd5329a2b52}{\_label\_id\_offset}}),}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00808}00808\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_classes)))}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00809}00809\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00810}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a9985e8acd02f5a87a8a5aeea53cccbd1}{00810}}\ \textcolor{stringliteral}{\ \ }\textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a9985e8acd02f5a87a8a5aeea53cccbd1}{add\_single\_detected\_image\_info}}(self,\ image\_id,\ detections\_dict):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00811}00811\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Adds\ detections\ for\ a\ single\ image\ to\ be\ used\ for\ evaluation.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00812}00812\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00813}00813\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00814}00814\ \textcolor{stringliteral}{\ \ \ \ \ \ image\_id:\ A\ unique\ string/integer\ identifier\ }\textcolor{keywordflow}{for}\ the\ image.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00815}00815\ \ \ \ \ \ \ detections\_dict:\ A\ dictionary\ containing\ -\/}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00816}00816\ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_boxes:\ float32\ numpy}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00817}00817\ \ \ \ \ \ \ \ \ \ \ array\ of\ shape\ [num\_boxes,\ 4]\ containing\ \`{}num\_boxes\`{}\ detection\ boxes}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00818}00818\ \ \ \ \ \ \ \ \ \ \ of\ the\ format\ [ymin,\ xmin,\ ymax,\ xmax]\ \textcolor{keywordflow}{in}\ absolute\ image\ coordinates.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00819}00819\ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_scores:\ float32\ numpy}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00820}00820\ \ \ \ \ \ \ \ \ \ \ array\ of\ shape\ [num\_boxes]\ containing\ detection\ scores\ \textcolor{keywordflow}{for}\ the\ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00821}00821\ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_classes:\ integer\ numpy}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00822}00822\ \ \ \ \ \ \ \ \ \ \ array\ of\ shape\ [num\_boxes]\ containing\ 1-\/indexed\ detection\ classes\ \textcolor{keywordflow}{for}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00823}00823\ \ \ \ \ \ \ \ \ \ \ the\ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00824}00824\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00825}00825\ \ \ \ \ Raises:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00826}00826\ \ \ \ \ \ \ ValueError:\ If\ detection\ masks\ are\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ detections\ dictionary.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00827}00827\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00828}00828\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{if}\ image\_id\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a46f2487e8fc9241b4159f3307050649f}{\_image\_ids}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_a2e05961171ea3948d2797c3a2ea6409c}{\_image\_ids}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00829}00829\ \ \ \ \ \ \ \textcolor{comment}{\#\ Since\ for\ the\ correct\ work\ of\ evaluator\ it\ is\ assumed\ that\ groundtruth}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00830}00830\ \ \ \ \ \ \ \textcolor{comment}{\#\ is\ inserted\ first\ we\ make\ sure\ to\ break\ the\ code\ if\ is\ it\ not\ the\ case.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00831}00831\ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a46f2487e8fc9241b4159f3307050649f}{\_image\_ids}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_a2e05961171ea3948d2797c3a2ea6409c}{\_image\_ids}}.update([image\_id])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00832}00832\ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a8a17f1ba185139b1dd55fbc912c7b26a}{\_evaluatable\_labels}}[image\_id]\ =\ np.array([])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00833}00833\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00834}00834\ \ \ \ \ detection\_classes\ =\ (}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00835}00835\ \ \ \ \ \ \ \ \ detections\_dict[standard\_fields.DetectionResultFields.detection\_classes]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00836}00836\ \ \ \ \ \ \ \ \ -\/\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_ac06bf3dd211fbe40805f1af9d6d32807}{\_label\_id\_offset}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_evaluator_af2aa43e5f5696c004f6eede61c42e6d2}{\_label\_id\_offset}}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a63c2b39ec4a4f25a21bd4dd5329a2b52}{\_label\_id\_offset}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00837}00837\ \ \ \ \ allowed\_classes\ =\ np.where(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00838}00838\ \ \ \ \ \ \ \ \ np.isin(detection\_classes,\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a8a17f1ba185139b1dd55fbc912c7b26a}{\_evaluatable\_labels}}[image\_id]))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00839}00839\ \ \ \ \ detection\_classes\ =\ detection\_classes[allowed\_classes]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00840}00840\ \ \ \ \ detected\_boxes\ =\ detections\_dict[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00841}00841\ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_boxes][allowed\_classes]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00842}00842\ \ \ \ \ detected\_scores\ =\ detections\_dict[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00843}00843\ \ \ \ \ \ \ \ \ standard\_fields.DetectionResultFields.detection\_scores][allowed\_classes]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00844}00844\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00845}00845\ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a3cb1d410774a7a965d478299b819a622}{\_evaluate\_masks}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00846}00846\ \ \ \ \ \ \ detection\_masks\ =\ detections\_dict[standard\_fields.DetectionResultFields}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00847}00847\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .detection\_masks][allowed\_classes]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00848}00848\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00849}00849\ \ \ \ \ \ \ detection\_masks\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00850}00850\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluator_a57c959fcde4deb198b5263d8dfa2bd6b}{\_evaluation}}.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a9985e8acd02f5a87a8a5aeea53cccbd1}{add\_single\_detected\_image\_info}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00851}00851\ \ \ \ \ \ \ \ \ image\_key=image\_id,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00852}00852\ \ \ \ \ \ \ \ \ detected\_boxes=detected\_boxes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00853}00853\ \ \ \ \ \ \ \ \ detected\_scores=detected\_scores,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00854}00854\ \ \ \ \ \ \ \ \ detected\_class\_labels=detection\_classes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00855}00855\ \ \ \ \ \ \ \ \ detected\_masks=detection\_masks)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00856}00856\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00857}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a179fe390faaf1f80eed5683155b59c76}{00857}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a179fe390faaf1f80eed5683155b59c76}{clear}}(self):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00858}00858\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Clears\ stored\ data."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00859}00859\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00860}00860\ \ \ \ \ super(OpenImagesChallengeEvaluator,\ self).\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a179fe390faaf1f80eed5683155b59c76}{clear}}()}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00861}00861\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a8a17f1ba185139b1dd55fbc912c7b26a}{\_evaluatable\_labels}}.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator_a179fe390faaf1f80eed5683155b59c76}{clear}}()}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00862}00862\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00863}00863\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00864}\mbox{\hyperlink{namespacedetection__utils_1_1utils_1_1object__detection__evaluation_a571cbc06885aa4c0e3188603a9f9049b}{00864}}\ ObjectDetectionEvalMetrics\ =\ collections.namedtuple(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00865}00865\ \ \ \ \ \textcolor{stringliteral}{'ObjectDetectionEvalMetrics'},\ [}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00866}00866\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'average\_precisions'},\ \textcolor{stringliteral}{'mean\_ap'},\ \textcolor{stringliteral}{'precisions'},\ \textcolor{stringliteral}{'recalls'},\ \textcolor{stringliteral}{'corlocs'},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00867}00867\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'mean\_corloc'}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00868}00868\ \ \ \ \ ])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00869}00869\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00870}00870\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00871}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_challenge_evaluator}{00871}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_challenge_evaluator}{OpenImagesDetectionChallengeEvaluator}}(\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_challenge_evaluator}{OpenImagesChallengeEvaluator}}):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00872}00872\ \ \ \textcolor{stringliteral}{"{}"{}"{}A\ class\ implements\ Open\ Images\ Detection\ Challenge\ metric."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00873}00873\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00874}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_challenge_evaluator_afad29464662063e68ca6f31bcdc36fc2}{00874}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_challenge_evaluator_afad29464662063e68ca6f31bcdc36fc2}{\_\_init\_\_}}(self,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00875}00875\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ categories,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00876}00876\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ matching\_iou\_threshold=0.5,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00877}00877\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ evaluate\_corlocs=False):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00878}00878\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Constructor.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00879}00879\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00880}00880\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00881}00881\ \textcolor{stringliteral}{\ \ \ \ \ \ categories:\ A\ list\ of\ dicts,\ each\ of\ which\ has\ the\ following\ keys\ -\/}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00882}00882\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ 'id'}:\ (required)\ an\ integer\ id\ uniquely\ identifying\ this\ category.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00883}00883\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'name'}:\ (required)\ string\ representing\ category\ name\ e.g.,\ \textcolor{stringliteral}{'cat'},\ \textcolor{stringliteral}{'dog'}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00884}00884\ \ \ \ \ \ \ matching\_iou\_threshold:\ IOU\ threshold\ to\ use\ \textcolor{keywordflow}{for}\ matching\ groundtruth}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00885}00885\ \ \ \ \ \ \ \ \ boxes\ to\ detection\ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00886}00886\ \ \ \ \ \ \ evaluate\_corlocs:\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{True},\ additionally\ evaluates\ \textcolor{keywordflow}{and}\ returns\ CorLoc.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00887}00887\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00888}00888\ \textcolor{stringliteral}{\ \ \ \ super(OpenImagesDetectionChallengeEvaluator,\ self).\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_detection_challenge_evaluator_afad29464662063e68ca6f31bcdc36fc2}{\_\_init\_\_}}(}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00889}00889\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ categories=categories,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00890}00890\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ evaluate\_masks=}\textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00891}00891\ \ \ \ \ \ \ \ \ matching\_iou\_threshold=matching\_iou\_threshold,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00892}00892\ \ \ \ \ \ \ \ \ evaluate\_corlocs=\textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00893}00893\ \ \ \ \ \ \ \ \ group\_of\_weight=1.0)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00894}00894\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00895}00895\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00896}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_instance_segmentation_challenge_evaluator}{00896}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_instance_segmentation_challenge_evaluator}{OpenImagesInstanceSegmentationChallengeEvaluator}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00897}00897\ \ \ \ \ OpenImagesChallengeEvaluator):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00898}00898\ \ \ \textcolor{stringliteral}{"{}"{}"{}A\ class\ implements\ Open\ Images\ Instance\ Segmentation\ Challenge\ metric."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00899}00899\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00900}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_instance_segmentation_challenge_evaluator_a078f2cd3ca025b81ae0cf845859faf62}{00900}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_instance_segmentation_challenge_evaluator_a078f2cd3ca025b81ae0cf845859faf62}{\_\_init\_\_}}(self,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00901}00901\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ categories,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00902}00902\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ matching\_iou\_threshold=0.5,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00903}00903\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ evaluate\_corlocs=False):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00904}00904\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Constructor.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00905}00905\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00906}00906\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00907}00907\ \textcolor{stringliteral}{\ \ \ \ \ \ categories:\ A\ list\ of\ dicts,\ each\ of\ which\ has\ the\ following\ keys\ -\/}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00908}00908\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ 'id'}:\ (required)\ an\ integer\ id\ uniquely\ identifying\ this\ category.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00909}00909\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'name'}:\ (required)\ string\ representing\ category\ name\ e.g.,\ \textcolor{stringliteral}{'cat'},\ \textcolor{stringliteral}{'dog'}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00910}00910\ \ \ \ \ \ \ matching\_iou\_threshold:\ IOU\ threshold\ to\ use\ \textcolor{keywordflow}{for}\ matching\ groundtruth}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00911}00911\ \ \ \ \ \ \ \ \ boxes\ to\ detection\ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00912}00912\ \ \ \ \ \ \ evaluate\_corlocs:\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{True},\ additionally\ evaluates\ \textcolor{keywordflow}{and}\ returns\ CorLoc.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00913}00913\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00914}00914\ \textcolor{stringliteral}{\ \ \ \ super(OpenImagesInstanceSegmentationChallengeEvaluator,\ self).\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_open_images_instance_segmentation_challenge_evaluator_a078f2cd3ca025b81ae0cf845859faf62}{\_\_init\_\_}}(}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00915}00915\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ categories=categories,}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00916}00916\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ evaluate\_masks=}\textcolor{keyword}{True},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00917}00917\ \ \ \ \ \ \ \ \ matching\_iou\_threshold=matching\_iou\_threshold,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00918}00918\ \ \ \ \ \ \ \ \ evaluate\_corlocs=\textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00919}00919\ \ \ \ \ \ \ \ \ group\_of\_weight=0.0)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00920}00920\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00921}00921\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00922}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation}{00922}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation}{ObjectDetectionEvaluation}}(object):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00923}00923\ \ \ \textcolor{stringliteral}{"{}"{}"{}Internal\ implementation\ of\ Pascal\ object\ detection\ metrics."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00924}00924\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00925}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a186fa65f09d3b755d58378d067eef8fc}{00925}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a186fa65f09d3b755d58378d067eef8fc}{\_\_init\_\_}}(self,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00926}00926\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\_groundtruth\_classes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00927}00927\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ matching\_iou\_threshold=0.5,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00928}00928\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nms\_iou\_threshold=1.0,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00929}00929\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nms\_max\_output\_boxes=10000,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00930}00930\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ recall\_lower\_bound=0.0,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00931}00931\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ recall\_upper\_bound=1.0,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00932}00932\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ use\_weighted\_mean\_ap=False,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00933}00933\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ label\_id\_offset=0,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00934}00934\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ group\_of\_weight=0.0,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00935}00935\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ per\_image\_eval\_class=per\_image\_evaluation.PerImageEvaluation):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00936}00936\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Constructor.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00937}00937\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00938}00938\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00939}00939\ \textcolor{stringliteral}{\ \ \ \ \ \ num\_groundtruth\_classes:\ Number\ of\ ground-\/truth\ classes.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00940}00940\ \textcolor{stringliteral}{\ \ \ \ \ \ matching\_iou\_threshold:\ IOU\ threshold\ used\ }\textcolor{keywordflow}{for}\ matching\ detected\ boxes\ to}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00941}00941\ \ \ \ \ \ \ \ \ ground-\/truth\ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00942}00942\ \ \ \ \ \ \ nms\_iou\_threshold:\ IOU\ threshold\ used\ \textcolor{keywordflow}{for}\ non-\/maximum\ suppression.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00943}00943\ \ \ \ \ \ \ nms\_max\_output\_boxes:\ Maximum\ number\ of\ boxes\ returned\ by\ non-\/maximum}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00944}00944\ \ \ \ \ \ \ \ \ suppression.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00945}00945\ \ \ \ \ \ \ recall\_lower\_bound:\ lower\ bound\ of\ recall\ operating\ area}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00946}00946\ \ \ \ \ \ \ recall\_upper\_bound:\ upper\ bound\ of\ recall\ operating\ area}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00947}00947\ \ \ \ \ \ \ use\_weighted\_mean\_ap:\ (optional)\ boolean\ which\ determines\ \textcolor{keywordflow}{if}\ the\ mean}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00948}00948\ \ \ \ \ \ \ \ \ average\ precision\ \textcolor{keywordflow}{is}\ computed\ directly\ \textcolor{keyword}{from}\ the\ scores\ \textcolor{keywordflow}{and}\ tp\_fp\_labels}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00949}00949\ \ \ \ \ \ \ \ \ of\ all\ classes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00950}00950\ \ \ \ \ \ \ label\_id\_offset:\ The\ label\ id\ offset.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00951}00951\ \ \ \ \ \ \ group\_of\_weight:\ Weight\ of\ group-\/of\ boxes.If\ set\ to\ 0,\ detections\ of\ the}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00952}00952\ \ \ \ \ \ \ \ \ correct\ \textcolor{keyword}{class\ }within\ a\ group-\/of\ box\ are\ ignored.\ If\ weight\ \textcolor{keywordflow}{is}\ >\ 0,\ then}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00953}00953\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ at\ least\ one\ detection\ falls\ within\ a\ group-\/of\ box\ \textcolor{keyword}{with}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00954}00954\ \ \ \ \ \ \ \ \ matching\_iou\_threshold,\ weight\ group\_of\_weight\ \textcolor{keywordflow}{is}\ added\ to\ true}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00955}00955\ \ \ \ \ \ \ \ \ positives.\ Consequently,\ \textcolor{keywordflow}{if}\ no\ detection\ falls\ within\ a\ group-\/of\ box,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00956}00956\ \ \ \ \ \ \ \ \ weight\ group\_of\_weight\ \textcolor{keywordflow}{is}\ added\ to\ false\ negatives.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00957}00957\ \ \ \ \ \ \ per\_image\_eval\_class:\ The\ \textcolor{keyword}{class\ }that\ contains\ functions\ for\ computing\ per}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00958}00958\ \ \ \ \ \ \ \ \ image\ metrics.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00959}00959\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00960}00960\ \ \ \ \ Raises:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00961}00961\ \ \ \ \ \ \ ValueError:\ \textcolor{keywordflow}{if}\ num\_groundtruth\_classes\ \textcolor{keywordflow}{is}\ smaller\ than\ 1.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00962}00962\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00963}00963\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{if}\ num\_groundtruth\_classes\ <\ 1:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00964}00964\ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ValueError(\textcolor{stringliteral}{'Need\ at\ least\ 1\ groundtruth\ class\ for\ evaluation.'})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00965}00965\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00966}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a31750b020898748bb46dd161883308c9}{00966}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a31750b020898748bb46dd161883308c9}{per\_image\_eval}}\ =\ per\_image\_eval\_class(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00967}00967\ \ \ \ \ \ \ \ \ num\_groundtruth\_classes=num\_groundtruth\_classes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00968}00968\ \ \ \ \ \ \ \ \ matching\_iou\_threshold=matching\_iou\_threshold,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00969}00969\ \ \ \ \ \ \ \ \ nms\_iou\_threshold=nms\_iou\_threshold,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00970}00970\ \ \ \ \ \ \ \ \ nms\_max\_output\_boxes=nms\_max\_output\_boxes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00971}00971\ \ \ \ \ \ \ \ \ group\_of\_weight=group\_of\_weight)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00972}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_acdcd4038d030551f16bc1d38a1bec39f}{00972}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_acdcd4038d030551f16bc1d38a1bec39f}{recall\_lower\_bound}}\ =\ recall\_lower\_bound}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00973}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a0694bbdf3af6c3d15be20895fcb64798}{00973}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a0694bbdf3af6c3d15be20895fcb64798}{recall\_upper\_bound}}\ =\ recall\_upper\_bound}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00974}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a9cdda8fae5a45af869c3f5ecca3993dc}{00974}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a9cdda8fae5a45af869c3f5ecca3993dc}{group\_of\_weight}}\ =\ group\_of\_weight}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00975}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{00975}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{num\_class}}\ =\ num\_groundtruth\_classes}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00976}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a7b1d1ed97b592fcc8507508e99aaaf50}{00976}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a7b1d1ed97b592fcc8507508e99aaaf50}{use\_weighted\_mean\_ap}}\ =\ use\_weighted\_mean\_ap}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00977}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a4d1d60abab9aadf6261dd4bab9b85dba}{00977}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a4d1d60abab9aadf6261dd4bab9b85dba}{label\_id\_offset}}\ =\ label\_id\_offset}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00978}00978\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00979}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae31fb35008e74625873644abb8b27dad}{00979}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae31fb35008e74625873644abb8b27dad}{groundtruth\_boxes}}\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00980}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ab82a6fb16d6502c75c75bc8ed6ae101c}{00980}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ab82a6fb16d6502c75c75bc8ed6ae101c}{groundtruth\_class\_labels}}\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00981}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_aef5866c1fd149f404170d7defb24976b}{00981}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_aef5866c1fd149f404170d7defb24976b}{groundtruth\_masks}}\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00982}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a8152458f4e1ec45848c88d342da65bbe}{00982}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a8152458f4e1ec45848c88d342da65bbe}{groundtruth\_is\_difficult\_list}}\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00983}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a7b4e5a4ae04cf35ece51a2f65981c853}{00983}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a7b4e5a4ae04cf35ece51a2f65981c853}{groundtruth\_is\_group\_of\_list}}\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00984}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a47145cfb0b6759490437770e0ee85937}{00984}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a47145cfb0b6759490437770e0ee85937}{num\_gt\_instances\_per\_class}}\ =\ np.zeros(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{num\_class}},\ dtype=float)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00985}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a000bf16f3c78ff41810e0fa54d830160}{00985}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a000bf16f3c78ff41810e0fa54d830160}{num\_gt\_imgs\_per\_class}}\ =\ np.zeros(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{num\_class}},\ dtype=int)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00986}00986\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00987}00987\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a6864d0dd3c4eb1be25b41de9afc68e23}{\_initialize\_detections}}()}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00988}00988\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00989}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a6864d0dd3c4eb1be25b41de9afc68e23}{00989}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a6864d0dd3c4eb1be25b41de9afc68e23}{\_initialize\_detections}}(self):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00990}00990\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Initializes\ internal\ data\ structures."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00991}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a34811b48d26700ef3abff14998cdf1d5}{00991}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a34811b48d26700ef3abff14998cdf1d5}{detection\_keys}}\ =\ set()}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00992}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a294b59aab3cc6d401a48310af2b6ba3f}{00992}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a294b59aab3cc6d401a48310af2b6ba3f}{scores\_per\_class}}\ =\ [[]\ \textcolor{keywordflow}{for}\ \_\ \textcolor{keywordflow}{in}\ range(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{num\_class}})]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00993}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_acc1a9ccb5e4a706f369e094a699f99c8}{00993}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_acc1a9ccb5e4a706f369e094a699f99c8}{tp\_fp\_labels\_per\_class}}\ =\ [[]\ \textcolor{keywordflow}{for}\ \_\ \textcolor{keywordflow}{in}\ range(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{num\_class}})]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00994}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a6f6ed78087058b667307f3904dfa670f}{00994}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a6f6ed78087058b667307f3904dfa670f}{num\_images\_correctly\_detected\_per\_class}}\ =\ np.zeros(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{num\_class}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00995}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a0a601d7b5f63d92167d4ed66f7a44cce}{00995}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a0a601d7b5f63d92167d4ed66f7a44cce}{average\_precision\_per\_class}}\ =\ np.empty(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{num\_class}},\ dtype=float)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00996}00996\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a0a601d7b5f63d92167d4ed66f7a44cce}{average\_precision\_per\_class}}.fill(np.nan)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00997}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a53492d7a4ec24f6e1ec6e2c5295d0de3}{00997}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a53492d7a4ec24f6e1ec6e2c5295d0de3}{precisions\_per\_class}}\ =\ [np.nan]\ *\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{num\_class}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00998}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a97075d4e683fac6b4ff364b6a063acd0}{00998}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a97075d4e683fac6b4ff364b6a063acd0}{recalls\_per\_class}}\ =\ [np.nan]\ *\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{num\_class}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l00999}00999\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01000}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ab45a7769717947988443bfc2a20d8b2f}{01000}}\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ab45a7769717947988443bfc2a20d8b2f}{corloc\_per\_class}}\ =\ np.ones(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{num\_class}},\ dtype=float)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01001}01001\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01002}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a5960beb43a5b787e7c3c097a53feb27b}{01002}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a5960beb43a5b787e7c3c097a53feb27b}{clear\_detections}}(self):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01003}01003\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a6864d0dd3c4eb1be25b41de9afc68e23}{\_initialize\_detections}}()}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01004}01004\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01005}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_aba7939ecc6a57d4b901b31064674d753}{01005}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_aba7939ecc6a57d4b901b31064674d753}{add\_single\_ground\_truth\_image\_info}}(self,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01006}01006\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ image\_key,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01007}01007\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_boxes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01008}01008\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_class\_labels,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01009}01009\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_is\_difficult\_list=None,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01010}01010\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_is\_group\_of\_list=None,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01011}01011\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_masks=None):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01012}01012\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Adds\ groundtruth\ for\ a\ single\ image\ to\ be\ used\ for\ evaluation.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01013}01013\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01014}01014\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01015}01015\ \textcolor{stringliteral}{\ \ \ \ \ \ image\_key:\ A\ unique\ string/integer\ identifier\ }\textcolor{keywordflow}{for}\ the\ image.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01016}01016\ \ \ \ \ \ \ groundtruth\_boxes:\ float32\ numpy\ array\ of\ shape\ [num\_boxes,\ 4]\ containing}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01017}01017\ \ \ \ \ \ \ \ \ \`{}num\_boxes\`{}\ groundtruth\ boxes\ of\ the\ format\ [ymin,\ xmin,\ ymax,\ xmax]\ \textcolor{keywordflow}{in}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01018}01018\ \ \ \ \ \ \ \ \ absolute\ image\ coordinates.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01019}01019\ \ \ \ \ \ \ groundtruth\_class\_labels:\ integer\ numpy\ array\ of\ shape\ [num\_boxes]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01020}01020\ \ \ \ \ \ \ \ \ containing\ 0-\/indexed\ groundtruth\ classes\ \textcolor{keywordflow}{for}\ the\ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01021}01021\ \ \ \ \ \ \ groundtruth\_is\_difficult\_list:\ A\ length\ M\ numpy\ boolean\ array\ denoting}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01022}01022\ \ \ \ \ \ \ \ \ whether\ a\ ground\ truth\ box\ \textcolor{keywordflow}{is}\ a\ difficult\ instance\ \textcolor{keywordflow}{or}\ \textcolor{keywordflow}{not}.\ To\ support}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01023}01023\ \ \ \ \ \ \ \ \ the\ case\ that\ no\ boxes\ are\ difficult,\ it\ \textcolor{keywordflow}{is}\ by\ default\ set\ \textcolor{keyword}{as}\ \textcolor{keywordtype}{None}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01024}01024\ \ \ \ \ \ \ groundtruth\_is\_group\_of\_list:\ A\ length\ M\ numpy\ boolean\ array\ denoting}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01025}01025\ \ \ \ \ \ \ \ \ whether\ a\ ground\ truth\ box\ \textcolor{keywordflow}{is}\ a\ group-\/of\ box\ \textcolor{keywordflow}{or}\ \textcolor{keywordflow}{not}.\ To\ support\ the\ case}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01026}01026\ \ \ \ \ \ \ \ \ that\ no\ boxes\ are\ groups-\/of,\ it\ \textcolor{keywordflow}{is}\ by\ default\ set\ \textcolor{keyword}{as}\ \textcolor{keywordtype}{None}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01027}01027\ \ \ \ \ \ \ groundtruth\_masks:\ uint8\ numpy\ array\ of\ shape\ [num\_boxes,\ height,\ width]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01028}01028\ \ \ \ \ \ \ \ \ containing\ \`{}num\_boxes\`{}\ groundtruth\ masks.\ The\ mask\ values\ range\ \textcolor{keyword}{from}\ 0}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01029}01029\ \ \ \ \ \ \ \ \ to\ 1.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01030}01030\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01031}01031\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{if}\ image\_key\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae31fb35008e74625873644abb8b27dad}{groundtruth\_boxes}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01032}01032\ \ \ \ \ \ \ logging.warning(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01033}01033\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'image\ \%s\ has\ already\ been\ added\ to\ the\ ground\ truth\ database.'},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01034}01034\ \ \ \ \ \ \ \ \ \ \ image\_key)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01035}01035\ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01036}01036\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01037}01037\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae31fb35008e74625873644abb8b27dad}{groundtruth\_boxes}}[image\_key]\ =\ groundtruth\_boxes}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01038}01038\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ab82a6fb16d6502c75c75bc8ed6ae101c}{groundtruth\_class\_labels}}[image\_key]\ =\ groundtruth\_class\_labels}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01039}01039\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_aef5866c1fd149f404170d7defb24976b}{groundtruth\_masks}}[image\_key]\ =\ groundtruth\_masks}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01040}01040\ \ \ \ \ \textcolor{keywordflow}{if}\ groundtruth\_is\_difficult\_list\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01041}01041\ \ \ \ \ \ \ num\_boxes\ =\ groundtruth\_boxes.shape[0]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01042}01042\ \ \ \ \ \ \ groundtruth\_is\_difficult\_list\ =\ np.zeros(num\_boxes,\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01043}01043\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a8152458f4e1ec45848c88d342da65bbe}{groundtruth\_is\_difficult\_list}}[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01044}01044\ \ \ \ \ \ \ \ \ image\_key]\ =\ groundtruth\_is\_difficult\_list.astype(dtype=bool)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01045}01045\ \ \ \ \ \textcolor{keywordflow}{if}\ groundtruth\_is\_group\_of\_list\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01046}01046\ \ \ \ \ \ \ num\_boxes\ =\ groundtruth\_boxes.shape[0]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01047}01047\ \ \ \ \ \ \ groundtruth\_is\_group\_of\_list\ =\ np.zeros(num\_boxes,\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01048}01048\ \ \ \ \ \textcolor{keywordflow}{if}\ groundtruth\_masks\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01049}01049\ \ \ \ \ \ \ num\_boxes\ =\ groundtruth\_boxes.shape[0]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01050}01050\ \ \ \ \ \ \ mask\_presence\_indicator\ =\ np.zeros(num\_boxes,\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01051}01051\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01052}01052\ \ \ \ \ \ \ mask\_presence\_indicator\ =\ (np.sum(groundtruth\_masks,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01053}01053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ axis=(1,\ 2))\ ==\ 0).astype(dtype=bool)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01054}01054\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01055}01055\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a7b4e5a4ae04cf35ece51a2f65981c853}{groundtruth\_is\_group\_of\_list}}[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01056}01056\ \ \ \ \ \ \ \ \ image\_key]\ =\ groundtruth\_is\_group\_of\_list.astype(dtype=bool)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01057}01057\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01058}01058\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_adbf729b818b086fd36580c1a150c62ef}{\_update\_ground\_truth\_statistics}}(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01059}01059\ \ \ \ \ \ \ \ \ groundtruth\_class\_labels,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01060}01060\ \ \ \ \ \ \ \ \ groundtruth\_is\_difficult\_list.astype(dtype=bool)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01061}01061\ \ \ \ \ \ \ \ \ |\ mask\_presence\_indicator,\ \ \textcolor{comment}{\#\ ignore\ boxes\ without\ masks}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01062}01062\ \ \ \ \ \ \ \ \ groundtruth\_is\_group\_of\_list.astype(dtype=bool))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01063}01063\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01064}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a429dcf24cfb9c737ac3849510e0dbbff}{01064}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a429dcf24cfb9c737ac3849510e0dbbff}{add\_single\_detected\_image\_info}}(self,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01065}01065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ image\_key,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01066}01066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ detected\_boxes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01067}01067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ detected\_scores,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01068}01068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ detected\_class\_labels,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01069}01069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ detected\_masks=None):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01070}01070\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Adds\ detections\ for\ a\ single\ image\ to\ be\ used\ for\ evaluation.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01071}01071\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01072}01072\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01073}01073\ \textcolor{stringliteral}{\ \ \ \ \ \ image\_key:\ A\ unique\ string/integer\ identifier\ }\textcolor{keywordflow}{for}\ the\ image.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01074}01074\ \ \ \ \ \ \ detected\_boxes:\ float32\ numpy\ array\ of\ shape\ [num\_boxes,\ 4]\ containing}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01075}01075\ \ \ \ \ \ \ \ \ \`{}num\_boxes\`{}\ detection\ boxes\ of\ the\ format\ [ymin,\ xmin,\ ymax,\ xmax]\ \textcolor{keywordflow}{in}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01076}01076\ \ \ \ \ \ \ \ \ absolute\ image\ coordinates.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01077}01077\ \ \ \ \ \ \ detected\_scores:\ float32\ numpy\ array\ of\ shape\ [num\_boxes]\ containing}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01078}01078\ \ \ \ \ \ \ \ \ detection\ scores\ \textcolor{keywordflow}{for}\ the\ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01079}01079\ \ \ \ \ \ \ detected\_class\_labels:\ integer\ numpy\ array\ of\ shape\ [num\_boxes]\ containing}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01080}01080\ \ \ \ \ \ \ \ \ 0-\/indexed\ detection\ classes\ \textcolor{keywordflow}{for}\ the\ boxes.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01081}01081\ \ \ \ \ \ \ detected\_masks:\ np.uint8\ numpy\ array\ of\ shape\ [num\_boxes,\ height,\ width]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01082}01082\ \ \ \ \ \ \ \ \ containing\ \`{}num\_boxes\`{}\ detection\ masks\ \textcolor{keyword}{with}\ values\ ranging\ between\ 0\ \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01083}01083\ \ \ \ \ \ \ \ \ 1.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01084}01084\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01085}01085\ \ \ \ \ Raises:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01086}01086\ \ \ \ \ \ \ ValueError:\ \textcolor{keywordflow}{if}\ the\ number\ of\ boxes,\ scores\ \textcolor{keywordflow}{and}\ \textcolor{keyword}{class\ }labels\ differ\ in}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01087}01087\ \ \ \ \ \ \ \ \ length.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01088}01088\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01089}01089\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{if}\ (len(detected\_boxes)\ !=\ len(detected\_scores)\ \textcolor{keywordflow}{or}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01090}01090\ \ \ \ \ \ \ \ \ len(detected\_boxes)\ !=\ len(detected\_class\_labels)):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01091}01091\ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ValueError(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01092}01092\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'detected\_boxes,\ detected\_scores\ and\ '}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01093}01093\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'detected\_class\_labels\ should\ all\ have\ same\ lengths.\ Got'}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01094}01094\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'[\%d,\ \%d,\ \%d]'}\ \%\ len(detected\_boxes),\ len(detected\_scores),}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01095}01095\ \ \ \ \ \ \ \ \ \ \ len(detected\_class\_labels))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01096}01096\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01097}01097\ \ \ \ \ \textcolor{keywordflow}{if}\ image\_key\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a34811b48d26700ef3abff14998cdf1d5}{detection\_keys}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01098}01098\ \ \ \ \ \ \ logging.warning(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01099}01099\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'image\ \%s\ has\ already\ been\ added\ to\ the\ detection\ result\ database'},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01100}01100\ \ \ \ \ \ \ \ \ \ \ image\_key)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01101}01101\ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01102}01102\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01103}01103\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a34811b48d26700ef3abff14998cdf1d5}{detection\_keys}}.add(image\_key)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01104}01104\ \ \ \ \ \textcolor{keywordflow}{if}\ image\_key\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae31fb35008e74625873644abb8b27dad}{groundtruth\_boxes}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01105}01105\ \ \ \ \ \ \ groundtruth\_boxes\ =\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae31fb35008e74625873644abb8b27dad}{groundtruth\_boxes}}[image\_key]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01106}01106\ \ \ \ \ \ \ groundtruth\_class\_labels\ =\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ab82a6fb16d6502c75c75bc8ed6ae101c}{groundtruth\_class\_labels}}[image\_key]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01107}01107\ \ \ \ \ \ \ \textcolor{comment}{\#\ Masks\ are\ popped\ instead\ of\ look\ up.\ The\ reason\ is\ that\ we\ do\ not\ want}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01108}01108\ \ \ \ \ \ \ \textcolor{comment}{\#\ to\ keep\ all\ masks\ in\ memory\ which\ can\ cause\ memory\ overflow.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01109}01109\ \ \ \ \ \ \ groundtruth\_masks\ =\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_aef5866c1fd149f404170d7defb24976b}{groundtruth\_masks}}.pop(image\_key)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01110}01110\ \ \ \ \ \ \ groundtruth\_is\_difficult\_list\ =\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a8152458f4e1ec45848c88d342da65bbe}{groundtruth\_is\_difficult\_list}}[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01111}01111\ \ \ \ \ \ \ \ \ \ \ image\_key]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01112}01112\ \ \ \ \ \ \ groundtruth\_is\_group\_of\_list\ =\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a7b4e5a4ae04cf35ece51a2f65981c853}{groundtruth\_is\_group\_of\_list}}[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01113}01113\ \ \ \ \ \ \ \ \ \ \ image\_key]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01114}01114\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01115}01115\ \ \ \ \ \ \ groundtruth\_boxes\ =\ np.empty(shape=[0,\ 4],\ dtype=float)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01116}01116\ \ \ \ \ \ \ groundtruth\_class\_labels\ =\ np.array([],\ dtype=int)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01117}01117\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ detected\_masks\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01118}01118\ \ \ \ \ \ \ \ \ groundtruth\_masks\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01119}01119\ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01120}01120\ \ \ \ \ \ \ \ \ groundtruth\_masks\ =\ np.empty(shape=[0,\ 1,\ 1],\ dtype=float)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01121}01121\ \ \ \ \ \ \ groundtruth\_is\_difficult\_list\ =\ np.array([],\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01122}01122\ \ \ \ \ \ \ groundtruth\_is\_group\_of\_list\ =\ np.array([],\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01123}01123\ \ \ \ \ scores,\ tp\_fp\_labels,\ is\_class\_correctly\_detected\_in\_image\ =\ (}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01124}01124\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a31750b020898748bb46dd161883308c9}{per\_image\_eval}}.compute\_object\_detection\_metrics(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01125}01125\ \ \ \ \ \ \ \ \ \ \ \ \ detected\_boxes=detected\_boxes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01126}01126\ \ \ \ \ \ \ \ \ \ \ \ \ detected\_scores=detected\_scores,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01127}01127\ \ \ \ \ \ \ \ \ \ \ \ \ detected\_class\_labels=detected\_class\_labels,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01128}01128\ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_boxes=groundtruth\_boxes,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01129}01129\ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_class\_labels=groundtruth\_class\_labels,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01130}01130\ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_is\_difficult\_list=groundtruth\_is\_difficult\_list,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01131}01131\ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_is\_group\_of\_list=groundtruth\_is\_group\_of\_list,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01132}01132\ \ \ \ \ \ \ \ \ \ \ \ \ detected\_masks=detected\_masks,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01133}01133\ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_masks=groundtruth\_masks))}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01134}01134\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01135}01135\ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{num\_class}}):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01136}01136\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ scores[i].shape[0]\ >\ 0:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01137}01137\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a294b59aab3cc6d401a48310af2b6ba3f}{scores\_per\_class}}[i].append(scores[i])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01138}01138\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_acc1a9ccb5e4a706f369e094a699f99c8}{tp\_fp\_labels\_per\_class}}[i].append(tp\_fp\_labels[i])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01139}01139\ \ \ \ \ (self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a6f6ed78087058b667307f3904dfa670f}{num\_images\_correctly\_detected\_per\_class}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01140}01140\ \ \ \ \ )\ +=\ is\_class\_correctly\_detected\_in\_image}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01141}01141\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01142}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_adbf729b818b086fd36580c1a150c62ef}{01142}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_adbf729b818b086fd36580c1a150c62ef}{\_update\_ground\_truth\_statistics}}(self,\ groundtruth\_class\_labels,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01143}01143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_is\_difficult\_list,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01144}01144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_is\_group\_of\_list):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01145}01145\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Update\ grouth\ truth\ statitistics.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01146}01146\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01147}01147\ \textcolor{stringliteral}{\ \ \ \ 1.\ Difficult\ boxes\ are\ ignored\ when\ counting\ the\ number\ of\ ground\ truth}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01148}01148\ \textcolor{stringliteral}{\ \ \ \ instances\ }\textcolor{keyword}{as}\ done\ \textcolor{keywordflow}{in}\ Pascal\ VOC\ devkit.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01149}01149\ \ \ \ \ 2.\ Difficult\ boxes\ are\ treated\ \textcolor{keyword}{as}\ normal\ boxes\ when\ computing\ CorLoc\ related}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01150}01150\ \ \ \ \ statitistics.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01151}01151\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01152}01152\ \ \ \ \ Args:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01153}01153\ \ \ \ \ \ \ groundtruth\_class\_labels:\ An\ integer\ numpy\ array\ of\ length\ M,\ representing}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01154}01154\ \ \ \ \ \ \ \ \ M\ \textcolor{keyword}{class\ }labels\ of\ object\ instances\ in\ ground\ truth}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01155}01155\ \ \ \ \ \ \ groundtruth\_is\_difficult\_list:\ A\ boolean\ numpy\ array\ of\ length\ M\ denoting}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01156}01156\ \ \ \ \ \ \ \ \ whether\ a\ ground\ truth\ box\ \textcolor{keywordflow}{is}\ a\ difficult\ instance\ \textcolor{keywordflow}{or}\ \textcolor{keywordflow}{not}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01157}01157\ \ \ \ \ \ \ groundtruth\_is\_group\_of\_list:\ A\ boolean\ numpy\ array\ of\ length\ M\ denoting}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01158}01158\ \ \ \ \ \ \ \ \ whether\ a\ ground\ truth\ box\ \textcolor{keywordflow}{is}\ a\ group-\/of\ box\ \textcolor{keywordflow}{or}\ \textcolor{keywordflow}{not}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01159}01159\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01160}01160\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{for}\ class\_index\ \textcolor{keywordflow}{in}\ range(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{num\_class}}):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01161}01161\ \ \ \ \ \ \ num\_gt\_instances\ =\ np.sum(groundtruth\_class\_labels[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01162}01162\ \ \ \ \ \ \ \ \ \ \ \string~groundtruth\_is\_difficult\_list}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01163}01163\ \ \ \ \ \ \ \ \ \ \ \&\ \string~groundtruth\_is\_group\_of\_list]\ ==\ class\_index)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01164}01164\ \ \ \ \ \ \ num\_groupof\_gt\_instances\ =\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a9cdda8fae5a45af869c3f5ecca3993dc}{group\_of\_weight}}\ *\ np.sum(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01165}01165\ \ \ \ \ \ \ \ \ \ \ groundtruth\_class\_labels[groundtruth\_is\_group\_of\_list}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01166}01166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\ \string~groundtruth\_is\_difficult\_list]\ ==}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01167}01167\ \ \ \ \ \ \ \ \ \ \ class\_index)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01168}01168\ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a47145cfb0b6759490437770e0ee85937}{num\_gt\_instances\_per\_class}}[}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01169}01169\ \ \ \ \ \ \ \ \ \ \ class\_index]\ +=\ num\_gt\_instances\ +\ num\_groupof\_gt\_instances}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01170}01170\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ np.any(groundtruth\_class\_labels\ ==\ class\_index):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01171}01171\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a000bf16f3c78ff41810e0fa54d830160}{num\_gt\_imgs\_per\_class}}[class\_index]\ +=\ 1}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01172}01172\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01173}\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a2fadc16e83d1bcd28f48399942d6ef19}{01173}}\ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a2fadc16e83d1bcd28f48399942d6ef19}{evaluate}}(self):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01174}01174\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Compute\ evaluation\ result.}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01175}01175\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01176}01176\ \textcolor{stringliteral}{\ \ \ \ Returns:}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01177}01177\ \textcolor{stringliteral}{\ \ \ \ \ \ A\ named\ tuple\ }\textcolor{keyword}{with}\ the\ following\ fields\ -\/}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01178}01178\ \ \ \ \ \ \ \ \ average\_precision:\ float\ numpy\ array\ of\ average\ precision\ \textcolor{keywordflow}{for}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01179}01179\ \ \ \ \ \ \ \ \ \ \ \ \ each\ \textcolor{keyword}{class}.}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01180}01180\ \ \ \ \ \ \ \ \ mean\_ap:\ mean\ average\ precision\ of\ all\ classes,\ float\ scalar}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01181}01181\ \ \ \ \ \ \ \ \ precisions:\ List\ of\ precisions,\ each\ precision\ \textcolor{keywordflow}{is}\ a\ float\ numpy}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01182}01182\ \ \ \ \ \ \ \ \ \ \ \ \ array}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01183}01183\ \ \ \ \ \ \ \ \ recalls:\ List\ of\ recalls,\ each\ recall\ \textcolor{keywordflow}{is}\ a\ float\ numpy\ array}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01184}01184\ \ \ \ \ \ \ \ \ corloc:\ numpy\ float\ array}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01185}01185\ \ \ \ \ \ \ \ \ mean\_corloc:\ Mean\ CorLoc\ score\ \textcolor{keywordflow}{for}\ each\ \textcolor{keyword}{class},\ float\ scalar}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01186}01186\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01187}01187\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{if}\ (self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a47145cfb0b6759490437770e0ee85937}{num\_gt\_instances\_per\_class}}\ ==\ 0).any():}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01188}01188\ \ \ \ \ \ \ logging.warning(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01189}01189\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'The\ following\ classes\ have\ no\ ground\ truth\ examples:\ \%s'},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01190}01190\ \ \ \ \ \ \ \ \ \ \ np.squeeze(np.argwhere(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a47145cfb0b6759490437770e0ee85937}{num\_gt\_instances\_per\_class}}\ ==\ 0))\ +}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01191}01191\ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a4d1d60abab9aadf6261dd4bab9b85dba}{label\_id\_offset}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01192}01192\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01193}01193\ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a7b1d1ed97b592fcc8507508e99aaaf50}{use\_weighted\_mean\_ap}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01194}01194\ \ \ \ \ \ \ all\_scores\ =\ np.array([],\ dtype=float)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01195}01195\ \ \ \ \ \ \ all\_tp\_fp\_labels\ =\ np.array([],\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01196}01196\ \ \ \ \ \textcolor{keywordflow}{for}\ class\_index\ \textcolor{keywordflow}{in}\ range(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ae63c421e529a7ac863e25b2c2d1c4980}{num\_class}}):}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01197}01197\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a47145cfb0b6759490437770e0ee85937}{num\_gt\_instances\_per\_class}}[class\_index]\ ==\ 0:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01198}01198\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01199}01199\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a294b59aab3cc6d401a48310af2b6ba3f}{scores\_per\_class}}[class\_index]:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01200}01200\ \ \ \ \ \ \ \ \ scores\ =\ np.array([],\ dtype=float)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01201}01201\ \ \ \ \ \ \ \ \ tp\_fp\_labels\ =\ np.array([],\ dtype=float)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01202}01202\ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01203}01203\ \ \ \ \ \ \ \ \ scores\ =\ np.concatenate(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a294b59aab3cc6d401a48310af2b6ba3f}{scores\_per\_class}}[class\_index])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01204}01204\ \ \ \ \ \ \ \ \ tp\_fp\_labels\ =\ np.concatenate(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_acc1a9ccb5e4a706f369e094a699f99c8}{tp\_fp\_labels\_per\_class}}[class\_index])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01205}01205\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a7b1d1ed97b592fcc8507508e99aaaf50}{use\_weighted\_mean\_ap}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01206}01206\ \ \ \ \ \ \ \ \ all\_scores\ =\ np.append(all\_scores,\ scores)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01207}01207\ \ \ \ \ \ \ \ \ all\_tp\_fp\_labels\ =\ np.append(all\_tp\_fp\_labels,\ tp\_fp\_labels)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01208}01208\ \ \ \ \ \ \ precision,\ recall\ =\ metrics.compute\_precision\_recall(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01209}01209\ \ \ \ \ \ \ \ \ \ \ scores,\ tp\_fp\_labels,\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a47145cfb0b6759490437770e0ee85937}{num\_gt\_instances\_per\_class}}[class\_index])}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01210}01210\ \ \ \ \ \ \ recall\_within\_bound\_indices\ =\ [}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01211}01211\ \ \ \ \ \ \ \ \ \ \ index\ \textcolor{keywordflow}{for}\ index,\ value\ \textcolor{keywordflow}{in}\ enumerate(recall)\ \textcolor{keywordflow}{if}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01212}01212\ \ \ \ \ \ \ \ \ \ \ value\ >=\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_acdcd4038d030551f16bc1d38a1bec39f}{recall\_lower\_bound}}\ \textcolor{keywordflow}{and}\ value\ <=\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a0694bbdf3af6c3d15be20895fcb64798}{recall\_upper\_bound}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01213}01213\ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01214}01214\ \ \ \ \ \ \ recall\_within\_bound\ =\ recall[recall\_within\_bound\_indices]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01215}01215\ \ \ \ \ \ \ precision\_within\_bound\ =\ precision[recall\_within\_bound\_indices]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01216}01216\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01217}01217\ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a53492d7a4ec24f6e1ec6e2c5295d0de3}{precisions\_per\_class}}[class\_index]\ =\ precision\_within\_bound}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01218}01218\ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a97075d4e683fac6b4ff364b6a063acd0}{recalls\_per\_class}}[class\_index]\ =\ recall\_within\_bound}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01219}01219\ \ \ \ \ \ \ average\_precision\ =\ metrics.compute\_average\_precision(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01220}01220\ \ \ \ \ \ \ \ \ \ \ precision\_within\_bound,\ recall\_within\_bound)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01221}01221\ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a0a601d7b5f63d92167d4ed66f7a44cce}{average\_precision\_per\_class}}[class\_index]\ =\ average\_precision}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01222}01222\ \ \ \ \ \ \ logging.info(\textcolor{stringliteral}{'average\_precision:\ \%f'},\ average\_precision)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01223}01223\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01224}01224\ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ab45a7769717947988443bfc2a20d8b2f}{corloc\_per\_class}}\ =\ metrics.compute\_cor\_loc(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01225}01225\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a000bf16f3c78ff41810e0fa54d830160}{num\_gt\_imgs\_per\_class}},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01226}01226\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a6f6ed78087058b667307f3904dfa670f}{num\_images\_correctly\_detected\_per\_class}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01227}01227\ }
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01228}01228\ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a7b1d1ed97b592fcc8507508e99aaaf50}{use\_weighted\_mean\_ap}}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01229}01229\ \ \ \ \ \ \ num\_gt\_instances\ =\ np.sum(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a47145cfb0b6759490437770e0ee85937}{num\_gt\_instances\_per\_class}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01230}01230\ \ \ \ \ \ \ precision,\ recall\ =\ metrics.compute\_precision\_recall(}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01231}01231\ \ \ \ \ \ \ \ \ \ \ all\_scores,\ all\_tp\_fp\_labels,\ num\_gt\_instances)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01232}01232\ \ \ \ \ \ \ recall\_within\_bound\_indices\ =\ [}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01233}01233\ \ \ \ \ \ \ \ \ \ \ index\ \textcolor{keywordflow}{for}\ index,\ value\ \textcolor{keywordflow}{in}\ enumerate(recall)\ \textcolor{keywordflow}{if}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01234}01234\ \ \ \ \ \ \ \ \ \ \ value\ >=\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_acdcd4038d030551f16bc1d38a1bec39f}{recall\_lower\_bound}}\ \textcolor{keywordflow}{and}\ value\ <=\ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a0694bbdf3af6c3d15be20895fcb64798}{recall\_upper\_bound}}}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01235}01235\ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01236}01236\ \ \ \ \ \ \ recall\_within\_bound\ =\ recall[recall\_within\_bound\_indices]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01237}01237\ \ \ \ \ \ \ precision\_within\_bound\ =\ precision[recall\_within\_bound\_indices]}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01238}01238\ \ \ \ \ \ \ mean\_ap\ =\ metrics.compute\_average\_precision(precision\_within\_bound,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01239}01239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ recall\_within\_bound)}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01240}01240\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01241}01241\ \ \ \ \ \ \ mean\_ap\ =\ np.nanmean(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a0a601d7b5f63d92167d4ed66f7a44cce}{average\_precision\_per\_class}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01242}01242\ \ \ \ \ mean\_corloc\ =\ np.nanmean(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ab45a7769717947988443bfc2a20d8b2f}{corloc\_per\_class}})}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01243}01243\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacedetection__utils_1_1utils_1_1object__detection__evaluation_a571cbc06885aa4c0e3188603a9f9049b}{ObjectDetectionEvalMetrics}}(self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a0a601d7b5f63d92167d4ed66f7a44cce}{average\_precision\_per\_class}},\ mean\_ap,}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01244}01244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a53492d7a4ec24f6e1ec6e2c5295d0de3}{precisions\_per\_class}},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01245}01245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_a97075d4e683fac6b4ff364b6a063acd0}{recalls\_per\_class}},}
\DoxyCodeLine{\Hypertarget{object__detection__evaluation_8py_source_l01246}01246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classdetection__utils_1_1utils_1_1object__detection__evaluation_1_1_object_detection_evaluation_ab45a7769717947988443bfc2a20d8b2f}{corloc\_per\_class}},\ mean\_corloc)}

\end{DoxyCode}
