\doxysection{Object\+Detection.\+py}
\hypertarget{_object_detection_8py_source}{}\label{_object_detection_8py_source}\index{src/main/resources/processing/video/detections/object\_detection/ObjectDetection.py@{src/main/resources/processing/video/detections/object\_detection/ObjectDetection.py}}
\mbox{\hyperlink{_object_detection_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00001}\mbox{\hyperlink{namespace_object_detection}{00001}}\ \textcolor{comment}{\#!/usr/bin/env\ python}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00002}00002\ \textcolor{comment}{\#\ coding:\ utf-\/8}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00004}00004\ \textcolor{keyword}{import}\ numpy}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00005}00005\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00006}00006\ \textcolor{keyword}{import}\ six.moves.urllib\ \textcolor{keyword}{as}\ urllib}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00007}00007\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00008}00008\ \textcolor{keyword}{import}\ tarfile}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00009}00009\ \textcolor{keyword}{import}\ tensorflow.compat.v1\ \textcolor{keyword}{as}\ tensorflow}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00010}00010\ tensorflow.disable\_v2\_behavior()}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00011}00011\ \textcolor{keyword}{import}\ zipfile}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00012}00012\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00013}00013\ \textcolor{keyword}{import}\ socket}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00014}00014\ \textcolor{keyword}{import}\ time}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00015}00015\ \textcolor{keyword}{import}\ math}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00016}00016\ \textcolor{keyword}{import}\ threading}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00017}00017\ \textcolor{keyword}{import}\ argparse}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00018}00018\ \textcolor{keyword}{from}\ multiprocessing\ \textcolor{keyword}{import}\ Process}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00019}00019\ \textcolor{keyword}{from}\ collections\ \textcolor{keyword}{import}\ defaultdict}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00020}00020\ \textcolor{keyword}{from}\ io\ \textcolor{keyword}{import}\ StringIO}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00021}00021\ \textcolor{keyword}{from}\ matplotlib\ \textcolor{keyword}{import}\ pyplot\ \textcolor{keyword}{as}\ plt}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00022}00022\ \textcolor{keyword}{from}\ PIL\ \textcolor{keyword}{import}\ Image}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00024}00024\ \textcolor{keyword}{import}\ label\_map\_util}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00026}00026\ \textcolor{keyword}{import}\ logging;}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00027}00027\ logging.disable(logging.INFO);}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00028}00028\ logging.disable(logging.DEBUG);}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00029}00029\ \textcolor{comment}{\#logging.disable(logging.CRITICAL);}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00030}00030\ logging.disable(logging.WARNING);}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00031}00031\ \textcolor{comment}{\#logging.disable(logging.ERROR);}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00033}00033\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00034}00034\ os.environ[\textcolor{stringliteral}{'TF\_CPP\_MIN\_LOG\_LEVEL'}]\ =\ \textcolor{stringliteral}{'2'}\ \ \textcolor{comment}{\#\ or\ any\ \{'0',\ '1',\ '2'\}}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00035}00035\ \textcolor{keyword}{import}\ tensorflow\ \textcolor{keyword}{as}\ tf}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00036}00036\ \ \ \textcolor{comment}{\#Level\ |\ Level\ for\ Humans\ |\ Level\ Description\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00037}00037\ \ \textcolor{comment}{\#-\/-\/-\/-\/-\/-\/-\/|-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/|-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ }}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00038}00038\ \ \ \textcolor{comment}{\#0\ \ \ \ \ |\ DEBUG\ \ \ \ \ \ \ \ \ \ \ \ |\ [Default]\ Print\ all\ messages\ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00039}00039\ \ \ \textcolor{comment}{\#1\ \ \ \ \ |\ INFO\ \ \ \ \ \ \ \ \ \ \ \ \ |\ Filter\ out\ INFO\ messages\ \ \ \ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00040}00040\ \ \ \textcolor{comment}{\#2\ \ \ \ \ |\ WARNING\ \ \ \ \ \ \ \ \ \ |\ Filter\ out\ INFO\ \&\ WARNING\ messages\ }}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00041}00041\ \ \ \textcolor{comment}{\#3\ \ \ \ \ |\ ERROR\ \ \ \ \ \ \ \ \ \ \ \ |\ Filter\ out\ all\ messages\ \ \ }}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00043}00043\ \textcolor{comment}{\#For\ Java\ caller}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00044}\mbox{\hyperlink{namespace_object_detection_a29c082981c6d6252bc750f69c6d65935}{00044}}\ CURRENT\_PYTHON\_PATH=os.getcwd()\ +\ \textcolor{stringliteral}{"{}/src/main/resources"{}}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00045}\mbox{\hyperlink{namespace_object_detection_a4d07142c75f1136e41a38ed0fe30f3ac}{00045}}\ EXTRACTION\_TO\_INTEGRATION\_PATH\ =\ CURRENT\_PYTHON\_PATH\ +\ \textcolor{stringliteral}{'/processing/video/detections/'}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00046}\mbox{\hyperlink{namespace_object_detection_a87b1fa1ccd0016fae05b333d239e12e0}{00046}}\ SPECIFIC\_PATH=EXTRACTION\_TO\_INTEGRATION\_PATH\ +\ \textcolor{stringliteral}{'/object\_detection/trainedModelAndLabels/'}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00048}00048\ \textcolor{comment}{\#required\ model\ and\ the\ frozen\ inference\ graph\ generated\ by\ Tensorflow\ }}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00049}00049\ \textcolor{comment}{\#\ What\ model\ to\ download.}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00050}\mbox{\hyperlink{namespace_object_detection_a6f7712e278eb8c20a3f6c24994c785f9}{00050}}\ MODEL\_PATH\ =\ SPECIFIC\_PATH\ +\ \textcolor{stringliteral}{'ssd\_mobilenet\_v1\_coco\_2017\_11\_17'}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00052}00052\ \textcolor{comment}{\#\ Path\ to\ frozen\ detection\ graph.\ This\ is\ the\ actual\ model\ that\ is\ used\ for\ the\ object\ detection.}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00053}\mbox{\hyperlink{namespace_object_detection_a9d085fdb97f9cc8c2ea985d11cc5c0c8}{00053}}\ PATH\_TO\_FROZEN\_GRAPH\ =\ MODEL\_PATH\ +\ \textcolor{stringliteral}{'/frozen\_inference\_graph.pb'}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00055}00055\ \textcolor{comment}{\#\ List\ of\ the\ strings\ that\ is\ used\ to\ add\ correct\ label\ for\ each\ box.}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00056}00056\ \textcolor{comment}{\#PATH\_TO\_LABELS\ =\ os.path.join('data',\ SPECIFIC\_PATH\ +\ 'data/mscoco\_label\_map.pbtxt')}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00057}\mbox{\hyperlink{namespace_object_detection_aca258e2762d072fb1078df5d1831a11e}{00057}}\ PATH\_TO\_LABELS\ =\ SPECIFIC\_PATH\ +\ \textcolor{stringliteral}{'mscoco\_label\_map.pbtxt'}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00059}00059\ \textcolor{comment}{\#\ Size,\ in\ inches,\ of\ the\ output\ images.}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00060}\mbox{\hyperlink{namespace_object_detection_a66dc0d926c6e707ff476a026765ff4f3}{00060}}\ IMAGE\_SIZE\ =\ (12,\ 8)}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00061}00061\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00062}\mbox{\hyperlink{namespace_object_detection_a0f1c660343663eb79c8029870a71524f}{00062}}\ INTEGRATION\_NETWORK\_ADRESS\ =\ \textcolor{stringliteral}{'127.0.0.1'}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00063}\mbox{\hyperlink{namespace_object_detection_aae51c7889f494aab5ebe4a524a186b40}{00063}}\ INTEGRATION\_NETWORK\_PORT\ =\ 8081}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00065}00065\ \textcolor{comment}{\#load\ all\ the\ labels}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00066}\mbox{\hyperlink{namespace_object_detection_a352a4bc6a4b27876c8589862cc4ac2df}{00066}}\ category\_index\ =\ \mbox{\hyperlink{namespacelabel__map__util_a3a211e8f03cc0dc5e48be04dca5282af}{label\_map\_util.create\_category\_index\_from\_labelmap}}(PATH\_TO\_LABELS,\ use\_display\_name=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00069}\mbox{\hyperlink{namespace_object_detection_a3d3b73fa84526efa6e63917b7b6ab205}{00069}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespace_object_detection_a3d3b73fa84526efa6e63917b7b6ab205}{getFrozenGraphOfTargetedModel}}(frozenGraphPath):\ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00070}00070\ \ \ \ \ detection\_graph\ =\ tensorflow.Graph()}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00071}00071\ \ \ \ \ \textcolor{keyword}{with}\ detection\_graph.as\_default():}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00072}00072\ \ \ \ \ \ \ od\_graph\_def\ =\ tensorflow.GraphDef()\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00073}00073\ \ \ \ \ \ \ \textcolor{comment}{\#\ 'b'\ for\ right\ on\ block\ special\ file}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00074}00074\ \ \ \ \ \ \ \textcolor{comment}{\#\ special\ file\ ==>\ file\ read\ by\ a\ particular\ driver\ device}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00075}00075\ \ \ \ \ \ \ \textcolor{keyword}{with}\ tensorflow.gfile.GFile(frozenGraphPath,\ \textcolor{stringliteral}{'rb'})\ \textcolor{keyword}{as}\ fileInput:}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00076}00076\ \ \ \ \ \ \ \ \ serialized\_graph\ =\ fileInput.read()}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00077}00077\ \ \ \ \ \ \ \ \ od\_graph\_def.ParseFromString(serialized\_graph)}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ tensorflow.import\_graph\_def(od\_graph\_def,\ name=\textcolor{stringliteral}{''})}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00080}00080\ \ \ \ \ \textcolor{keywordflow}{return}\ detection\_graph}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00081}00081\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00082}\mbox{\hyperlink{namespace_object_detection_a66942b53329f98a606ec5b45dec96a52}{00082}}\ frozenGraph\ =\ \mbox{\hyperlink{namespace_object_detection_a3d3b73fa84526efa6e63917b7b6ab205}{getFrozenGraphOfTargetedModel}}(PATH\_TO\_FROZEN\_GRAPH)}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00084}00084\ \textcolor{comment}{\#run\ the\ inference\ on\ all\ the\ input\ images\ one\ by\ one}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00085}00085\ \textcolor{comment}{\#provide\ us\ the\ output\ of\ images\ in\ which\ objects\ are\ }}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00086}00086\ \textcolor{comment}{\#detected\ with\ labels\ and\ the\ percentage/score\ of\ that}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00087}00087\ \textcolor{comment}{\#object\ being\ similar\ to\ the\ training\ data.}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00088}\mbox{\hyperlink{namespace_object_detection_ace2a4ee6024a3db2e45e0bbe7f373ad2}{00088}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespace_object_detection_ace2a4ee6024a3db2e45e0bbe7f373ad2}{startDetection}}(frameToAnalyse,\ objectNameToDetectList,\ allElementIds):}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00089}00089\ \ \ \ \ print(\textcolor{stringliteral}{"{}Starting\ object\ detection..."{}})}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00090}00090\ \ \ \ \ \textcolor{comment}{\#for\ frameToAnalyse\ in\ copiedFrames:\ \ }}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00091}00091\ \ \ \ \ frameToAnalyseExpanded\ =\ numpy.expand\_dims(frameToAnalyse,\ axis=0)}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00092}00092\ \ \ \ \ \textcolor{keyword}{with}\ frozenGraph.as\_default():}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00093}00093\ \ \ \ \ \ \ \textcolor{keyword}{with}\ tensorflow.Session()\ \textcolor{keyword}{as}\ sess:}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00095}00095\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Definite\ input\ and\ output\ Tensors\ for\ detection\_graph}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00096}00096\ \ \ \ \ \ \ \ \ image\_tensor\ =\ frozenGraph.get\_tensor\_by\_name(\textcolor{stringliteral}{'image\_tensor:0'})}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00097}00097\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00098}00098\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Each\ box\ represents\ a\ part\ of\ the\ image\ where\ a\ particular\ object\ was\ detected.}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00099}00099\ \ \ \ \ \ \ \ \ detection\_boxes\ =\ frozenGraph.get\_tensor\_by\_name(\textcolor{stringliteral}{'detection\_boxes:0'})}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00100}00100\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00101}00101\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Each\ score\ represent\ how\ level\ of\ confidence\ for\ each\ of\ the\ objects.}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00102}00102\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Score\ is\ shown\ on\ the\ result\ image,\ together\ with\ the\ class\ label.}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00103}00103\ \ \ \ \ \ \ \ \ detection\_scores\ =\ frozenGraph.get\_tensor\_by\_name(\textcolor{stringliteral}{'detection\_scores:0'})}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00104}00104\ \ \ \ \ \ \ \ \ detection\_classes\ =\ frozenGraph.get\_tensor\_by\_name(\textcolor{stringliteral}{'detection\_classes:0'})}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00105}00105\ \ \ \ \ \ \ \ \ num\_detections\ =\ frozenGraph.get\_tensor\_by\_name(\textcolor{stringliteral}{'num\_detections:0'})}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00106}00106\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00107}00107\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Actual\ detection.}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00108}00108\ \ \ \ \ \ \ \ \ (boxes,\ scores,\ classes,\ nums)\ =\ sess.run(}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00109}00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [detection\_boxes,\ detection\_scores,\ detection\_classes,\ num\_detections],}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00110}00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ feed\_dict=\{image\_tensor:\ frameToAnalyseExpanded\})}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00111}00111\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00112}00112\ \ \ \ \ counter=0}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00113}00113\ \ \ \ \ vehiculesToDetectList\ =\ []}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00114}00114\ \ \ \ \ isMotorizedVehiculeDetection\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00115}00115\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{"{}vehicules"{}}\ \textcolor{keywordflow}{in}\ objectNameToDetectList:}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00116}00116\ \ \ \ \ \ \ \ \ vehiculesToDetectList.append(\textcolor{stringliteral}{"{}bus"{}})}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00117}00117\ \ \ \ \ \ \ \ \ vehiculesToDetectList.append(\textcolor{stringliteral}{"{}truck"{}})}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00118}00118\ \ \ \ \ \ \ \ \ vehiculesToDetectList.append(\textcolor{stringliteral}{"{}car"{}})}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00119}00119\ \ \ \ \ \ \ \ \ vehiculesToDetectList.append(\textcolor{stringliteral}{"{}motorcycle"{}})}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00120}00120\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00121}00121\ \ \ \ \ \textcolor{keywordflow}{for}\ index,value\ \textcolor{keywordflow}{in}\ enumerate(classes[0]):}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00122}00122\ \ \ \ \ \ \ \ \ categoryName\ =\ category\_index.get(value)[\textcolor{stringliteral}{'name'}]}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00123}00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ scores[0,index]\ >\ 0.5\ \textcolor{keywordflow}{and}\ (categoryName\ \textcolor{keywordflow}{in}\ objectNameToDetectList\ \textcolor{keywordflow}{or}\ categoryName\ \textcolor{keywordflow}{in}\ vehiculesToDetectList):}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00124}00124\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ categoryName\ \textcolor{keywordflow}{in}\ vehiculesToDetectList:}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00125}00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ isMotorizedVehiculeDetection\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \ \ \ counter\ =\ counter+1}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00127}00127\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00128}00128\ \ \ \ \ \textcolor{keywordflow}{if}\ counter\ !=\ 0:}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00129}00129\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ isMotorizedVehiculeDetection:}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}[INFO]\ Detected\ vehicule\ number\ :\ "{}}\ +\ str(counter))}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00131}00131\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#logging.info("{}[INFO]\ Detected\ vehicule\ number\ :\ "{}\ +\ str(counter))}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ label\_crit\_value\ =\ [allElementIds[objectNameToDetectList.index(\textcolor{stringliteral}{"{}vehicules"{}})],\ \textcolor{stringliteral}{"{}vehicules"{}},\ str(counter)]}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00133}00133\ \ \ \ \ \ \ \ \ \ \ \ \ isMotorizedVehiculeDetection\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00134}00134\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}[INFO]\ Detected\ person\ number\ :\ "{}}\ +\ str(counter))}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#logging.info("{}[INFO]\ Detected\ person\ number\ :\ "{}\ +\ str(counter))}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00137}00137\ \ \ \ \ \ \ \ \ \ \ \ \ label\_crit\_value\ =\ [allElementIds[objectNameToDetectList.index(categoryName)],\ categoryName,\ str(counter)]}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00138}00138\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#label\_crit\_value\ =\ [elementId,\ objectNameToDetectList[0],\ str(counter)]}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00139}00139\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00140}00140\ \ \ \ \ \ \ \ \ label\_crit\_value\_string\ =\ \textcolor{stringliteral}{','}.join(label\_crit\_value)}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00141}00141\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00142}00142\ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}HERE\ -\/-\/\ "{}}\ +\ label\_crit\_value\_string)}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00144}00144\ \ \ \ \ \ \ \ \ our\_socket\ =\ socket.socket(socket.AF\_INET,\ socket.SOCK\_STREAM)}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00145}00145\ \ \ \ \ \ \ \ \ our\_socket.connect(\ (INTEGRATION\_NETWORK\_ADRESS,\ INTEGRATION\_NETWORK\_PORT)\ )\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00146}00146\ \ \ \ \ \ \ \ \ msg\ =\ label\_crit\_value\_string\ +\ \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00147}00147\ \ \ \ \ \ \ \ \ our\_socket.send(msg.encode(\textcolor{stringliteral}{'utf8'}))}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00148}00148\ \ \ \ \ \ \ \ \ our\_socket.close()}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00149}00149\ \ \ \ \ \textcolor{keywordflow}{else}\ :}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00150}00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ objectToDetect\ \textcolor{keywordflow}{in}\ objectNameToDetectList\ :}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00151}00151\ \ \ \ \ \ \ \ \ \ \ \ \ higher\_proba\_label\_crit\_value\ =\ [allElementIds[objectNameToDetectList.index(categoryName)],\ categoryName,\ \textcolor{stringliteral}{"{}0"{}}]\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ higher\_proba\_label\_crit\_value\_string\ =\ \textcolor{stringliteral}{','}.join(higher\_proba\_label\_crit\_value)\ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ print(higher\_proba\_label\_crit\_value\_string)\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ our\_socket\ =\ socket.socket(socket.AF\_INET,\ socket.SOCK\_STREAM)}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ our\_socket.connect(\ (INTEGRATION\_NETWORK\_ADRESS,\ INTEGRATION\_NETWORK\_PORT)\ )\ }
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ higher\_proba\_label\_crit\_value\_string\ +\ \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ our\_socket.send(msg.encode(\textcolor{stringliteral}{'utf8'}))}
\DoxyCodeLine{\Hypertarget{_object_detection_8py_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ our\_socket.close()}

\end{DoxyCode}
