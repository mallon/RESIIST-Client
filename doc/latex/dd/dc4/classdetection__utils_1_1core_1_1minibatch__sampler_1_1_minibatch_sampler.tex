\doxysection{detection\+\_\+utils.\+core.\+minibatch\+\_\+sampler.\+Minibatch\+Sampler Class Reference}
\hypertarget{classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler}{}\label{classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler}\index{detection\_utils.core.minibatch\_sampler.MinibatchSampler@{detection\_utils.core.minibatch\_sampler.MinibatchSampler}}


Inheritance diagram for detection\+\_\+utils.\+core.\+minibatch\+\_\+sampler.\+Minibatch\+Sampler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=305pt]{dc/de7/classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for detection\+\_\+utils.\+core.\+minibatch\+\_\+sampler.\+Minibatch\+Sampler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=301pt]{d4/d88/classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler_a0e60af5bd531feb28ad2c179b8e745a4}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self)
\item 
\mbox{\hyperlink{classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler_af62418aa0c50303f6b5f4e8f5130651f}{subsample}} (self, indicator, batch\+\_\+size, \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}params)
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler_a2c2eda2a51cf3969cfe0211ac6658ba6}{subsample\+\_\+indicator}} (indicator, num\+\_\+samples)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Abstract base class for subsampling minibatches.\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{minibatch__sampler_8py_source_l00044}{44}} of file \mbox{\hyperlink{minibatch__sampler_8py_source}{minibatch\+\_\+sampler.\+py}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler_a0e60af5bd531feb28ad2c179b8e745a4}\label{classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler_a0e60af5bd531feb28ad2c179b8e745a4} 
\index{detection\_utils.core.minibatch\_sampler.MinibatchSampler@{detection\_utils.core.minibatch\_sampler.MinibatchSampler}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!detection\_utils.core.minibatch\_sampler.MinibatchSampler@{detection\_utils.core.minibatch\_sampler.MinibatchSampler}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+core.\+minibatch\+\_\+sampler.\+Minibatch\+Sampler.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Constructs a minibatch sampler.\end{DoxyVerb}
 

Reimplemented in \mbox{\hyperlink{classdetection__utils_1_1core_1_1balanced__positive__negative__sampler_1_1_balanced_positive_negative_sampler_a4bb04705236af59e8b4938304074f35c}{detection\+\_\+utils.\+core.\+balanced\+\_\+positive\+\_\+negative\+\_\+sampler.\+Balanced\+Positive\+Negative\+Sampler}}.



Definition at line \mbox{\hyperlink{minibatch__sampler_8py_source_l00047}{47}} of file \mbox{\hyperlink{minibatch__sampler_8py_source}{minibatch\+\_\+sampler.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00047\ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self):}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Constructs\ a\ minibatch\ sampler."{}"{}"{}}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{00050\ }

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler_af62418aa0c50303f6b5f4e8f5130651f}\label{classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler_af62418aa0c50303f6b5f4e8f5130651f} 
\index{detection\_utils.core.minibatch\_sampler.MinibatchSampler@{detection\_utils.core.minibatch\_sampler.MinibatchSampler}!subsample@{subsample}}
\index{subsample@{subsample}!detection\_utils.core.minibatch\_sampler.MinibatchSampler@{detection\_utils.core.minibatch\_sampler.MinibatchSampler}}
\doxysubsubsection{\texorpdfstring{subsample()}{subsample()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+core.\+minibatch\+\_\+sampler.\+Minibatch\+Sampler.\+subsample (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{indicator,  }\item[{}]{batch\+\_\+size,  }\item[{\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{params }\end{DoxyParamCaption})}

\begin{DoxyVerb}Returns subsample of entries in indicator.

Args:
  indicator: boolean tensor of shape [N] whose True entries can be sampled.
  batch_size: desired batch size.
  **params: additional keyword arguments for specific implementations of
      the MinibatchSampler.

Returns:
  sample_indicator: boolean tensor of shape [N] whose True entries have been
  sampled. If sum(indicator) >= batch_size, sum(is_sampled) = batch_size
\end{DoxyVerb}
 

Reimplemented in \mbox{\hyperlink{classdetection__utils_1_1core_1_1balanced__positive__negative__sampler_1_1_balanced_positive_negative_sampler_a47ecd1ba4a6e9f0be57ff1b85f7a6c56}{detection\+\_\+utils.\+core.\+balanced\+\_\+positive\+\_\+negative\+\_\+sampler.\+Balanced\+Positive\+Negative\+Sampler}}.



Definition at line \mbox{\hyperlink{minibatch__sampler_8py_source_l00052}{52}} of file \mbox{\hyperlink{minibatch__sampler_8py_source}{minibatch\+\_\+sampler.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00052\ \ \ \textcolor{keyword}{def\ }subsample(self,\ indicator,\ batch\_size,\ **params):}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Returns\ subsample\ of\ entries\ in\ indicator.}}
\DoxyCodeLine{00054\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00055\ \textcolor{stringliteral}{\ \ \ \ Args:}}
\DoxyCodeLine{00056\ \textcolor{stringliteral}{\ \ \ \ \ \ indicator:\ boolean\ tensor\ of\ shape\ [N]\ whose\ }\textcolor{keyword}{True}\ entries\ can\ be\ sampled.}
\DoxyCodeLine{00057\ \ \ \ \ \ \ batch\_size:\ desired\ batch\ size.}
\DoxyCodeLine{00058\ \ \ \ \ \ \ **params:\ additional\ keyword\ arguments\ \textcolor{keywordflow}{for}\ specific\ implementations\ of}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ the\ MinibatchSampler.}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ Returns:}
\DoxyCodeLine{00062\ \ \ \ \ \ \ sample\_indicator:\ boolean\ tensor\ of\ shape\ [N]\ whose\ \textcolor{keyword}{True}\ entries\ have\ been}
\DoxyCodeLine{00063\ \ \ \ \ \ \ sampled.\ If\ sum(indicator)\ >=\ batch\_size,\ sum(is\_sampled)\ =\ batch\_size}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00065\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{pass}}
\DoxyCodeLine{00066\ }

\end{DoxyCode}
\Hypertarget{classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler_a2c2eda2a51cf3969cfe0211ac6658ba6}\label{classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler_a2c2eda2a51cf3969cfe0211ac6658ba6} 
\index{detection\_utils.core.minibatch\_sampler.MinibatchSampler@{detection\_utils.core.minibatch\_sampler.MinibatchSampler}!subsample\_indicator@{subsample\_indicator}}
\index{subsample\_indicator@{subsample\_indicator}!detection\_utils.core.minibatch\_sampler.MinibatchSampler@{detection\_utils.core.minibatch\_sampler.MinibatchSampler}}
\doxysubsubsection{\texorpdfstring{subsample\_indicator()}{subsample\_indicator()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+core.\+minibatch\+\_\+sampler.\+Minibatch\+Sampler.\+subsample\+\_\+indicator (\begin{DoxyParamCaption}\item[{}]{indicator,  }\item[{}]{num\+\_\+samples }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyVerb}Subsample indicator vector.

Given a boolean indicator vector with M elements set to `True`, the function
assigns all but `num_samples` of these previously `True` elements to
`False`. If `num_samples` is greater than M, the original indicator vector
is returned.

Args:
  indicator: a 1-dimensional boolean tensor indicating which elements
    are allowed to be sampled and which are not.
  num_samples: int32 scalar tensor

Returns:
  a boolean tensor with the same shape as input (indicator) tensor
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{minibatch__sampler_8py_source_l00068}{68}} of file \mbox{\hyperlink{minibatch__sampler_8py_source}{minibatch\+\_\+sampler.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00068\ \ \ \textcolor{keyword}{def\ }subsample\_indicator(indicator,\ num\_samples):}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Subsample\ indicator\ vector.}}
\DoxyCodeLine{00070\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00071\ \textcolor{stringliteral}{\ \ \ \ Given\ a\ boolean\ indicator\ vector\ }\textcolor{keyword}{with}\ M\ elements\ set\ to\ \`{}\textcolor{keyword}{True}\`{},\ the\ function}
\DoxyCodeLine{00072\ \ \ \ \ assigns\ all\ but\ \`{}num\_samples\`{}\ of\ these\ previously\ \`{}\textcolor{keyword}{True}\`{}\ elements\ to}
\DoxyCodeLine{00073\ \ \ \ \ \`{}\textcolor{keyword}{False}\`{}.\ If\ \`{}num\_samples\`{}\ \textcolor{keywordflow}{is}\ greater\ than\ M,\ the\ original\ indicator\ vector}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordflow}{is}\ returned.}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ Args:}
\DoxyCodeLine{00077\ \ \ \ \ \ \ indicator:\ a\ 1-\/dimensional\ boolean\ tensor\ indicating\ which\ elements}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ are\ allowed\ to\ be\ sampled\ \textcolor{keywordflow}{and}\ which\ are\ \textcolor{keywordflow}{not}.}
\DoxyCodeLine{00079\ \ \ \ \ \ \ num\_samples:\ int32\ scalar\ tensor}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ Returns:}
\DoxyCodeLine{00082\ \ \ \ \ \ \ a\ boolean\ tensor\ \textcolor{keyword}{with}\ the\ same\ shape\ \textcolor{keyword}{as}\ input\ (indicator)\ tensor}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00084\ \textcolor{stringliteral}{\ \ \ \ indices\ =\ tf.where(indicator)}}
\DoxyCodeLine{00085\ \textcolor{stringliteral}{\ \ \ \ indices\ =\ tf.random\_shuffle(indices)}}
\DoxyCodeLine{00086\ \textcolor{stringliteral}{\ \ \ \ indices\ =\ tf.reshape(indices,\ [-\/1])}}
\DoxyCodeLine{00087\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00088\ \textcolor{stringliteral}{\ \ \ \ num\_samples\ =\ tf.minimum(tf.size(indices),\ num\_samples)}}
\DoxyCodeLine{00089\ \textcolor{stringliteral}{\ \ \ \ selected\_indices\ =\ tf.slice(indices,\ [0],\ tf.reshape(num\_samples,\ [1]))}}
\DoxyCodeLine{00090\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00091\ \textcolor{stringliteral}{\ \ \ \ selected\_indicator\ =\ ops.indices\_to\_dense\_vector(selected\_indices,}}
\DoxyCodeLine{00092\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tf.shape(indicator)[0])}}
\DoxyCodeLine{00093\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00094\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keywordflow}{return}\ tf.equal(selected\_indicator,\ 1)}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dd/dc4/classdetection__utils_1_1core_1_1minibatch__sampler_1_1_minibatch_sampler_a2c2eda2a51cf3969cfe0211ac6658ba6_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/main/resources/processing/video/detections/detection\+\_\+utils/core/\mbox{\hyperlink{minibatch__sampler_8py}{minibatch\+\_\+sampler.\+py}}\end{DoxyCompactItemize}
