\doxysection{detection\+\_\+utils.\+core.\+target\+\_\+assigner\+\_\+test.\+Batch\+Target\+Assigner\+Test Class Reference}
\hypertarget{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test}{}\label{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test}\index{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest@{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest}}


Inheritance diagram for detection\+\_\+utils.\+core.\+target\+\_\+assigner\+\_\+test.\+Batch\+Target\+Assigner\+Test\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=267pt]{d1/d80/classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for detection\+\_\+utils.\+core.\+target\+\_\+assigner\+\_\+test.\+Batch\+Target\+Assigner\+Test\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=267pt]{de/d8d/classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_af53b2f294bbb21d24adec21eac9bc40c}{test\+\_\+batch\+\_\+assign\+\_\+targets}} (self)
\item 
\mbox{\hyperlink{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_a3a3d8eaa9a8bd6a229fc9177537387ab}{test\+\_\+batch\+\_\+assign\+\_\+multiclass\+\_\+targets}} (self)
\item 
\mbox{\hyperlink{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_a1d8aa65b3a914a617dd364d9400c3f3c}{test\+\_\+batch\+\_\+assign\+\_\+multiclass\+\_\+targets\+\_\+with\+\_\+padded\+\_\+groundtruth}} (self)
\item 
\mbox{\hyperlink{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_af0b5fce466f3d74f8a957d12603a9af9}{test\+\_\+batch\+\_\+assign\+\_\+multidimensional\+\_\+targets}} (self)
\item 
\mbox{\hyperlink{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_adc653771b76de6398f98054c4b798baf}{test\+\_\+batch\+\_\+assign\+\_\+empty\+\_\+groundtruth}} (self)
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_a74fb84675de06323d8490b788b4e9ae5}{\+\_\+get\+\_\+target\+\_\+assigner}} (self)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{target__assigner__test_8py_source_l00494}{494}} of file \mbox{\hyperlink{target__assigner__test_8py_source}{target\+\_\+assigner\+\_\+test.\+py}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_a74fb84675de06323d8490b788b4e9ae5}\label{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_a74fb84675de06323d8490b788b4e9ae5} 
\index{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest@{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest}!\_get\_target\_assigner@{\_get\_target\_assigner}}
\index{\_get\_target\_assigner@{\_get\_target\_assigner}!detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest@{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest}}
\doxysubsubsection{\texorpdfstring{\_get\_target\_assigner()}{\_get\_target\_assigner()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+core.\+target\+\_\+assigner\+\_\+test.\+Batch\+Target\+Assigner\+Test.\+\_\+get\+\_\+target\+\_\+assigner (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{target__assigner__test_8py_source_l00496}{496}} of file \mbox{\hyperlink{target__assigner__test_8py_source}{target\+\_\+assigner\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00496\ \ \ \textcolor{keyword}{def\ }\_get\_target\_assigner(self):}
\DoxyCodeLine{00497\ \ \ \ \ similarity\_calc\ =\ region\_similarity\_calculator.IouSimilarity()}
\DoxyCodeLine{00498\ \ \ \ \ matcher\ =\ argmax\_matcher.ArgMaxMatcher(matched\_threshold=0.5,}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unmatched\_threshold=0.5)}
\DoxyCodeLine{00500\ \ \ \ \ box\_coder\ =\ mean\_stddev\_box\_coder.MeanStddevBoxCoder(stddev=0.1)}
\DoxyCodeLine{00501\ \ \ \ \ \textcolor{keywordflow}{return}\ targetassigner.TargetAssigner(similarity\_calc,\ matcher,\ box\_coder)}
\DoxyCodeLine{00502\ }

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d99/classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_a74fb84675de06323d8490b788b4e9ae5_icgraph}
\end{center}
\end{figure}
\Hypertarget{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_adc653771b76de6398f98054c4b798baf}\label{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_adc653771b76de6398f98054c4b798baf} 
\index{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest@{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest}!test\_batch\_assign\_empty\_groundtruth@{test\_batch\_assign\_empty\_groundtruth}}
\index{test\_batch\_assign\_empty\_groundtruth@{test\_batch\_assign\_empty\_groundtruth}!detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest@{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest}}
\doxysubsubsection{\texorpdfstring{test\_batch\_assign\_empty\_groundtruth()}{test\_batch\_assign\_empty\_groundtruth()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+core.\+target\+\_\+assigner\+\_\+test.\+Batch\+Target\+Assigner\+Test.\+test\+\_\+batch\+\_\+assign\+\_\+empty\+\_\+groundtruth (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{target__assigner__test_8py_source_l00781}{781}} of file \mbox{\hyperlink{target__assigner__test_8py_source}{target\+\_\+assigner\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00781\ \ \ \textcolor{keyword}{def\ }test\_batch\_assign\_empty\_groundtruth(self):}
\DoxyCodeLine{00782\ }
\DoxyCodeLine{00783\ \ \ \ \ \textcolor{keyword}{def\ }graph\_fn(anchor\_means,\ groundtruth\_box\_corners,\ gt\_class\_targets):}
\DoxyCodeLine{00784\ \ \ \ \ \ \ groundtruth\_boxlist\ =\ box\_list.BoxList(groundtruth\_box\_corners)}
\DoxyCodeLine{00785\ \ \ \ \ \ \ gt\_box\_batch\ =\ [groundtruth\_boxlist]}
\DoxyCodeLine{00786\ \ \ \ \ \ \ gt\_class\_targets\_batch\ =\ [gt\_class\_targets]}
\DoxyCodeLine{00787\ \ \ \ \ \ \ anchors\_boxlist\ =\ box\_list.BoxList(anchor\_means)}
\DoxyCodeLine{00788\ }
\DoxyCodeLine{00789\ \ \ \ \ \ \ multiclass\_target\_assigner\ =\ self.\_get\_target\_assigner()}
\DoxyCodeLine{00790\ \ \ \ \ \ \ num\_classes\ =\ 3}
\DoxyCodeLine{00791\ \ \ \ \ \ \ unmatched\_class\_label\ =\ tf.constant([1]\ +\ num\_classes\ *\ [0],\ tf.float32)}
\DoxyCodeLine{00792\ \ \ \ \ \ \ (cls\_targets,\ cls\_weights,\ reg\_targets,\ reg\_weights,}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \_)\ =\ targetassigner.batch\_assign\_targets(}
\DoxyCodeLine{00794\ \ \ \ \ \ \ \ \ \ \ \ multiclass\_target\_assigner,\ anchors\_boxlist,}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ \ \ \ gt\_box\_batch,\ gt\_class\_targets\_batch,\ unmatched\_class\_label)}
\DoxyCodeLine{00796\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (cls\_targets,\ cls\_weights,\ reg\_targets,\ reg\_weights)}
\DoxyCodeLine{00797\ }
\DoxyCodeLine{00798\ \ \ \ \ groundtruth\_box\_corners\ =\ np.zeros((0,\ 4),\ dtype=np.float32)}
\DoxyCodeLine{00799\ \ \ \ \ anchor\_means\ =\ np.array([[0,\ 0,\ .25,\ .25],}
\DoxyCodeLine{00800\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ .25,\ 1,\ 1]],\ dtype=np.float32)}
\DoxyCodeLine{00801\ \ \ \ \ exp\_cls\_targets\ =\ [[[1,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00802\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 0,\ 0,\ 0]]]}
\DoxyCodeLine{00803\ \ \ \ \ exp\_cls\_weights\ =\ [[[1,\ 1,\ 1,\ 1],}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1,\ 1]]]}
\DoxyCodeLine{00805\ \ \ \ \ exp\_reg\_targets\ =\ [[[0,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0]]]}
\DoxyCodeLine{00807\ \ \ \ \ exp\_reg\_weights\ =\ [[0,\ 0]]}
\DoxyCodeLine{00808\ \ \ \ \ num\_classes\ =\ 3}
\DoxyCodeLine{00809\ \ \ \ \ pad\ =\ 1}
\DoxyCodeLine{00810\ \ \ \ \ gt\_class\_targets\ =\ np.zeros((0,\ num\_classes\ +\ pad),\ dtype=np.float32)}
\DoxyCodeLine{00811\ }
\DoxyCodeLine{00812\ \ \ \ \ (cls\_targets\_out,}
\DoxyCodeLine{00813\ \ \ \ \ \ cls\_weights\_out,\ reg\_targets\_out,\ reg\_weights\_out)\ =\ self.execute(}
\DoxyCodeLine{00814\ \ \ \ \ \ \ \ \ \ graph\_fn,\ [anchor\_means,\ groundtruth\_box\_corners,\ gt\_class\_targets])}
\DoxyCodeLine{00815\ \ \ \ \ self.assertAllClose(cls\_targets\_out,\ exp\_cls\_targets)}
\DoxyCodeLine{00816\ \ \ \ \ self.assertAllClose(cls\_weights\_out,\ exp\_cls\_weights)}
\DoxyCodeLine{00817\ \ \ \ \ self.assertAllClose(reg\_targets\_out,\ exp\_reg\_targets)}
\DoxyCodeLine{00818\ \ \ \ \ self.assertAllClose(reg\_weights\_out,\ exp\_reg\_weights)}
\DoxyCodeLine{00819\ }
\DoxyCodeLine{00820\ }

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d99/classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_adc653771b76de6398f98054c4b798baf_cgraph}
\end{center}
\end{figure}
\Hypertarget{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_a3a3d8eaa9a8bd6a229fc9177537387ab}\label{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_a3a3d8eaa9a8bd6a229fc9177537387ab} 
\index{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest@{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest}!test\_batch\_assign\_multiclass\_targets@{test\_batch\_assign\_multiclass\_targets}}
\index{test\_batch\_assign\_multiclass\_targets@{test\_batch\_assign\_multiclass\_targets}!detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest@{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest}}
\doxysubsubsection{\texorpdfstring{test\_batch\_assign\_multiclass\_targets()}{test\_batch\_assign\_multiclass\_targets()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+core.\+target\+\_\+assigner\+\_\+test.\+Batch\+Target\+Assigner\+Test.\+test\+\_\+batch\+\_\+assign\+\_\+multiclass\+\_\+targets (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{target__assigner__test_8py_source_l00550}{550}} of file \mbox{\hyperlink{target__assigner__test_8py_source}{target\+\_\+assigner\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00550\ \ \ \textcolor{keyword}{def\ }test\_batch\_assign\_multiclass\_targets(self):}
\DoxyCodeLine{00551\ }
\DoxyCodeLine{00552\ \ \ \ \ \textcolor{keyword}{def\ }graph\_fn(anchor\_means,\ groundtruth\_boxlist1,\ groundtruth\_boxlist2,}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ class\_targets1,\ class\_targets2):}
\DoxyCodeLine{00554\ \ \ \ \ \ \ box\_list1\ =\ box\_list.BoxList(groundtruth\_boxlist1)}
\DoxyCodeLine{00555\ \ \ \ \ \ \ box\_list2\ =\ box\_list.BoxList(groundtruth\_boxlist2)}
\DoxyCodeLine{00556\ \ \ \ \ \ \ gt\_box\_batch\ =\ [box\_list1,\ box\_list2]}
\DoxyCodeLine{00557\ \ \ \ \ \ \ gt\_class\_targets\ =\ [class\_targets1,\ class\_targets2]}
\DoxyCodeLine{00558\ \ \ \ \ \ \ anchors\_boxlist\ =\ box\_list.BoxList(anchor\_means)}
\DoxyCodeLine{00559\ \ \ \ \ \ \ multiclass\_target\_assigner\ =\ self.\_get\_target\_assigner()}
\DoxyCodeLine{00560\ \ \ \ \ \ \ num\_classes\ =\ 3}
\DoxyCodeLine{00561\ \ \ \ \ \ \ unmatched\_class\_label\ =\ tf.constant([1]\ +\ num\_classes\ *\ [0],\ tf.float32)}
\DoxyCodeLine{00562\ \ \ \ \ \ \ (cls\_targets,\ cls\_weights,\ reg\_targets,\ reg\_weights,}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \_)\ =\ targetassigner.batch\_assign\_targets(}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \ \ \ multiclass\_target\_assigner,\ anchors\_boxlist,\ gt\_box\_batch,}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \ \ \ gt\_class\_targets,\ unmatched\_class\_label)}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (cls\_targets,\ cls\_weights,\ reg\_targets,\ reg\_weights)}
\DoxyCodeLine{00567\ }
\DoxyCodeLine{00568\ \ \ \ \ groundtruth\_boxlist1\ =\ np.array([[0.,\ 0.,\ 0.2,\ 0.2]],\ dtype=np.float32)}
\DoxyCodeLine{00569\ \ \ \ \ groundtruth\_boxlist2\ =\ np.array([[0,\ 0.25123152,\ 1,\ 1],}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.015789,\ 0.0985,\ 0.55789,\ 0.3842]],}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=np.float32)}
\DoxyCodeLine{00572\ \ \ \ \ class\_targets1\ =\ np.array([[0,\ 1,\ 0,\ 0]],\ dtype=np.float32)}
\DoxyCodeLine{00573\ \ \ \ \ class\_targets2\ =\ np.array([[0,\ 0,\ 0,\ 1],}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 1,\ 0]],\ dtype=np.float32)}
\DoxyCodeLine{00575\ }
\DoxyCodeLine{00576\ \ \ \ \ anchor\_means\ =\ np.array([[0,\ 0,\ .25,\ .25],}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ .25,\ 1,\ 1],}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ .1,\ .5,\ .5],}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [.75,\ .75,\ 1,\ 1]],\ dtype=np.float32)}
\DoxyCodeLine{00580\ \ \ \ \ exp\_cls\_targets\ =\ [[[0,\ 1,\ 0,\ 0],}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 0,\ 0,\ 0]],}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[1,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 1],}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 1,\ 0],}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 0,\ 0,\ 0]]]}
\DoxyCodeLine{00588\ \ \ \ \ exp\_cls\_weights\ =\ [[[1,\ 1,\ 1,\ 1],}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1,\ 1],}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1,\ 1],}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1,\ 1]],}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[1,\ 1,\ 1,\ 1],}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1,\ 1],}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1,\ 1],}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1,\ 1]]]}
\DoxyCodeLine{00596\ \ \ \ \ exp\_reg\_targets\ =\ [[[0,\ 0,\ -\/0.5,\ -\/0.5],}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0,],}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0,],],}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[0,\ 0,\ 0,\ 0,],}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0.01231521,\ 0,\ 0],}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.15789001,\ -\/0.01500003,\ 0.57889998,\ -\/1.15799987],}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0]]]}
\DoxyCodeLine{00604\ \ \ \ \ exp\_reg\_weights\ =\ [[1,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 1,\ 1,\ 0]]}
\DoxyCodeLine{00606\ }
\DoxyCodeLine{00607\ \ \ \ \ (cls\_targets\_out,\ cls\_weights\_out,\ reg\_targets\_out,}
\DoxyCodeLine{00608\ \ \ \ \ \ reg\_weights\_out)\ =\ self.execute(graph\_fn,\ [}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ anchor\_means,\ groundtruth\_boxlist1,\ groundtruth\_boxlist2,}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ class\_targets1,\ class\_targets2}
\DoxyCodeLine{00611\ \ \ \ \ \ ])}
\DoxyCodeLine{00612\ \ \ \ \ self.assertAllClose(cls\_targets\_out,\ exp\_cls\_targets)}
\DoxyCodeLine{00613\ \ \ \ \ self.assertAllClose(cls\_weights\_out,\ exp\_cls\_weights)}
\DoxyCodeLine{00614\ \ \ \ \ self.assertAllClose(reg\_targets\_out,\ exp\_reg\_targets)}
\DoxyCodeLine{00615\ \ \ \ \ self.assertAllClose(reg\_weights\_out,\ exp\_reg\_weights)}
\DoxyCodeLine{00616\ }

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d99/classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_a3a3d8eaa9a8bd6a229fc9177537387ab_cgraph}
\end{center}
\end{figure}
\Hypertarget{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_a1d8aa65b3a914a617dd364d9400c3f3c}\label{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_a1d8aa65b3a914a617dd364d9400c3f3c} 
\index{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest@{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest}!test\_batch\_assign\_multiclass\_targets\_with\_padded\_groundtruth@{test\_batch\_assign\_multiclass\_targets\_with\_padded\_groundtruth}}
\index{test\_batch\_assign\_multiclass\_targets\_with\_padded\_groundtruth@{test\_batch\_assign\_multiclass\_targets\_with\_padded\_groundtruth}!detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest@{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest}}
\doxysubsubsection{\texorpdfstring{test\_batch\_assign\_multiclass\_targets\_with\_padded\_groundtruth()}{test\_batch\_assign\_multiclass\_targets\_with\_padded\_groundtruth()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+core.\+target\+\_\+assigner\+\_\+test.\+Batch\+Target\+Assigner\+Test.\+test\+\_\+batch\+\_\+assign\+\_\+multiclass\+\_\+targets\+\_\+with\+\_\+padded\+\_\+groundtruth (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{target__assigner__test_8py_source_l00617}{617}} of file \mbox{\hyperlink{target__assigner__test_8py_source}{target\+\_\+assigner\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00617\ \ \ \textcolor{keyword}{def\ }test\_batch\_assign\_multiclass\_targets\_with\_padded\_groundtruth(self):}
\DoxyCodeLine{00618\ }
\DoxyCodeLine{00619\ \ \ \ \ \textcolor{keyword}{def\ }graph\_fn(anchor\_means,\ groundtruth\_boxlist1,\ groundtruth\_boxlist2,}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ class\_targets1,\ class\_targets2,\ groundtruth\_weights1,}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ groundtruth\_weights2):}
\DoxyCodeLine{00622\ \ \ \ \ \ \ box\_list1\ =\ box\_list.BoxList(groundtruth\_boxlist1)}
\DoxyCodeLine{00623\ \ \ \ \ \ \ box\_list2\ =\ box\_list.BoxList(groundtruth\_boxlist2)}
\DoxyCodeLine{00624\ \ \ \ \ \ \ gt\_box\_batch\ =\ [box\_list1,\ box\_list2]}
\DoxyCodeLine{00625\ \ \ \ \ \ \ gt\_class\_targets\ =\ [class\_targets1,\ class\_targets2]}
\DoxyCodeLine{00626\ \ \ \ \ \ \ gt\_weights\ =\ [groundtruth\_weights1,\ groundtruth\_weights2]}
\DoxyCodeLine{00627\ \ \ \ \ \ \ anchors\_boxlist\ =\ box\_list.BoxList(anchor\_means)}
\DoxyCodeLine{00628\ \ \ \ \ \ \ multiclass\_target\_assigner\ =\ self.\_get\_target\_assigner()}
\DoxyCodeLine{00629\ \ \ \ \ \ \ num\_classes\ =\ 3}
\DoxyCodeLine{00630\ \ \ \ \ \ \ unmatched\_class\_label\ =\ tf.constant([1]\ +\ num\_classes\ *\ [0],\ tf.float32)}
\DoxyCodeLine{00631\ \ \ \ \ \ \ (cls\_targets,\ cls\_weights,\ reg\_targets,\ reg\_weights,}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \_)\ =\ targetassigner.batch\_assign\_targets(}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ \ \ \ multiclass\_target\_assigner,\ anchors\_boxlist,\ gt\_box\_batch,}
\DoxyCodeLine{00634\ \ \ \ \ \ \ \ \ \ \ \ gt\_class\_targets,\ unmatched\_class\_label,\ gt\_weights)}
\DoxyCodeLine{00635\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (cls\_targets,\ cls\_weights,\ reg\_targets,\ reg\_weights)}
\DoxyCodeLine{00636\ }
\DoxyCodeLine{00637\ \ \ \ \ groundtruth\_boxlist1\ =\ np.array([[0.,\ 0.,\ 0.2,\ 0.2],}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.,\ 0.,\ 0.,\ 0.]],\ dtype=np.float32)}
\DoxyCodeLine{00639\ \ \ \ \ groundtruth\_weights1\ =\ np.array([1,\ 0],\ dtype=np.float32)}
\DoxyCodeLine{00640\ \ \ \ \ groundtruth\_boxlist2\ =\ np.array([[0,\ 0.25123152,\ 1,\ 1],}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.015789,\ 0.0985,\ 0.55789,\ 0.3842],}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0]],}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=np.float32)}
\DoxyCodeLine{00644\ \ \ \ \ groundtruth\_weights2\ =\ np.array([1,\ 1,\ 0],\ dtype=np.float32)}
\DoxyCodeLine{00645\ \ \ \ \ class\_targets1\ =\ np.array([[0,\ 1,\ 0,\ 0],\ [0,\ 0,\ 0,\ 0]],\ dtype=np.float32)}
\DoxyCodeLine{00646\ \ \ \ \ class\_targets2\ =\ np.array([[0,\ 0,\ 0,\ 1],}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 1,\ 0],}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0]],\ dtype=np.float32)}
\DoxyCodeLine{00649\ }
\DoxyCodeLine{00650\ \ \ \ \ anchor\_means\ =\ np.array([[0,\ 0,\ .25,\ .25],}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ .25,\ 1,\ 1],}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ .1,\ .5,\ .5],}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [.75,\ .75,\ 1,\ 1]],\ dtype=np.float32)}
\DoxyCodeLine{00654\ }
\DoxyCodeLine{00655\ \ \ \ \ exp\_cls\_targets\ =\ [[[0,\ 1,\ 0,\ 0],}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 0,\ 0,\ 0]],}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[1,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 1],}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 1,\ 0],}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 0,\ 0,\ 0]]]}
\DoxyCodeLine{00663\ \ \ \ \ exp\_cls\_weights\ =\ [[[1,\ 1,\ 1,\ 1],}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1,\ 1],}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1,\ 1],}
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1,\ 1]],}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[1,\ 1,\ 1,\ 1],}
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1,\ 1],}
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1,\ 1],}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1,\ 1]]]}
\DoxyCodeLine{00671\ \ \ \ \ exp\_reg\_targets\ =\ [[[0,\ 0,\ -\/0.5,\ -\/0.5],}
\DoxyCodeLine{00672\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00673\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0,],}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0,],],}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[0,\ 0,\ 0,\ 0,],}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0.01231521,\ 0,\ 0],}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.15789001,\ -\/0.01500003,\ 0.57889998,\ -\/1.15799987],}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0]]]}
\DoxyCodeLine{00679\ \ \ \ \ exp\_reg\_weights\ =\ [[1,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 1,\ 1,\ 0]]}
\DoxyCodeLine{00681\ }
\DoxyCodeLine{00682\ \ \ \ \ (cls\_targets\_out,\ cls\_weights\_out,\ reg\_targets\_out,}
\DoxyCodeLine{00683\ \ \ \ \ \ reg\_weights\_out)\ =\ self.execute(graph\_fn,\ [}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \ anchor\_means,\ groundtruth\_boxlist1,\ groundtruth\_boxlist2,}
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ \ class\_targets1,\ class\_targets2,\ groundtruth\_weights1,}
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ \ groundtruth\_weights2}
\DoxyCodeLine{00687\ \ \ \ \ \ ])}
\DoxyCodeLine{00688\ \ \ \ \ self.assertAllClose(cls\_targets\_out,\ exp\_cls\_targets)}
\DoxyCodeLine{00689\ \ \ \ \ self.assertAllClose(cls\_weights\_out,\ exp\_cls\_weights)}
\DoxyCodeLine{00690\ \ \ \ \ self.assertAllClose(reg\_targets\_out,\ exp\_reg\_targets)}
\DoxyCodeLine{00691\ \ \ \ \ self.assertAllClose(reg\_weights\_out,\ exp\_reg\_weights)}
\DoxyCodeLine{00692\ }

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d99/classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_a1d8aa65b3a914a617dd364d9400c3f3c_cgraph}
\end{center}
\end{figure}
\Hypertarget{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_af0b5fce466f3d74f8a957d12603a9af9}\label{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_af0b5fce466f3d74f8a957d12603a9af9} 
\index{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest@{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest}!test\_batch\_assign\_multidimensional\_targets@{test\_batch\_assign\_multidimensional\_targets}}
\index{test\_batch\_assign\_multidimensional\_targets@{test\_batch\_assign\_multidimensional\_targets}!detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest@{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest}}
\doxysubsubsection{\texorpdfstring{test\_batch\_assign\_multidimensional\_targets()}{test\_batch\_assign\_multidimensional\_targets()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+core.\+target\+\_\+assigner\+\_\+test.\+Batch\+Target\+Assigner\+Test.\+test\+\_\+batch\+\_\+assign\+\_\+multidimensional\+\_\+targets (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{target__assigner__test_8py_source_l00693}{693}} of file \mbox{\hyperlink{target__assigner__test_8py_source}{target\+\_\+assigner\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00693\ \ \ \textcolor{keyword}{def\ }test\_batch\_assign\_multidimensional\_targets(self):}
\DoxyCodeLine{00694\ }
\DoxyCodeLine{00695\ \ \ \ \ \textcolor{keyword}{def\ }graph\_fn(anchor\_means,\ groundtruth\_boxlist1,\ groundtruth\_boxlist2,}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ class\_targets1,\ class\_targets2):}
\DoxyCodeLine{00697\ \ \ \ \ \ \ box\_list1\ =\ box\_list.BoxList(groundtruth\_boxlist1)}
\DoxyCodeLine{00698\ \ \ \ \ \ \ box\_list2\ =\ box\_list.BoxList(groundtruth\_boxlist2)}
\DoxyCodeLine{00699\ \ \ \ \ \ \ gt\_box\_batch\ =\ [box\_list1,\ box\_list2]}
\DoxyCodeLine{00700\ \ \ \ \ \ \ gt\_class\_targets\ =\ [class\_targets1,\ class\_targets2]}
\DoxyCodeLine{00701\ \ \ \ \ \ \ anchors\_boxlist\ =\ box\_list.BoxList(anchor\_means)}
\DoxyCodeLine{00702\ \ \ \ \ \ \ multiclass\_target\_assigner\ =\ self.\_get\_target\_assigner()}
\DoxyCodeLine{00703\ \ \ \ \ \ \ target\_dimensions\ =\ (2,\ 3)}
\DoxyCodeLine{00704\ \ \ \ \ \ \ unmatched\_class\_label\ =\ tf.constant(np.zeros(target\_dimensions),}
\DoxyCodeLine{00705\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tf.float32)}
\DoxyCodeLine{00706\ \ \ \ \ \ \ (cls\_targets,\ cls\_weights,\ reg\_targets,\ reg\_weights,}
\DoxyCodeLine{00707\ \ \ \ \ \ \ \ \_)\ =\ targetassigner.batch\_assign\_targets(}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \ \ \ multiclass\_target\_assigner,\ anchors\_boxlist,\ gt\_box\_batch,}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \ \ \ gt\_class\_targets,\ unmatched\_class\_label)}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (cls\_targets,\ cls\_weights,\ reg\_targets,\ reg\_weights)}
\DoxyCodeLine{00711\ }
\DoxyCodeLine{00712\ \ \ \ \ groundtruth\_boxlist1\ =\ np.array([[0.,\ 0.,\ 0.2,\ 0.2]],\ dtype=np.float32)}
\DoxyCodeLine{00713\ \ \ \ \ groundtruth\_boxlist2\ =\ np.array([[0,\ 0.25123152,\ 1,\ 1],}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.015789,\ 0.0985,\ 0.55789,\ 0.3842]],}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=np.float32)}
\DoxyCodeLine{00716\ \ \ \ \ class\_targets1\ =\ np.array([[[0,\ 1,\ 1],}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 0]]],\ dtype=np.float32)}
\DoxyCodeLine{00718\ \ \ \ \ class\_targets2\ =\ np.array([[[0,\ 1,\ 1],}
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 0]],}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[0,\ 0,\ 1],}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 1]]],\ dtype=np.float32)}
\DoxyCodeLine{00722\ }
\DoxyCodeLine{00723\ \ \ \ \ anchor\_means\ =\ np.array([[0,\ 0,\ .25,\ .25],}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ .25,\ 1,\ 1],}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ .1,\ .5,\ .5],}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [.75,\ .75,\ 1,\ 1]],\ dtype=np.float32)}
\DoxyCodeLine{00727\ }
\DoxyCodeLine{00728\ \ \ \ \ exp\_cls\_targets\ =\ [[[[0.,\ 1.,\ 1.],}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1.,\ 1.,\ 0.]],}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[0.,\ 0.,\ 0.],}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.,\ 0.,\ 0.]],}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[0.,\ 0.,\ 0.],}
\DoxyCodeLine{00733\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.,\ 0.,\ 0.]],}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[0.,\ 0.,\ 0.],}
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.,\ 0.,\ 0.]]],}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[[0.,\ 0.,\ 0.],}
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.,\ 0.,\ 0.]],}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[0.,\ 1.,\ 1.],}
\DoxyCodeLine{00739\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1.,\ 1.,\ 0.]],}
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[0.,\ 0.,\ 1.],}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.,\ 0.,\ 1.]],}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[0.,\ 0.,\ 0.],}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.,\ 0.,\ 0.]]]]}
\DoxyCodeLine{00744\ \ \ \ \ exp\_cls\_weights\ =\ [[[[1.,\ 1.,\ 1.],}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1.,\ 1.,\ 1.]],}
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[1.,\ 1.,\ 1.],}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1.,\ 1.,\ 1.]],}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[1.,\ 1.,\ 1.],}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1.,\ 1.,\ 1.]],}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[1.,\ 1.,\ 1.],}
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1.,\ 1.,\ 1.]]],}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[[1.,\ 1.,\ 1.],}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1.,\ 1.,\ 1.]],}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[1.,\ 1.,\ 1.],}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1.,\ 1.,\ 1.]],}
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[1.,\ 1.,\ 1.],}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1.,\ 1.,\ 1.]],}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[1.,\ 1.,\ 1.],}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1.,\ 1.,\ 1.]]]]}
\DoxyCodeLine{00760\ \ \ \ \ exp\_reg\_targets\ =\ [[[0,\ 0,\ -\/0.5,\ -\/0.5],}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0,],}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0,],],}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[0,\ 0,\ 0,\ 0,],}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0.01231521,\ 0,\ 0],}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.15789001,\ -\/0.01500003,\ 0.57889998,\ -\/1.15799987],}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0]]]}
\DoxyCodeLine{00768\ \ \ \ \ exp\_reg\_weights\ =\ [[1,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 1,\ 1,\ 0]]}
\DoxyCodeLine{00770\ }
\DoxyCodeLine{00771\ \ \ \ \ (cls\_targets\_out,\ cls\_weights\_out,\ reg\_targets\_out,}
\DoxyCodeLine{00772\ \ \ \ \ \ reg\_weights\_out)\ =\ self.execute(graph\_fn,\ [}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \ anchor\_means,\ groundtruth\_boxlist1,\ groundtruth\_boxlist2,}
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \ class\_targets1,\ class\_targets2}
\DoxyCodeLine{00775\ \ \ \ \ \ ])}
\DoxyCodeLine{00776\ \ \ \ \ self.assertAllClose(cls\_targets\_out,\ exp\_cls\_targets)}
\DoxyCodeLine{00777\ \ \ \ \ self.assertAllClose(cls\_weights\_out,\ exp\_cls\_weights)}
\DoxyCodeLine{00778\ \ \ \ \ self.assertAllClose(reg\_targets\_out,\ exp\_reg\_targets)}
\DoxyCodeLine{00779\ \ \ \ \ self.assertAllClose(reg\_weights\_out,\ exp\_reg\_weights)}
\DoxyCodeLine{00780\ }

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d99/classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_af0b5fce466f3d74f8a957d12603a9af9_cgraph}
\end{center}
\end{figure}
\Hypertarget{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_af53b2f294bbb21d24adec21eac9bc40c}\label{classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_af53b2f294bbb21d24adec21eac9bc40c} 
\index{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest@{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest}!test\_batch\_assign\_targets@{test\_batch\_assign\_targets}}
\index{test\_batch\_assign\_targets@{test\_batch\_assign\_targets}!detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest@{detection\_utils.core.target\_assigner\_test.BatchTargetAssignerTest}}
\doxysubsubsection{\texorpdfstring{test\_batch\_assign\_targets()}{test\_batch\_assign\_targets()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+core.\+target\+\_\+assigner\+\_\+test.\+Batch\+Target\+Assigner\+Test.\+test\+\_\+batch\+\_\+assign\+\_\+targets (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{target__assigner__test_8py_source_l00503}{503}} of file \mbox{\hyperlink{target__assigner__test_8py_source}{target\+\_\+assigner\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00503\ \ \ \textcolor{keyword}{def\ }test\_batch\_assign\_targets(self):}
\DoxyCodeLine{00504\ }
\DoxyCodeLine{00505\ \ \ \ \ \textcolor{keyword}{def\ }graph\_fn(anchor\_means,\ groundtruth\_boxlist1,\ groundtruth\_boxlist2):}
\DoxyCodeLine{00506\ \ \ \ \ \ \ box\_list1\ =\ box\_list.BoxList(groundtruth\_boxlist1)}
\DoxyCodeLine{00507\ \ \ \ \ \ \ box\_list2\ =\ box\_list.BoxList(groundtruth\_boxlist2)}
\DoxyCodeLine{00508\ \ \ \ \ \ \ gt\_box\_batch\ =\ [box\_list1,\ box\_list2]}
\DoxyCodeLine{00509\ \ \ \ \ \ \ gt\_class\_targets\ =\ [\textcolor{keywordtype}{None},\ \textcolor{keywordtype}{None}]}
\DoxyCodeLine{00510\ \ \ \ \ \ \ anchors\_boxlist\ =\ box\_list.BoxList(anchor\_means)}
\DoxyCodeLine{00511\ \ \ \ \ \ \ agnostic\_target\_assigner\ =\ self.\_get\_target\_assigner()}
\DoxyCodeLine{00512\ \ \ \ \ \ \ (cls\_targets,\ cls\_weights,\ reg\_targets,\ reg\_weights,}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \_)\ =\ targetassigner.batch\_assign\_targets(}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \ \ \ agnostic\_target\_assigner,\ anchors\_boxlist,\ gt\_box\_batch,}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \ \ gt\_class\_targets)}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (cls\_targets,\ cls\_weights,\ reg\_targets,\ reg\_weights)}
\DoxyCodeLine{00517\ }
\DoxyCodeLine{00518\ \ \ \ \ groundtruth\_boxlist1\ =\ np.array([[0.,\ 0.,\ 0.2,\ 0.2]],\ dtype=np.float32)}
\DoxyCodeLine{00519\ \ \ \ \ groundtruth\_boxlist2\ =\ np.array([[0,\ 0.25123152,\ 1,\ 1],}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.015789,\ 0.0985,\ 0.55789,\ 0.3842]],}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=np.float32)}
\DoxyCodeLine{00522\ \ \ \ \ anchor\_means\ =\ np.array([[0,\ 0,\ .25,\ .25],}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ .25,\ 1,\ 1],}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ .1,\ .5,\ .5],}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [.75,\ .75,\ 1,\ 1]],\ dtype=np.float32)}
\DoxyCodeLine{00526\ }
\DoxyCodeLine{00527\ \ \ \ \ exp\_cls\_targets\ =\ [[[1],\ [0],\ [0],\ [0]],}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[0],\ [1],\ [1],\ [0]]]}
\DoxyCodeLine{00529\ \ \ \ \ exp\_cls\_weights\ =\ [[[1],\ [1],\ [1],\ [1]],}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[1],\ [1],\ [1],\ [1]]]}
\DoxyCodeLine{00531\ \ \ \ \ exp\_reg\_targets\ =\ [[[0,\ 0,\ -\/0.5,\ -\/0.5],}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0,],}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0,],],}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[0,\ 0,\ 0,\ 0,],}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0.01231521,\ 0,\ 0],}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.15789001,\ -\/0.01500003,\ 0.57889998,\ -\/1.15799987],}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 0,\ 0]]]}
\DoxyCodeLine{00539\ \ \ \ \ exp\_reg\_weights\ =\ [[1,\ 0,\ 0,\ 0],}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 1,\ 1,\ 0]]}
\DoxyCodeLine{00541\ }
\DoxyCodeLine{00542\ \ \ \ \ (cls\_targets\_out,}
\DoxyCodeLine{00543\ \ \ \ \ \ cls\_weights\_out,\ reg\_targets\_out,\ reg\_weights\_out)\ =\ self.execute(}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \ graph\_fn,\ [anchor\_means,\ groundtruth\_boxlist1,\ groundtruth\_boxlist2])}
\DoxyCodeLine{00545\ \ \ \ \ self.assertAllClose(cls\_targets\_out,\ exp\_cls\_targets)}
\DoxyCodeLine{00546\ \ \ \ \ self.assertAllClose(cls\_weights\_out,\ exp\_cls\_weights)}
\DoxyCodeLine{00547\ \ \ \ \ self.assertAllClose(reg\_targets\_out,\ exp\_reg\_targets)}
\DoxyCodeLine{00548\ \ \ \ \ self.assertAllClose(reg\_weights\_out,\ exp\_reg\_weights)}
\DoxyCodeLine{00549\ }

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d99/classdetection__utils_1_1core_1_1target__assigner__test_1_1_batch_target_assigner_test_af53b2f294bbb21d24adec21eac9bc40c_cgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/main/resources/processing/video/detections/detection\+\_\+utils/core/\mbox{\hyperlink{target__assigner__test_8py}{target\+\_\+assigner\+\_\+test.\+py}}\end{DoxyCompactItemize}
