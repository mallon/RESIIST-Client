\doxysection{detection\+\_\+utils.\+utils.\+ops\+\_\+test.\+Ops\+Test\+Position\+Sensitive\+Crop\+Regions Class Reference}
\hypertarget{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions}{}\label{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions}\index{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}}


Inheritance diagram for detection\+\_\+utils.\+utils.\+ops\+\_\+test.\+Ops\+Test\+Position\+Sensitive\+Crop\+Regions\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=237pt]{d7/d1e/classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for detection\+\_\+utils.\+utils.\+ops\+\_\+test.\+Ops\+Test\+Position\+Sensitive\+Crop\+Regions\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=237pt]{d6/dc7/classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a7331699dc427ae0341a1609761c4ecce}{test\+\_\+position\+\_\+sensitive}} (self)
\item 
\mbox{\hyperlink{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a3c831ff73f1f9d0776418f9d31e94cf2}{test\+\_\+position\+\_\+sensitive\+\_\+with\+\_\+equal\+\_\+channels}} (self)
\item 
\mbox{\hyperlink{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_ac106cd1eadfdb9f5c677e54044251998}{test\+\_\+raise\+\_\+value\+\_\+error\+\_\+on\+\_\+num\+\_\+bins\+\_\+less\+\_\+than\+\_\+one}} (self)
\item 
\mbox{\hyperlink{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a4e0f20eb97215e1cbf02fcffcd77c61f}{test\+\_\+raise\+\_\+value\+\_\+error\+\_\+on\+\_\+non\+\_\+divisible\+\_\+crop\+\_\+size}} (self)
\item 
\mbox{\hyperlink{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a3397db06c5015cddbefc1b8c0d599332}{test\+\_\+raise\+\_\+value\+\_\+error\+\_\+on\+\_\+non\+\_\+divisible\+\_\+num\+\_\+channels}} (self)
\item 
\mbox{\hyperlink{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a3fc1da680bdad55db1742852ee8f6619}{test\+\_\+position\+\_\+sensitive\+\_\+with\+\_\+global\+\_\+pool\+\_\+false}} (self)
\item 
\mbox{\hyperlink{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_ae6b96fd1672b81b7eb1a17a9a4664d29}{test\+\_\+position\+\_\+sensitive\+\_\+with\+\_\+global\+\_\+pool\+\_\+false\+\_\+and\+\_\+do\+\_\+global\+\_\+pool}} (self)
\item 
\mbox{\hyperlink{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a15949446ab6791473165920b0280729e}{test\+\_\+raise\+\_\+value\+\_\+error\+\_\+on\+\_\+non\+\_\+square\+\_\+block\+\_\+size}} (self)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{ops__test_8py_source_l00821}{821}} of file \mbox{\hyperlink{ops__test_8py_source}{ops\+\_\+test.\+py}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a7331699dc427ae0341a1609761c4ecce}\label{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a7331699dc427ae0341a1609761c4ecce} 
\index{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}!test\_position\_sensitive@{test\_position\_sensitive}}
\index{test\_position\_sensitive@{test\_position\_sensitive}!detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}}
\doxysubsubsection{\texorpdfstring{test\_position\_sensitive()}{test\_position\_sensitive()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+utils.\+ops\+\_\+test.\+Ops\+Test\+Position\+Sensitive\+Crop\+Regions.\+test\+\_\+position\+\_\+sensitive (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ops__test_8py_source_l00823}{823}} of file \mbox{\hyperlink{ops__test_8py_source}{ops\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00823\ \ \ \textcolor{keyword}{def\ }test\_position\_sensitive(self):}
\DoxyCodeLine{00824\ \ \ \ \ num\_spatial\_bins\ =\ [3,\ 2]}
\DoxyCodeLine{00825\ \ \ \ \ image\_shape\ =\ [3,\ 2,\ 6]}
\DoxyCodeLine{00826\ }
\DoxyCodeLine{00827\ \ \ \ \ \textcolor{comment}{\#\ First\ channel\ is\ 1's,\ second\ channel\ is\ 2's,\ etc.}}
\DoxyCodeLine{00828\ \ \ \ \ image\ =\ tf.constant(}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ list(range(1,\ 3\ *\ 2\ +\ 1))\ *\ 6,\ dtype=tf.float32,\ shape=image\_shape)}
\DoxyCodeLine{00830\ \ \ \ \ boxes\ =\ tf.random\_uniform((2,\ 4))}
\DoxyCodeLine{00831\ }
\DoxyCodeLine{00832\ \ \ \ \ \textcolor{comment}{\#\ The\ result\ for\ both\ boxes\ should\ be\ [[1,\ 2],\ [3,\ 4],\ [5,\ 6]]}}
\DoxyCodeLine{00833\ \ \ \ \ \textcolor{comment}{\#\ before\ averaging.}}
\DoxyCodeLine{00834\ \ \ \ \ expected\_output\ =\ np.array([3.5,\ 3.5]).reshape([2,\ 1,\ 1,\ 1])}
\DoxyCodeLine{00835\ }
\DoxyCodeLine{00836\ \ \ \ \ \textcolor{keywordflow}{for}\ crop\_size\_mult\ \textcolor{keywordflow}{in}\ range(1,\ 3):}
\DoxyCodeLine{00837\ \ \ \ \ \ \ crop\_size\ =\ [3\ *\ crop\_size\_mult,\ 2\ *\ crop\_size\_mult]}
\DoxyCodeLine{00838\ \ \ \ \ \ \ ps\_crop\_and\_pool\ =\ ops.position\_sensitive\_crop\_regions(}
\DoxyCodeLine{00839\ \ \ \ \ \ \ \ \ \ \ image,\ boxes,\ crop\_size,\ num\_spatial\_bins,\ global\_pool=\textcolor{keyword}{True})}
\DoxyCodeLine{00840\ }
\DoxyCodeLine{00841\ \ \ \ \ \ \ \textcolor{keyword}{with}\ self.test\_session()\ \textcolor{keyword}{as}\ sess:}
\DoxyCodeLine{00842\ \ \ \ \ \ \ \ \ output\ =\ sess.run(ps\_crop\_and\_pool)}
\DoxyCodeLine{00843\ \ \ \ \ \ \ \ \ self.assertAllClose(output,\ expected\_output)}
\DoxyCodeLine{00844\ }

\end{DoxyCode}
\Hypertarget{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a3c831ff73f1f9d0776418f9d31e94cf2}\label{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a3c831ff73f1f9d0776418f9d31e94cf2} 
\index{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}!test\_position\_sensitive\_with\_equal\_channels@{test\_position\_sensitive\_with\_equal\_channels}}
\index{test\_position\_sensitive\_with\_equal\_channels@{test\_position\_sensitive\_with\_equal\_channels}!detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}}
\doxysubsubsection{\texorpdfstring{test\_position\_sensitive\_with\_equal\_channels()}{test\_position\_sensitive\_with\_equal\_channels()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+utils.\+ops\+\_\+test.\+Ops\+Test\+Position\+Sensitive\+Crop\+Regions.\+test\+\_\+position\+\_\+sensitive\+\_\+with\+\_\+equal\+\_\+channels (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ops__test_8py_source_l00845}{845}} of file \mbox{\hyperlink{ops__test_8py_source}{ops\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00845\ \ \ \textcolor{keyword}{def\ }test\_position\_sensitive\_with\_equal\_channels(self):}
\DoxyCodeLine{00846\ \ \ \ \ num\_spatial\_bins\ =\ [2,\ 2]}
\DoxyCodeLine{00847\ \ \ \ \ image\_shape\ =\ [3,\ 3,\ 4]}
\DoxyCodeLine{00848\ \ \ \ \ crop\_size\ =\ [2,\ 2]}
\DoxyCodeLine{00849\ }
\DoxyCodeLine{00850\ \ \ \ \ image\ =\ tf.constant(}
\DoxyCodeLine{00851\ \ \ \ \ \ \ \ \ list(range(1,\ 3\ *\ 3\ +\ 1)),\ dtype=tf.float32,\ shape=[3,\ 3,\ 1])}
\DoxyCodeLine{00852\ \ \ \ \ tiled\_image\ =\ tf.tile(image,\ [1,\ 1,\ image\_shape[2]])}
\DoxyCodeLine{00853\ \ \ \ \ boxes\ =\ tf.random\_uniform((3,\ 4))}
\DoxyCodeLine{00854\ \ \ \ \ box\_ind\ =\ tf.constant([0,\ 0,\ 0],\ dtype=tf.int32)}
\DoxyCodeLine{00855\ }
\DoxyCodeLine{00856\ \ \ \ \ \textcolor{comment}{\#\ All\ channels\ are\ equal\ so\ position-\/sensitive\ crop\ and\ resize\ should}}
\DoxyCodeLine{00857\ \ \ \ \ \textcolor{comment}{\#\ work\ as\ the\ usual\ crop\ and\ resize\ for\ just\ one\ channel.}}
\DoxyCodeLine{00858\ \ \ \ \ crop\ =\ tf.image.crop\_and\_resize(tf.expand\_dims(image,\ axis=0),\ boxes,}
\DoxyCodeLine{00859\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ box\_ind,\ crop\_size)}
\DoxyCodeLine{00860\ \ \ \ \ crop\_and\_pool\ =\ tf.reduce\_mean(crop,\ [1,\ 2],\ keepdims=\textcolor{keyword}{True})}
\DoxyCodeLine{00861\ }
\DoxyCodeLine{00862\ \ \ \ \ ps\_crop\_and\_pool\ =\ ops.position\_sensitive\_crop\_regions(}
\DoxyCodeLine{00863\ \ \ \ \ \ \ \ \ tiled\_image,}
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ boxes,}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ crop\_size,}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \ \ num\_spatial\_bins,}
\DoxyCodeLine{00867\ \ \ \ \ \ \ \ \ global\_pool=\textcolor{keyword}{True})}
\DoxyCodeLine{00868\ }
\DoxyCodeLine{00869\ \ \ \ \ \textcolor{keyword}{with}\ self.test\_session()\ \textcolor{keyword}{as}\ sess:}
\DoxyCodeLine{00870\ \ \ \ \ \ \ expected\_output,\ output\ =\ sess.run((crop\_and\_pool,\ ps\_crop\_and\_pool))}
\DoxyCodeLine{00871\ \ \ \ \ \ \ self.assertAllClose(output,\ expected\_output)}
\DoxyCodeLine{00872\ }

\end{DoxyCode}
\Hypertarget{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a3fc1da680bdad55db1742852ee8f6619}\label{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a3fc1da680bdad55db1742852ee8f6619} 
\index{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}!test\_position\_sensitive\_with\_global\_pool\_false@{test\_position\_sensitive\_with\_global\_pool\_false}}
\index{test\_position\_sensitive\_with\_global\_pool\_false@{test\_position\_sensitive\_with\_global\_pool\_false}!detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}}
\doxysubsubsection{\texorpdfstring{test\_position\_sensitive\_with\_global\_pool\_false()}{test\_position\_sensitive\_with\_global\_pool\_false()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+utils.\+ops\+\_\+test.\+Ops\+Test\+Position\+Sensitive\+Crop\+Regions.\+test\+\_\+position\+\_\+sensitive\+\_\+with\+\_\+global\+\_\+pool\+\_\+false (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ops__test_8py_source_l00911}{911}} of file \mbox{\hyperlink{ops__test_8py_source}{ops\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00911\ \ \ \textcolor{keyword}{def\ }test\_position\_sensitive\_with\_global\_pool\_false(self):}
\DoxyCodeLine{00912\ \ \ \ \ num\_spatial\_bins\ =\ [3,\ 2]}
\DoxyCodeLine{00913\ \ \ \ \ image\_shape\ =\ [3,\ 2,\ 6]}
\DoxyCodeLine{00914\ \ \ \ \ num\_boxes\ =\ 2}
\DoxyCodeLine{00915\ }
\DoxyCodeLine{00916\ \ \ \ \ \textcolor{comment}{\#\ First\ channel\ is\ 1's,\ second\ channel\ is\ 2's,\ etc.}}
\DoxyCodeLine{00917\ \ \ \ \ image\ =\ tf.constant(}
\DoxyCodeLine{00918\ \ \ \ \ \ \ \ \ list(range(1,\ 3\ *\ 2\ +\ 1))\ *\ 6,\ dtype=tf.float32,\ shape=image\_shape)}
\DoxyCodeLine{00919\ \ \ \ \ boxes\ =\ tf.random\_uniform((num\_boxes,\ 4))}
\DoxyCodeLine{00920\ }
\DoxyCodeLine{00921\ \ \ \ \ expected\_output\ =\ []}
\DoxyCodeLine{00922\ }
\DoxyCodeLine{00923\ \ \ \ \ \textcolor{comment}{\#\ Expected\ output,\ when\ crop\_size\ =\ [3,\ 2].}}
\DoxyCodeLine{00924\ \ \ \ \ expected\_output.append(np.expand\_dims(}
\DoxyCodeLine{00925\ \ \ \ \ \ \ \ \ np.tile(np.array([[1,\ 2],}
\DoxyCodeLine{00926\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [3,\ 4],}
\DoxyCodeLine{00927\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [5,\ 6]]),\ (num\_boxes,\ 1,\ 1)),}
\DoxyCodeLine{00928\ \ \ \ \ \ \ \ \ axis=-\/1))}
\DoxyCodeLine{00929\ }
\DoxyCodeLine{00930\ \ \ \ \ \textcolor{comment}{\#\ Expected\ output,\ when\ crop\_size\ =\ [6,\ 4].}}
\DoxyCodeLine{00931\ \ \ \ \ expected\_output.append(np.expand\_dims(}
\DoxyCodeLine{00932\ \ \ \ \ \ \ \ \ np.tile(np.array([[1,\ 1,\ 2,\ 2],}
\DoxyCodeLine{00933\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 2,\ 2],}
\DoxyCodeLine{00934\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [3,\ 3,\ 4,\ 4],}
\DoxyCodeLine{00935\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [3,\ 3,\ 4,\ 4],}
\DoxyCodeLine{00936\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [5,\ 5,\ 6,\ 6],}
\DoxyCodeLine{00937\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [5,\ 5,\ 6,\ 6]]),\ (num\_boxes,\ 1,\ 1)),}
\DoxyCodeLine{00938\ \ \ \ \ \ \ \ \ axis=-\/1))}
\DoxyCodeLine{00939\ }
\DoxyCodeLine{00940\ \ \ \ \ \textcolor{keywordflow}{for}\ crop\_size\_mult\ \textcolor{keywordflow}{in}\ range(1,\ 3):}
\DoxyCodeLine{00941\ \ \ \ \ \ \ crop\_size\ =\ [3\ *\ crop\_size\_mult,\ 2\ *\ crop\_size\_mult]}
\DoxyCodeLine{00942\ \ \ \ \ \ \ ps\_crop\ =\ ops.position\_sensitive\_crop\_regions(}
\DoxyCodeLine{00943\ \ \ \ \ \ \ \ \ \ \ image,\ boxes,\ crop\_size,\ num\_spatial\_bins,\ global\_pool=\textcolor{keyword}{False})}
\DoxyCodeLine{00944\ \ \ \ \ \ \ \textcolor{keyword}{with}\ self.test\_session()\ \textcolor{keyword}{as}\ sess:}
\DoxyCodeLine{00945\ \ \ \ \ \ \ \ \ output\ =\ sess.run(ps\_crop)}
\DoxyCodeLine{00946\ \ \ \ \ \ \ self.assertAllClose(output,\ expected\_output[crop\_size\_mult\ -\/\ 1])}
\DoxyCodeLine{00947\ }

\end{DoxyCode}
\Hypertarget{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_ae6b96fd1672b81b7eb1a17a9a4664d29}\label{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_ae6b96fd1672b81b7eb1a17a9a4664d29} 
\index{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}!test\_position\_sensitive\_with\_global\_pool\_false\_and\_do\_global\_pool@{test\_position\_sensitive\_with\_global\_pool\_false\_and\_do\_global\_pool}}
\index{test\_position\_sensitive\_with\_global\_pool\_false\_and\_do\_global\_pool@{test\_position\_sensitive\_with\_global\_pool\_false\_and\_do\_global\_pool}!detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}}
\doxysubsubsection{\texorpdfstring{test\_position\_sensitive\_with\_global\_pool\_false\_and\_do\_global\_pool()}{test\_position\_sensitive\_with\_global\_pool\_false\_and\_do\_global\_pool()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+utils.\+ops\+\_\+test.\+Ops\+Test\+Position\+Sensitive\+Crop\+Regions.\+test\+\_\+position\+\_\+sensitive\+\_\+with\+\_\+global\+\_\+pool\+\_\+false\+\_\+and\+\_\+do\+\_\+global\+\_\+pool (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ops__test_8py_source_l00948}{948}} of file \mbox{\hyperlink{ops__test_8py_source}{ops\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00948\ \ \ \textcolor{keyword}{def\ }test\_position\_sensitive\_with\_global\_pool\_false\_and\_do\_global\_pool(self):}
\DoxyCodeLine{00949\ \ \ \ \ num\_spatial\_bins\ =\ [3,\ 2]}
\DoxyCodeLine{00950\ \ \ \ \ image\_shape\ =\ [3,\ 2,\ 6]}
\DoxyCodeLine{00951\ \ \ \ \ num\_boxes\ =\ 2}
\DoxyCodeLine{00952\ }
\DoxyCodeLine{00953\ \ \ \ \ \textcolor{comment}{\#\ First\ channel\ is\ 1's,\ second\ channel\ is\ 2's,\ etc.}}
\DoxyCodeLine{00954\ \ \ \ \ image\ =\ tf.constant(}
\DoxyCodeLine{00955\ \ \ \ \ \ \ \ \ list(range(1,\ 3\ *\ 2\ +\ 1))\ *\ 6,\ dtype=tf.float32,\ shape=image\_shape)}
\DoxyCodeLine{00956\ \ \ \ \ boxes\ =\ tf.random\_uniform((num\_boxes,\ 4))}
\DoxyCodeLine{00957\ }
\DoxyCodeLine{00958\ \ \ \ \ expected\_output\ =\ []}
\DoxyCodeLine{00959\ }
\DoxyCodeLine{00960\ \ \ \ \ \textcolor{comment}{\#\ Expected\ output,\ when\ crop\_size\ =\ [3,\ 2].}}
\DoxyCodeLine{00961\ \ \ \ \ expected\_output.append(np.mean(}
\DoxyCodeLine{00962\ \ \ \ \ \ \ \ \ np.expand\_dims(}
\DoxyCodeLine{00963\ \ \ \ \ \ \ \ \ \ \ \ \ np.tile(np.array([[1,\ 2],}
\DoxyCodeLine{00964\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [3,\ 4],}
\DoxyCodeLine{00965\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [5,\ 6]]),\ (num\_boxes,\ 1,\ 1)),}
\DoxyCodeLine{00966\ \ \ \ \ \ \ \ \ \ \ \ \ axis=-\/1),}
\DoxyCodeLine{00967\ \ \ \ \ \ \ \ \ axis=(1,\ 2),\ keepdims=\textcolor{keyword}{True}))}
\DoxyCodeLine{00968\ }
\DoxyCodeLine{00969\ \ \ \ \ \textcolor{comment}{\#\ Expected\ output,\ when\ crop\_size\ =\ [6,\ 4].}}
\DoxyCodeLine{00970\ \ \ \ \ expected\_output.append(np.mean(}
\DoxyCodeLine{00971\ \ \ \ \ \ \ \ \ np.expand\_dims(}
\DoxyCodeLine{00972\ \ \ \ \ \ \ \ \ \ \ \ \ np.tile(np.array([[1,\ 1,\ 2,\ 2],}
\DoxyCodeLine{00973\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 2,\ 2],}
\DoxyCodeLine{00974\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [3,\ 3,\ 4,\ 4],}
\DoxyCodeLine{00975\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [3,\ 3,\ 4,\ 4],}
\DoxyCodeLine{00976\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [5,\ 5,\ 6,\ 6],}
\DoxyCodeLine{00977\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [5,\ 5,\ 6,\ 6]]),\ (num\_boxes,\ 1,\ 1)),}
\DoxyCodeLine{00978\ \ \ \ \ \ \ \ \ \ \ \ \ axis=-\/1),}
\DoxyCodeLine{00979\ \ \ \ \ \ \ \ \ axis=(1,\ 2),\ keepdims=\textcolor{keyword}{True}))}
\DoxyCodeLine{00980\ }
\DoxyCodeLine{00981\ \ \ \ \ \textcolor{keywordflow}{for}\ crop\_size\_mult\ \textcolor{keywordflow}{in}\ range(1,\ 3):}
\DoxyCodeLine{00982\ \ \ \ \ \ \ crop\_size\ =\ [3\ *\ crop\_size\_mult,\ 2\ *\ crop\_size\_mult]}
\DoxyCodeLine{00983\ }
\DoxyCodeLine{00984\ \ \ \ \ \ \ \textcolor{comment}{\#\ Perform\ global\_pooling\ after\ running\ the\ function\ with}}
\DoxyCodeLine{00985\ \ \ \ \ \ \ \textcolor{comment}{\#\ global\_pool=False.}}
\DoxyCodeLine{00986\ \ \ \ \ \ \ ps\_crop\ =\ ops.position\_sensitive\_crop\_regions(}
\DoxyCodeLine{00987\ \ \ \ \ \ \ \ \ \ \ image,\ boxes,\ crop\_size,\ num\_spatial\_bins,\ global\_pool=\textcolor{keyword}{False})}
\DoxyCodeLine{00988\ \ \ \ \ \ \ ps\_crop\_and\_pool\ =\ tf.reduce\_mean(}
\DoxyCodeLine{00989\ \ \ \ \ \ \ \ \ \ \ ps\_crop,\ reduction\_indices=(1,\ 2),\ keepdims=\textcolor{keyword}{True})}
\DoxyCodeLine{00990\ }
\DoxyCodeLine{00991\ \ \ \ \ \ \ \textcolor{keyword}{with}\ self.test\_session()\ \textcolor{keyword}{as}\ sess:}
\DoxyCodeLine{00992\ \ \ \ \ \ \ \ \ output\ =\ sess.run(ps\_crop\_and\_pool)}
\DoxyCodeLine{00993\ }
\DoxyCodeLine{00994\ \ \ \ \ \ \ self.assertAllEqual(output,\ expected\_output[crop\_size\_mult\ -\/\ 1])}
\DoxyCodeLine{00995\ }

\end{DoxyCode}
\Hypertarget{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a4e0f20eb97215e1cbf02fcffcd77c61f}\label{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a4e0f20eb97215e1cbf02fcffcd77c61f} 
\index{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}!test\_raise\_value\_error\_on\_non\_divisible\_crop\_size@{test\_raise\_value\_error\_on\_non\_divisible\_crop\_size}}
\index{test\_raise\_value\_error\_on\_non\_divisible\_crop\_size@{test\_raise\_value\_error\_on\_non\_divisible\_crop\_size}!detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}}
\doxysubsubsection{\texorpdfstring{test\_raise\_value\_error\_on\_non\_divisible\_crop\_size()}{test\_raise\_value\_error\_on\_non\_divisible\_crop\_size()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+utils.\+ops\+\_\+test.\+Ops\+Test\+Position\+Sensitive\+Crop\+Regions.\+test\+\_\+raise\+\_\+value\+\_\+error\+\_\+on\+\_\+non\+\_\+divisible\+\_\+crop\+\_\+size (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ops__test_8py_source_l00885}{885}} of file \mbox{\hyperlink{ops__test_8py_source}{ops\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00885\ \ \ \textcolor{keyword}{def\ }test\_raise\_value\_error\_on\_non\_divisible\_crop\_size(self):}
\DoxyCodeLine{00886\ \ \ \ \ num\_spatial\_bins\ =\ [2,\ 3]}
\DoxyCodeLine{00887\ \ \ \ \ image\_shape\ =\ [1,\ 1,\ 6]}
\DoxyCodeLine{00888\ \ \ \ \ crop\_size\ =\ [3,\ 2]}
\DoxyCodeLine{00889\ }
\DoxyCodeLine{00890\ \ \ \ \ image\ =\ tf.constant(1,\ dtype=tf.float32,\ shape=image\_shape)}
\DoxyCodeLine{00891\ \ \ \ \ boxes\ =\ tf.constant([[0,\ 0,\ 1,\ 1]],\ dtype=tf.float32)}
\DoxyCodeLine{00892\ }
\DoxyCodeLine{00893\ \ \ \ \ \textcolor{keyword}{with}\ self.assertRaisesRegexp(}
\DoxyCodeLine{00894\ \ \ \ \ \ \ \ \ ValueError,\ \textcolor{stringliteral}{'crop\_size\ should\ be\ divisible\ by\ num\_spatial\_bins'}):}
\DoxyCodeLine{00895\ \ \ \ \ \ \ ops.position\_sensitive\_crop\_regions(}
\DoxyCodeLine{00896\ \ \ \ \ \ \ \ \ \ \ image,\ boxes,\ crop\_size,\ num\_spatial\_bins,\ global\_pool=\textcolor{keyword}{True})}
\DoxyCodeLine{00897\ }

\end{DoxyCode}
\Hypertarget{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a3397db06c5015cddbefc1b8c0d599332}\label{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a3397db06c5015cddbefc1b8c0d599332} 
\index{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}!test\_raise\_value\_error\_on\_non\_divisible\_num\_channels@{test\_raise\_value\_error\_on\_non\_divisible\_num\_channels}}
\index{test\_raise\_value\_error\_on\_non\_divisible\_num\_channels@{test\_raise\_value\_error\_on\_non\_divisible\_num\_channels}!detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}}
\doxysubsubsection{\texorpdfstring{test\_raise\_value\_error\_on\_non\_divisible\_num\_channels()}{test\_raise\_value\_error\_on\_non\_divisible\_num\_channels()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+utils.\+ops\+\_\+test.\+Ops\+Test\+Position\+Sensitive\+Crop\+Regions.\+test\+\_\+raise\+\_\+value\+\_\+error\+\_\+on\+\_\+non\+\_\+divisible\+\_\+num\+\_\+channels (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ops__test_8py_source_l00898}{898}} of file \mbox{\hyperlink{ops__test_8py_source}{ops\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00898\ \ \ \textcolor{keyword}{def\ }test\_raise\_value\_error\_on\_non\_divisible\_num\_channels(self):}
\DoxyCodeLine{00899\ \ \ \ \ num\_spatial\_bins\ =\ [2,\ 2]}
\DoxyCodeLine{00900\ \ \ \ \ image\_shape\ =\ [1,\ 1,\ 5]}
\DoxyCodeLine{00901\ \ \ \ \ crop\_size\ =\ [2,\ 2]}
\DoxyCodeLine{00902\ }
\DoxyCodeLine{00903\ \ \ \ \ image\ =\ tf.constant(1,\ dtype=tf.float32,\ shape=image\_shape)}
\DoxyCodeLine{00904\ \ \ \ \ boxes\ =\ tf.constant([[0,\ 0,\ 1,\ 1]],\ dtype=tf.float32)}
\DoxyCodeLine{00905\ }
\DoxyCodeLine{00906\ \ \ \ \ \textcolor{keyword}{with}\ self.assertRaisesRegexp(}
\DoxyCodeLine{00907\ \ \ \ \ \ \ \ \ ValueError,\ \textcolor{stringliteral}{'Dimension\ size\ must\ be\ evenly\ divisible\ by\ 4\ but\ is\ 5'}):}
\DoxyCodeLine{00908\ \ \ \ \ \ \ ops.position\_sensitive\_crop\_regions(}
\DoxyCodeLine{00909\ \ \ \ \ \ \ \ \ \ \ image,\ boxes,\ crop\_size,\ num\_spatial\_bins,\ global\_pool=\textcolor{keyword}{True})}
\DoxyCodeLine{00910\ }

\end{DoxyCode}
\Hypertarget{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a15949446ab6791473165920b0280729e}\label{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_a15949446ab6791473165920b0280729e} 
\index{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}!test\_raise\_value\_error\_on\_non\_square\_block\_size@{test\_raise\_value\_error\_on\_non\_square\_block\_size}}
\index{test\_raise\_value\_error\_on\_non\_square\_block\_size@{test\_raise\_value\_error\_on\_non\_square\_block\_size}!detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}}
\doxysubsubsection{\texorpdfstring{test\_raise\_value\_error\_on\_non\_square\_block\_size()}{test\_raise\_value\_error\_on\_non\_square\_block\_size()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+utils.\+ops\+\_\+test.\+Ops\+Test\+Position\+Sensitive\+Crop\+Regions.\+test\+\_\+raise\+\_\+value\+\_\+error\+\_\+on\+\_\+non\+\_\+square\+\_\+block\+\_\+size (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ops__test_8py_source_l00996}{996}} of file \mbox{\hyperlink{ops__test_8py_source}{ops\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00996\ \ \ \textcolor{keyword}{def\ }test\_raise\_value\_error\_on\_non\_square\_block\_size(self):}
\DoxyCodeLine{00997\ \ \ \ \ num\_spatial\_bins\ =\ [3,\ 2]}
\DoxyCodeLine{00998\ \ \ \ \ image\_shape\ =\ [3,\ 2,\ 6]}
\DoxyCodeLine{00999\ \ \ \ \ crop\_size\ =\ [6,\ 2]}
\DoxyCodeLine{01000\ }
\DoxyCodeLine{01001\ \ \ \ \ image\ =\ tf.constant(1,\ dtype=tf.float32,\ shape=image\_shape)}
\DoxyCodeLine{01002\ \ \ \ \ boxes\ =\ tf.constant([[0,\ 0,\ 1,\ 1]],\ dtype=tf.float32)}
\DoxyCodeLine{01003\ }
\DoxyCodeLine{01004\ \ \ \ \ \textcolor{keyword}{with}\ self.assertRaisesRegexp(}
\DoxyCodeLine{01005\ \ \ \ \ \ \ \ \ ValueError,\ \textcolor{stringliteral}{'Only\ support\ square\ bin\ crop\ size\ for\ now.'}):}
\DoxyCodeLine{01006\ \ \ \ \ \ \ ops.position\_sensitive\_crop\_regions(}
\DoxyCodeLine{01007\ \ \ \ \ \ \ \ \ \ \ image,\ boxes,\ crop\_size,\ num\_spatial\_bins,\ global\_pool=\textcolor{keyword}{False})}
\DoxyCodeLine{01008\ }
\DoxyCodeLine{01009\ }

\end{DoxyCode}
\Hypertarget{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_ac106cd1eadfdb9f5c677e54044251998}\label{classdetection__utils_1_1utils_1_1ops__test_1_1_ops_test_position_sensitive_crop_regions_ac106cd1eadfdb9f5c677e54044251998} 
\index{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}!test\_raise\_value\_error\_on\_num\_bins\_less\_than\_one@{test\_raise\_value\_error\_on\_num\_bins\_less\_than\_one}}
\index{test\_raise\_value\_error\_on\_num\_bins\_less\_than\_one@{test\_raise\_value\_error\_on\_num\_bins\_less\_than\_one}!detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions@{detection\_utils.utils.ops\_test.OpsTestPositionSensitiveCropRegions}}
\doxysubsubsection{\texorpdfstring{test\_raise\_value\_error\_on\_num\_bins\_less\_than\_one()}{test\_raise\_value\_error\_on\_num\_bins\_less\_than\_one()}}
{\footnotesize\ttfamily detection\+\_\+utils.\+utils.\+ops\+\_\+test.\+Ops\+Test\+Position\+Sensitive\+Crop\+Regions.\+test\+\_\+raise\+\_\+value\+\_\+error\+\_\+on\+\_\+num\+\_\+bins\+\_\+less\+\_\+than\+\_\+one (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ops__test_8py_source_l00873}{873}} of file \mbox{\hyperlink{ops__test_8py_source}{ops\+\_\+test.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00873\ \ \ \textcolor{keyword}{def\ }test\_raise\_value\_error\_on\_num\_bins\_less\_than\_one(self):}
\DoxyCodeLine{00874\ \ \ \ \ num\_spatial\_bins\ =\ [1,\ -\/1]}
\DoxyCodeLine{00875\ \ \ \ \ image\_shape\ =\ [1,\ 1,\ 2]}
\DoxyCodeLine{00876\ \ \ \ \ crop\_size\ =\ [2,\ 2]}
\DoxyCodeLine{00877\ }
\DoxyCodeLine{00878\ \ \ \ \ image\ =\ tf.constant(1,\ dtype=tf.float32,\ shape=image\_shape)}
\DoxyCodeLine{00879\ \ \ \ \ boxes\ =\ tf.constant([[0,\ 0,\ 1,\ 1]],\ dtype=tf.float32)}
\DoxyCodeLine{00880\ }
\DoxyCodeLine{00881\ \ \ \ \ \textcolor{keyword}{with}\ self.assertRaisesRegexp(ValueError,\ \textcolor{stringliteral}{'num\_spatial\_bins\ should\ be\ >=\ 1'}):}
\DoxyCodeLine{00882\ \ \ \ \ \ \ ops.position\_sensitive\_crop\_regions(}
\DoxyCodeLine{00883\ \ \ \ \ \ \ \ \ \ \ image,\ boxes,\ crop\_size,\ num\_spatial\_bins,\ global\_pool=\textcolor{keyword}{True})}
\DoxyCodeLine{00884\ }

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/main/resources/processing/video/detections/detection\+\_\+utils/utils/\mbox{\hyperlink{ops__test_8py}{ops\+\_\+test.\+py}}\end{DoxyCompactItemize}
