<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RESIIST: detection_utils.core.box_list_ops Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RESIIST
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d8/d97/namespacedetection__utils.html">detection_utils</a></li><li class="navelem"><a class="el" href="../../de/d5d/namespacedetection__utils_1_1core.html">core</a></li><li class="navelem"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html">box_list_ops</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">detection_utils.core.box_list_ops Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d0f/classdetection__utils_1_1core_1_1box__list__ops_1_1_sort_order.html">SortOrder</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a92898db065feb66a9559123f5dc1190e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a92898db065feb66a9559123f5dc1190e">area</a> (boxlist, scope=None)</td></tr>
<tr class="separator:a92898db065feb66a9559123f5dc1190e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30d8f8a23a3ee1a92ed2aded0b20b761"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a30d8f8a23a3ee1a92ed2aded0b20b761">height_width</a> (boxlist, scope=None)</td></tr>
<tr class="separator:a30d8f8a23a3ee1a92ed2aded0b20b761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a890e93aacb6d9ba7532251c3047d53fd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a890e93aacb6d9ba7532251c3047d53fd">scale</a> (boxlist, y_scale, x_scale, scope=None)</td></tr>
<tr class="separator:a890e93aacb6d9ba7532251c3047d53fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c75cbd62f25f099ee47c6f50a22c12d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a0c75cbd62f25f099ee47c6f50a22c12d">clip_to_window</a> (boxlist, window, filter_nonoverlapping=True, scope=None)</td></tr>
<tr class="separator:a0c75cbd62f25f099ee47c6f50a22c12d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cce2ae473046db81897506796042133"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a8cce2ae473046db81897506796042133">prune_outside_window</a> (boxlist, window, scope=None)</td></tr>
<tr class="separator:a8cce2ae473046db81897506796042133"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac97746ffdde0c48bd2bad8c439c6bd3c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ac97746ffdde0c48bd2bad8c439c6bd3c">prune_completely_outside_window</a> (boxlist, window, scope=None)</td></tr>
<tr class="separator:ac97746ffdde0c48bd2bad8c439c6bd3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd15da7dda22daae6756580f198e34da"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#afd15da7dda22daae6756580f198e34da">intersection</a> (boxlist1, boxlist2, scope=None)</td></tr>
<tr class="separator:afd15da7dda22daae6756580f198e34da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdde2971529ea91174efe09af9202c05"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#afdde2971529ea91174efe09af9202c05">matched_intersection</a> (boxlist1, boxlist2, scope=None)</td></tr>
<tr class="separator:afdde2971529ea91174efe09af9202c05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c3ceb43da9213d701fe159dd5ab3b16"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a0c3ceb43da9213d701fe159dd5ab3b16">iou</a> (boxlist1, boxlist2, scope=None)</td></tr>
<tr class="separator:a0c3ceb43da9213d701fe159dd5ab3b16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fad601f99641baf7fda27235c4723a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a9fad601f99641baf7fda27235c4723a0">matched_iou</a> (boxlist1, boxlist2, scope=None)</td></tr>
<tr class="separator:a9fad601f99641baf7fda27235c4723a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e0ac719b5e09ec7392954a9c9fe4174"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a9e0ac719b5e09ec7392954a9c9fe4174">ioa</a> (boxlist1, boxlist2, scope=None)</td></tr>
<tr class="separator:a9e0ac719b5e09ec7392954a9c9fe4174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71b57b4bfadf9a8c24875f06c894ec79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a71b57b4bfadf9a8c24875f06c894ec79">prune_non_overlapping_boxes</a> (boxlist1, boxlist2, min_overlap=0.0, scope=None)</td></tr>
<tr class="separator:a71b57b4bfadf9a8c24875f06c894ec79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a121943718c068c50e17a0dbbde02b17e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a121943718c068c50e17a0dbbde02b17e">prune_small_boxes</a> (boxlist, min_side, scope=None)</td></tr>
<tr class="separator:a121943718c068c50e17a0dbbde02b17e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a725390a73d7d904bf824344014ed055c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a725390a73d7d904bf824344014ed055c">change_coordinate_frame</a> (boxlist, window, scope=None)</td></tr>
<tr class="separator:a725390a73d7d904bf824344014ed055c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e9b6ea6358fa09ac69ff5f20e6696ee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a2e9b6ea6358fa09ac69ff5f20e6696ee">sq_dist</a> (boxlist1, boxlist2, scope=None)</td></tr>
<tr class="separator:a2e9b6ea6358fa09ac69ff5f20e6696ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad52cd56fc9dc0a632dd326e489bd1399"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ad52cd56fc9dc0a632dd326e489bd1399">boolean_mask</a> (boxlist, indicator, fields=None, scope=None, use_static_shapes=False, indicator_sum=None)</td></tr>
<tr class="separator:ad52cd56fc9dc0a632dd326e489bd1399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab935f3907c57be324fe3e04a553aad0b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab935f3907c57be324fe3e04a553aad0b">gather</a> (boxlist, indices, fields=None, scope=None, use_static_shapes=False)</td></tr>
<tr class="separator:ab935f3907c57be324fe3e04a553aad0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bdc06a00ef29d99daeab567329d7421"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a7bdc06a00ef29d99daeab567329d7421">concatenate</a> (boxlists, fields=None, scope=None)</td></tr>
<tr class="separator:a7bdc06a00ef29d99daeab567329d7421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a103f0e0e0eeb3193514895e6b2c9ba94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a103f0e0e0eeb3193514895e6b2c9ba94">sort_by_field</a> (boxlist, field, order=<a class="el" href="../../de/d0f/classdetection__utils_1_1core_1_1box__list__ops_1_1_sort_order.html#a50eb8b077a78822f0085d91664f9226d">SortOrder.descend</a>, scope=None)</td></tr>
<tr class="separator:a103f0e0e0eeb3193514895e6b2c9ba94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab18840a73551ff7a36605bc8e53552e4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab18840a73551ff7a36605bc8e53552e4">visualize_boxes_in_image</a> (image, boxlist, normalized=False, scope=None)</td></tr>
<tr class="separator:ab18840a73551ff7a36605bc8e53552e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a704393f594559cb69a017b29adfb0eab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a704393f594559cb69a017b29adfb0eab">filter_field_value_equals</a> (boxlist, field, value, scope=None)</td></tr>
<tr class="separator:a704393f594559cb69a017b29adfb0eab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af19b9892d46f5558103b58fb131dc5c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#af19b9892d46f5558103b58fb131dc5c5">filter_greater_than</a> (boxlist, thresh, scope=None)</td></tr>
<tr class="separator:af19b9892d46f5558103b58fb131dc5c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f53127d0876cf0b4ab378bf7d2e2ef1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a4f53127d0876cf0b4ab378bf7d2e2ef1">non_max_suppression</a> (boxlist, thresh, max_output_size, scope=None)</td></tr>
<tr class="separator:a4f53127d0876cf0b4ab378bf7d2e2ef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3627514ae9ddcaf45f6039284657db24"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a3627514ae9ddcaf45f6039284657db24">_copy_extra_fields</a> (boxlist_to_copy_to, boxlist_to_copy_from)</td></tr>
<tr class="separator:a3627514ae9ddcaf45f6039284657db24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a6b7f0a6aa75c518f14f90c8480c146"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a8a6b7f0a6aa75c518f14f90c8480c146">to_normalized_coordinates</a> (boxlist, height, width, check_range=True, scope=None)</td></tr>
<tr class="separator:a8a6b7f0a6aa75c518f14f90c8480c146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada89676fbe54301964c23a14e0260a8c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ada89676fbe54301964c23a14e0260a8c">to_absolute_coordinates</a> (boxlist, height, width, check_range=True, maximum_normalized_coordinate=1.1, scope=None)</td></tr>
<tr class="separator:ada89676fbe54301964c23a14e0260a8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94cd2ba48717a3b24c2889ac73e749f9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a94cd2ba48717a3b24c2889ac73e749f9">refine_boxes_multi_class</a> (pool_boxes, num_classes, nms_iou_thresh, nms_max_detections, voting_iou_thresh=0.5)</td></tr>
<tr class="separator:a94cd2ba48717a3b24c2889ac73e749f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7763ebbaf43a4450d6ae5d0fe88398a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a7763ebbaf43a4450d6ae5d0fe88398a7">refine_boxes</a> (pool_boxes, nms_iou_thresh, nms_max_detections, voting_iou_thresh=0.5)</td></tr>
<tr class="separator:a7763ebbaf43a4450d6ae5d0fe88398a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d89634b5541a267c532cd81b4abaf64"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a6d89634b5541a267c532cd81b4abaf64">box_voting</a> (selected_boxes, pool_boxes, iou_thresh=0.5)</td></tr>
<tr class="separator:a6d89634b5541a267c532cd81b4abaf64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7ee814b54c928c4600ce5f111e6b51b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ad7ee814b54c928c4600ce5f111e6b51b">pad_or_clip_box_list</a> (boxlist, num_boxes, scope=None)</td></tr>
<tr class="separator:ad7ee814b54c928c4600ce5f111e6b51b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bce696e11d0578132e9c0e56ab93167"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a4bce696e11d0578132e9c0e56ab93167">select_random_box</a> (boxlist, default_box=None, seed=None, scope=None)</td></tr>
<tr class="separator:a4bce696e11d0578132e9c0e56ab93167"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab20486b60634ec258c5e24dbc5f64e52"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab20486b60634ec258c5e24dbc5f64e52">get_minimal_coverage_box</a> (boxlist, default_box=None, scope=None)</td></tr>
<tr class="separator:ab20486b60634ec258c5e24dbc5f64e52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15808676e298dede166cab386896e46c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a15808676e298dede166cab386896e46c">sample_boxes_by_jittering</a> (boxlist, num_boxes_to_sample, stddev=0.1, scope=None)</td></tr>
<tr class="separator:a15808676e298dede166cab386896e46c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Bounding Box List operations.

Example box operations that are supported:
  * areas: compute bounding box areas
  * iou: pairwise intersection-over-union scores
  * sq_dist: pairwise distances between bounding boxes

Whenever box_list_ops functions output a BoxList, the fields of the incoming
BoxList are retained unless documented otherwise.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a3627514ae9ddcaf45f6039284657db24" name="a3627514ae9ddcaf45f6039284657db24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3627514ae9ddcaf45f6039284657db24">&#9670;&#160;</a></span>_copy_extra_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops._copy_extra_fields </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist_to_copy_to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist_to_copy_from</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Copies the extra fields of boxlist_to_copy_from to boxlist_to_copy_to.

Args:
  boxlist_to_copy_to: BoxList to which extra fields are copied.
  boxlist_to_copy_from: BoxList from which fields are copied.

Returns:
  boxlist_to_copy_to with extra fields.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00757">757</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  757</span><span class="keyword">def </span>_copy_extra_fields(boxlist_to_copy_to, boxlist_to_copy_from):</div>
<div class="line"><span class="lineno">  758</span>  <span class="stringliteral">&quot;&quot;&quot;Copies the extra fields of boxlist_to_copy_from to boxlist_to_copy_to.</span></div>
<div class="line"><span class="lineno">  759</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  760</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  761</span><span class="stringliteral">    boxlist_to_copy_to: BoxList to which extra fields are copied.</span></div>
<div class="line"><span class="lineno">  762</span><span class="stringliteral">    boxlist_to_copy_from: BoxList </span><span class="keyword">from</span> which fields are copied.</div>
<div class="line"><span class="lineno">  763</span> </div>
<div class="line"><span class="lineno">  764</span>  Returns:</div>
<div class="line"><span class="lineno">  765</span>    boxlist_to_copy_to <span class="keyword">with</span> extra fields.</div>
<div class="line"><span class="lineno">  766</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  767</span><span class="stringliteral">  </span><span class="keywordflow">for</span> field <span class="keywordflow">in</span> boxlist_to_copy_from.get_extra_fields():</div>
<div class="line"><span class="lineno">  768</span>    boxlist_to_copy_to.add_field(field, boxlist_to_copy_from.get_field(field))</div>
<div class="line"><span class="lineno">  769</span>  <span class="keywordflow">return</span> boxlist_to_copy_to</div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a3627514ae9ddcaf45f6039284657db24_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a3627514ae9ddcaf45f6039284657db24_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a3627514ae9ddcaf45f6039284657db24_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a3627514ae9ddcaf45f6039284657db24_icgraph">
<area shape="rect" title=" " alt="" coords="701,105,888,145"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a6d89634b5541a267c532cd81b4abaf64" title=" " alt="" coords="491,15,651,55"/>
<area shape="poly" title=" " alt="" coords="730,102,621,58,623,53,732,97"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a725390a73d7d904bf824344014ed055c" title=" " alt="" coords="213,77,440,117"/>
<area shape="poly" title=" " alt="" coords="687,121,440,106,440,101,688,116"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a0c75cbd62f25f099ee47c6f50a22c12d" title=" " alt="" coords="488,133,653,173"/>
<area shape="poly" title=" " alt="" coords="688,141,654,145,653,140,687,135"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a890e93aacb6d9ba7532251c3047d53fd" title=" " alt="" coords="491,197,651,237"/>
<area shape="poly" title=" " alt="" coords="736,153,654,187,625,199,623,194,652,182,734,148"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a7763ebbaf43a4450d6ae5d0fe88398a7" title=" " alt="" coords="247,13,407,53"/>
<area shape="poly" title=" " alt="" coords="477,37,407,36,407,31,477,32"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a94cd2ba48717a3b24c2889ac73e749f9" title=" " alt="" coords="5,5,165,60"/>
<area shape="poly" title=" " alt="" coords="233,35,165,35,165,30,233,30"/>
<area shape="poly" title=" " alt="" coords="495,192,486,187,471,172,462,158,453,144,438,131,416,119,418,114,442,126,457,140,467,155,475,169,490,183,498,188"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ada89676fbe54301964c23a14e0260a8c" title=" " alt="" coords="217,141,436,181"/>
<area shape="poly" title=" " alt="" coords="476,198,414,183,415,178,478,193"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a8a6b7f0a6aa75c518f14f90c8480c146" title=" " alt="" coords="247,205,407,260"/>
<area shape="poly" title=" " alt="" coords="477,225,407,230,407,225,477,220"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab18840a73551ff7a36605bc8e53552e4" title=" " alt="" coords="242,284,411,339"/>
<area shape="poly" title=" " alt="" coords="514,245,441,275,411,286,409,281,439,270,512,240"/>
</map>
</div>

</div>
</div>
<a id="a92898db065feb66a9559123f5dc1190e" name="a92898db065feb66a9559123f5dc1190e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92898db065feb66a9559123f5dc1190e">&#9670;&#160;</a></span>area()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.area </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Computes area of boxes.

Args:
  boxlist: BoxList holding N boxes
  scope: name scope.

Returns:
  a tensor with shape [N] representing box areas.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00049">49</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   49</span><span class="keyword">def </span>area(boxlist, scope=None):</div>
<div class="line"><span class="lineno">   50</span>  <span class="stringliteral">&quot;&quot;&quot;Computes area of boxes.</span></div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">    boxlist: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">    scope: name scope.</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">    a tensor </span><span class="keyword">with</span> shape [N] representing box areas.</div>
<div class="line"><span class="lineno">   58</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;Area&#39;</span>):</div>
<div class="line"><span class="lineno">   60</span>    y_min, x_min, y_max, x_max = tf.split(</div>
<div class="line"><span class="lineno">   61</span>        value=boxlist.get(), num_or_size_splits=4, axis=1)</div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordflow">return</span> tf.squeeze((y_max - y_min) * (x_max - x_min), [1])</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a92898db065feb66a9559123f5dc1190e_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a92898db065feb66a9559123f5dc1190e_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a92898db065feb66a9559123f5dc1190e_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a92898db065feb66a9559123f5dc1190e_icgraph">
<area shape="rect" title=" " alt="" coords="933,125,1093,165"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a0c75cbd62f25f099ee47c6f50a22c12d" title=" " alt="" coords="720,5,885,45"/>
<area shape="poly" title=" " alt="" coords="975,119,932,89,884,60,859,48,861,43,887,55,935,85,978,115"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a9e0ac719b5e09ec7392954a9c9fe4174" title=" " alt="" coords="723,93,883,133"/>
<area shape="poly" title=" " alt="" coords="919,134,883,128,883,123,920,128"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a0c3ceb43da9213d701fe159dd5ab3b16" title=" " alt="" coords="723,157,883,197"/>
<area shape="poly" title=" " alt="" coords="920,162,883,168,883,163,919,157"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a9fad601f99641baf7fda27235c4723a0" title=" " alt="" coords="723,221,883,261"/>
<area shape="poly" title=" " alt="" coords="963,174,886,212,858,224,856,219,884,207,961,170"/>
<area shape="poly" title=" " alt="" coords="838,82,826,75,803,72,782,74,770,79,766,85,768,92,763,94,761,84,767,74,781,69,803,67,827,70,841,77"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a71b57b4bfadf9a8c24875f06c894ec79" title=" " alt="" coords="421,93,672,133"/>
<area shape="poly" title=" " alt="" coords="709,116,672,116,672,111,709,111"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a6d89634b5541a267c532cd81b4abaf64" title=" " alt="" coords="467,157,627,197"/>
<area shape="poly" title=" " alt="" coords="709,180,627,180,627,175,709,175"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a7763ebbaf43a4450d6ae5d0fe88398a7" title=" " alt="" coords="213,157,373,197"/>
<area shape="poly" title=" " alt="" coords="453,180,374,180,374,175,453,175"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a94cd2ba48717a3b24c2889ac73e749f9" title=" " alt="" coords="5,150,165,205"/>
<area shape="poly" title=" " alt="" coords="200,180,166,180,166,175,200,175"/>
</map>
</div>

</div>
</div>
<a id="ad52cd56fc9dc0a632dd326e489bd1399" name="ad52cd56fc9dc0a632dd326e489bd1399"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad52cd56fc9dc0a632dd326e489bd1399">&#9670;&#160;</a></span>boolean_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.boolean_mask </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>indicator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fields</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>use_static_shapes</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>indicator_sum</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Select boxes from BoxList according to indicator and return new BoxList.

`boolean_mask` returns the subset of boxes that are marked as "True" by the
indicator tensor. By default, `boolean_mask` returns boxes corresponding to
the input index list, as well as all additional fields stored in the boxlist
(indexing into the first dimension).  However one can optionally only draw
from a subset of fields.

Args:
  boxlist: BoxList holding N boxes
  indicator: a rank-1 boolean tensor
  fields: (optional) list of fields to also gather from.  If None (default),
    all fields are gathered from.  Pass an empty fields list to only gather
    the box coordinates.
  scope: name scope.
  use_static_shapes: Whether to use an implementation with static shape
    gurantees.
  indicator_sum: An integer containing the sum of `indicator` vector. Only
    required if `use_static_shape` is True.

Returns:
  subboxlist: a BoxList corresponding to the subset of the input BoxList
    specified by indicator
Raises:
  ValueError: if `indicator` is not a rank-1 boolean tensor.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00429">429</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  430</span>                 use_static_shapes=<span class="keyword">False</span>, indicator_sum=<span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno">  431</span>  <span class="stringliteral">&quot;&quot;&quot;Select boxes from BoxList according to indicator and return new BoxList.</span></div>
<div class="line"><span class="lineno">  432</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  433</span><span class="stringliteral">  `boolean_mask` returns the subset of boxes that are marked </span><span class="keyword">as</span> <span class="stringliteral">&quot;True&quot;</span> by the</div>
<div class="line"><span class="lineno">  434</span>  indicator tensor. By default, `boolean_mask` returns boxes corresponding to</div>
<div class="line"><span class="lineno">  435</span>  the input index list, <span class="keyword">as</span> well <span class="keyword">as</span> all additional fields stored <span class="keywordflow">in</span> the boxlist</div>
<div class="line"><span class="lineno">  436</span>  (indexing into the first dimension).  However one can optionally only draw</div>
<div class="line"><span class="lineno">  437</span>  <span class="keyword">from</span> a subset of fields.</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>  Args:</div>
<div class="line"><span class="lineno">  440</span>    boxlist: BoxList holding N boxes</div>
<div class="line"><span class="lineno">  441</span>    indicator: a rank-1 boolean tensor</div>
<div class="line"><span class="lineno">  442</span>    fields: (optional) list of fields to also gather <span class="keyword">from</span>.  If <span class="keywordtype">None</span> (default),</div>
<div class="line"><span class="lineno">  443</span>      all fields are gathered <span class="keyword">from</span>.  Pass an empty fields list to only gather</div>
<div class="line"><span class="lineno">  444</span>      the box coordinates.</div>
<div class="line"><span class="lineno">  445</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  446</span>    use_static_shapes: Whether to use an implementation <span class="keyword">with</span> static shape</div>
<div class="line"><span class="lineno">  447</span>      gurantees.</div>
<div class="line"><span class="lineno">  448</span>    indicator_sum: An integer containing the sum of `indicator` vector. Only</div>
<div class="line"><span class="lineno">  449</span>      required <span class="keywordflow">if</span> `use_static_shape` <span class="keywordflow">is</span> <span class="keyword">True</span>.</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>  Returns:</div>
<div class="line"><span class="lineno">  452</span>    subboxlist: a BoxList corresponding to the subset of the input BoxList</div>
<div class="line"><span class="lineno">  453</span>      specified by indicator</div>
<div class="line"><span class="lineno">  454</span>  Raises:</div>
<div class="line"><span class="lineno">  455</span>    ValueError: <span class="keywordflow">if</span> `indicator` <span class="keywordflow">is</span> <span class="keywordflow">not</span> a rank-1 boolean tensor.</div>
<div class="line"><span class="lineno">  456</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  457</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;BooleanMask&#39;</span>):</div>
<div class="line"><span class="lineno">  458</span>    <span class="keywordflow">if</span> indicator.shape.ndims != 1:</div>
<div class="line"><span class="lineno">  459</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;indicator should have rank 1&#39;</span>)</div>
<div class="line"><span class="lineno">  460</span>    <span class="keywordflow">if</span> indicator.dtype != tf.bool:</div>
<div class="line"><span class="lineno">  461</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;indicator should be a boolean tensor&#39;</span>)</div>
<div class="line"><span class="lineno">  462</span>    <span class="keywordflow">if</span> use_static_shapes:</div>
<div class="line"><span class="lineno">  463</span>      <span class="keywordflow">if</span> <span class="keywordflow">not</span> (indicator_sum <span class="keywordflow">and</span> isinstance(indicator_sum, int)):</div>
<div class="line"><span class="lineno">  464</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;`indicator_sum` must be a of type int&#39;</span>)</div>
<div class="line"><span class="lineno">  465</span>      selected_positions = tf.cast(indicator, dtype=tf.float32)</div>
<div class="line"><span class="lineno">  466</span>      indexed_positions = tf.cast(</div>
<div class="line"><span class="lineno">  467</span>          tf.multiply(</div>
<div class="line"><span class="lineno">  468</span>              tf.cumsum(selected_positions), selected_positions),</div>
<div class="line"><span class="lineno">  469</span>          dtype=tf.int32)</div>
<div class="line"><span class="lineno">  470</span>      one_hot_selector = tf.one_hot(</div>
<div class="line"><span class="lineno">  471</span>          indexed_positions - 1, indicator_sum, dtype=tf.float32)</div>
<div class="line"><span class="lineno">  472</span>      sampled_indices = tf.cast(</div>
<div class="line"><span class="lineno">  473</span>          tf.tensordot(</div>
<div class="line"><span class="lineno">  474</span>              tf.cast(tf.range(tf.shape(indicator)[0]), dtype=tf.float32),</div>
<div class="line"><span class="lineno">  475</span>              one_hot_selector,</div>
<div class="line"><span class="lineno">  476</span>              axes=[0, 0]),</div>
<div class="line"><span class="lineno">  477</span>          dtype=tf.int32)</div>
<div class="line"><span class="lineno">  478</span>      <span class="keywordflow">return</span> gather(boxlist, sampled_indices, use_static_shapes=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  479</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  480</span>      subboxlist = box_list.BoxList(tf.boolean_mask(boxlist.get(), indicator))</div>
<div class="line"><span class="lineno">  481</span>      <span class="keywordflow">if</span> fields <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  482</span>        fields = boxlist.get_extra_fields()</div>
<div class="line"><span class="lineno">  483</span>      <span class="keywordflow">for</span> field <span class="keywordflow">in</span> fields:</div>
<div class="line"><span class="lineno">  484</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> boxlist.has_field(field):</div>
<div class="line"><span class="lineno">  485</span>          <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlist must contain all specified fields&#39;</span>)</div>
<div class="line"><span class="lineno">  486</span>        subfieldlist = tf.boolean_mask(boxlist.get_field(field), indicator)</div>
<div class="line"><span class="lineno">  487</span>        subboxlist.add_field(field, subfieldlist)</div>
<div class="line"><span class="lineno">  488</span>      <span class="keywordflow">return</span> subboxlist</div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ad52cd56fc9dc0a632dd326e489bd1399_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ad52cd56fc9dc0a632dd326e489bd1399_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ad52cd56fc9dc0a632dd326e489bd1399_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ad52cd56fc9dc0a632dd326e489bd1399_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,168,45"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab935f3907c57be324fe3e04a553aad0b" title=" " alt="" coords="216,5,376,45"/>
<area shape="poly" title=" " alt="" coords="168,23,202,23,202,28,168,28"/>
</map>
</div>

</div>
</div>
<a id="a6d89634b5541a267c532cd81b4abaf64" name="a6d89634b5541a267c532cd81b4abaf64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d89634b5541a267c532cd81b4abaf64">&#9670;&#160;</a></span>box_voting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.box_voting </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>selected_boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pool_boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>iou_thresh</em> = <code>0.5</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Performs box voting as described in S. Gidaris and N. Komodakis, ICCV 2015.

Performs box voting as described in 'Object detection via a multi-region &amp;
semantic segmentation-aware CNN model', Gidaris and Komodakis, ICCV 2015. For
each box 'B' in selected_boxes, we find the set 'S' of boxes in pool_boxes
with iou overlap &gt;= iou_thresh. The location of B is set to the weighted
average location of boxes in S (scores are used for weighting). And the score
of B is set to the average score of boxes in S.

Args:
  selected_boxes: BoxList containing a subset of boxes in pool_boxes. These
    boxes are usually selected from pool_boxes using non max suppression.
  pool_boxes: BoxList containing a set of (possibly redundant) boxes.
  iou_thresh: (float scalar) iou threshold for matching boxes in
    selected_boxes and pool_boxes.

Returns:
  BoxList containing averaged locations and scores for each box in
  selected_boxes.

Raises:
  ValueError: if
    a) selected_boxes or pool_boxes is not a BoxList.
    b) if iou_thresh is not in [0, 1].
    c) pool_boxes does not have a scores field.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00933">933</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  933</span><span class="keyword">def </span>box_voting(selected_boxes, pool_boxes, iou_thresh=0.5):</div>
<div class="line"><span class="lineno">  934</span>  <span class="stringliteral">&quot;&quot;&quot;Performs box voting as described in S. Gidaris and N. Komodakis, ICCV 2015.</span></div>
<div class="line"><span class="lineno">  935</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  936</span><span class="stringliteral">  Performs box voting </span><span class="keyword">as</span> described <span class="keywordflow">in</span> <span class="stringliteral">&#39;Object detection via a multi-region &amp;</span></div>
<div class="line"><span class="lineno">  937</span><span class="stringliteral">  semantic segmentation-aware CNN model&#39;, Gidaris and Komodakis, ICCV 2015. For</span></div>
<div class="line"><span class="lineno">  938</span><span class="stringliteral">  each box &#39;B&#39;</span> <span class="keywordflow">in</span> selected_boxes, we find the set <span class="stringliteral">&#39;S&#39;</span> of boxes <span class="keywordflow">in</span> pool_boxes</div>
<div class="line"><span class="lineno">  939</span>  <span class="keyword">with</span> iou overlap &gt;= iou_thresh. The location of B <span class="keywordflow">is</span> set to the weighted</div>
<div class="line"><span class="lineno">  940</span>  average location of boxes <span class="keywordflow">in</span> S (scores are used <span class="keywordflow">for</span> weighting). And the score</div>
<div class="line"><span class="lineno">  941</span>  of B <span class="keywordflow">is</span> set to the average score of boxes <span class="keywordflow">in</span> S.</div>
<div class="line"><span class="lineno">  942</span> </div>
<div class="line"><span class="lineno">  943</span>  Args:</div>
<div class="line"><span class="lineno">  944</span>    selected_boxes: BoxList containing a subset of boxes <span class="keywordflow">in</span> pool_boxes. These</div>
<div class="line"><span class="lineno">  945</span>      boxes are usually selected <span class="keyword">from</span> pool_boxes using non max suppression.</div>
<div class="line"><span class="lineno">  946</span>    pool_boxes: BoxList containing a set of (possibly redundant) boxes.</div>
<div class="line"><span class="lineno">  947</span>    iou_thresh: (float scalar) iou threshold <span class="keywordflow">for</span> matching boxes <span class="keywordflow">in</span></div>
<div class="line"><span class="lineno">  948</span>      selected_boxes <span class="keywordflow">and</span> pool_boxes.</div>
<div class="line"><span class="lineno">  949</span> </div>
<div class="line"><span class="lineno">  950</span>  Returns:</div>
<div class="line"><span class="lineno">  951</span>    BoxList containing averaged locations <span class="keywordflow">and</span> scores <span class="keywordflow">for</span> each box <span class="keywordflow">in</span></div>
<div class="line"><span class="lineno">  952</span>    selected_boxes.</div>
<div class="line"><span class="lineno">  953</span> </div>
<div class="line"><span class="lineno">  954</span>  Raises:</div>
<div class="line"><span class="lineno">  955</span>    ValueError: <span class="keywordflow">if</span></div>
<div class="line"><span class="lineno">  956</span>      a) selected_boxes <span class="keywordflow">or</span> pool_boxes <span class="keywordflow">is</span> <span class="keywordflow">not</span> a BoxList.</div>
<div class="line"><span class="lineno">  957</span>      b) <span class="keywordflow">if</span> iou_thresh <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> [0, 1].</div>
<div class="line"><span class="lineno">  958</span>      c) pool_boxes does <span class="keywordflow">not</span> have a scores field.</div>
<div class="line"><span class="lineno">  959</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  960</span><span class="stringliteral">  </span><span class="keywordflow">if</span> <span class="keywordflow">not</span> 0.0 &lt;= iou_thresh &lt;= 1.0:</div>
<div class="line"><span class="lineno">  961</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;iou_thresh must be between 0 and 1&#39;</span>)</div>
<div class="line"><span class="lineno">  962</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(selected_boxes, box_list.BoxList):</div>
<div class="line"><span class="lineno">  963</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;selected_boxes must be a BoxList&#39;</span>)</div>
<div class="line"><span class="lineno">  964</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(pool_boxes, box_list.BoxList):</div>
<div class="line"><span class="lineno">  965</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;pool_boxes must be a BoxList&#39;</span>)</div>
<div class="line"><span class="lineno">  966</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> pool_boxes.has_field(<span class="stringliteral">&#39;scores&#39;</span>):</div>
<div class="line"><span class="lineno">  967</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;pool_boxes must have a \&#39;scores\&#39; field&#39;</span>)</div>
<div class="line"><span class="lineno">  968</span> </div>
<div class="line"><span class="lineno">  969</span>  iou_ = iou(selected_boxes, pool_boxes)</div>
<div class="line"><span class="lineno">  970</span>  match_indicator = tf.cast(tf.greater(iou_, iou_thresh), dtype=tf.float32)</div>
<div class="line"><span class="lineno">  971</span>  num_matches = tf.reduce_sum(match_indicator, 1)</div>
<div class="line"><span class="lineno">  972</span>  <span class="comment"># TODO(kbanoop): Handle the case where some boxes in selected_boxes do not</span></div>
<div class="line"><span class="lineno">  973</span>  <span class="comment"># match to any boxes in pool_boxes. For such boxes without any matches, we</span></div>
<div class="line"><span class="lineno">  974</span>  <span class="comment"># should return the original boxes without voting.</span></div>
<div class="line"><span class="lineno">  975</span>  match_assert = tf.Assert(</div>
<div class="line"><span class="lineno">  976</span>      tf.reduce_all(tf.greater(num_matches, 0)),</div>
<div class="line"><span class="lineno">  977</span>      [<span class="stringliteral">&#39;Each box in selected_boxes must match with at least one box &#39;</span></div>
<div class="line"><span class="lineno">  978</span>       <span class="stringliteral">&#39;in pool_boxes.&#39;</span>])</div>
<div class="line"><span class="lineno">  979</span> </div>
<div class="line"><span class="lineno">  980</span>  scores = tf.expand_dims(pool_boxes.get_field(<span class="stringliteral">&#39;scores&#39;</span>), 1)</div>
<div class="line"><span class="lineno">  981</span>  scores_assert = tf.Assert(</div>
<div class="line"><span class="lineno">  982</span>      tf.reduce_all(tf.greater_equal(scores, 0)),</div>
<div class="line"><span class="lineno">  983</span>      [<span class="stringliteral">&#39;Scores must be non negative.&#39;</span>])</div>
<div class="line"><span class="lineno">  984</span> </div>
<div class="line"><span class="lineno">  985</span>  <span class="keyword">with</span> tf.control_dependencies([scores_assert, match_assert]):</div>
<div class="line"><span class="lineno">  986</span>    sum_scores = tf.matmul(match_indicator, scores)</div>
<div class="line"><span class="lineno">  987</span>  averaged_scores = tf.reshape(sum_scores, [-1]) / num_matches</div>
<div class="line"><span class="lineno">  988</span> </div>
<div class="line"><span class="lineno">  989</span>  box_locations = tf.matmul(match_indicator,</div>
<div class="line"><span class="lineno">  990</span>                            pool_boxes.get() * scores) / sum_scores</div>
<div class="line"><span class="lineno">  991</span>  averaged_boxes = box_list.BoxList(box_locations)</div>
<div class="line"><span class="lineno">  992</span>  _copy_extra_fields(averaged_boxes, selected_boxes)</div>
<div class="line"><span class="lineno">  993</span>  averaged_boxes.add_field(<span class="stringliteral">&#39;scores&#39;</span>, averaged_scores)</div>
<div class="line"><span class="lineno">  994</span>  <span class="keywordflow">return</span> averaged_boxes</div>
<div class="line"><span class="lineno">  995</span> </div>
<div class="line"><span class="lineno">  996</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a6d89634b5541a267c532cd81b4abaf64_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a6d89634b5541a267c532cd81b4abaf64_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a6d89634b5541a267c532cd81b4abaf64_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a6d89634b5541a267c532cd81b4abaf64_cgraph">
<area shape="rect" title=" " alt="" coords="5,37,165,77"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a3627514ae9ddcaf45f6039284657db24" title=" " alt="" coords="213,5,400,45"/>
<area shape="poly" title=" " alt="" coords="165,43,199,38,200,43,166,48"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a0c3ceb43da9213d701fe159dd5ab3b16" title=" " alt="" coords="227,69,387,109"/>
<area shape="poly" title=" " alt="" coords="166,66,213,73,212,78,165,72"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a92898db065feb66a9559123f5dc1190e" title=" " alt="" coords="448,37,608,77"/>
<area shape="poly" title=" " alt="" coords="387,75,434,68,435,74,387,80"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#afd15da7dda22daae6756580f198e34da" title=" " alt="" coords="448,101,608,141"/>
<area shape="poly" title=" " alt="" coords="387,98,435,105,434,110,387,104"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a6d89634b5541a267c532cd81b4abaf64_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a6d89634b5541a267c532cd81b4abaf64_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a6d89634b5541a267c532cd81b4abaf64_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a6d89634b5541a267c532cd81b4abaf64_icgraph">
<area shape="rect" title=" " alt="" coords="421,13,581,53"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a7763ebbaf43a4450d6ae5d0fe88398a7" title=" " alt="" coords="213,13,373,53"/>
<area shape="poly" title=" " alt="" coords="408,35,374,35,374,30,408,30"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a94cd2ba48717a3b24c2889ac73e749f9" title=" " alt="" coords="5,5,165,60"/>
<area shape="poly" title=" " alt="" coords="200,35,166,35,166,30,200,30"/>
</map>
</div>

</div>
</div>
<a id="a725390a73d7d904bf824344014ed055c" name="a725390a73d7d904bf824344014ed055c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a725390a73d7d904bf824344014ed055c">&#9670;&#160;</a></span>change_coordinate_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.change_coordinate_frame </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Change coordinate frame of the boxlist to be relative to window's frame.

Given a window of the form [ymin, xmin, ymax, xmax],
changes bounding box coordinates from boxlist to be relative to this window
(e.g., the min corner maps to (0,0) and the max corner maps to (1,1)).

An example use case is data augmentation: where we are given groundtruth
boxes (boxlist) and would like to randomly crop the image to some
window (window). In this case we need to change the coordinate frame of
each groundtruth box to be relative to this new window.

Args:
  boxlist: A BoxList object holding N boxes.
  window: A rank 1 tensor [4].
  scope: name scope.

Returns:
  Returns a BoxList object with N boxes.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00370">370</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  370</span><span class="keyword">def </span>change_coordinate_frame(boxlist, window, scope=None):</div>
<div class="line"><span class="lineno">  371</span>  <span class="stringliteral">&quot;&quot;&quot;Change coordinate frame of the boxlist to be relative to window&#39;s frame.</span></div>
<div class="line"><span class="lineno">  372</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  373</span><span class="stringliteral">  Given a window of the form [ymin, xmin, ymax, xmax],</span></div>
<div class="line"><span class="lineno">  374</span><span class="stringliteral">  changes bounding box coordinates </span><span class="keyword">from</span> boxlist to be relative to this window</div>
<div class="line"><span class="lineno">  375</span>  (e.g., the min corner maps to (0,0) <span class="keywordflow">and</span> the max corner maps to (1,1)).</div>
<div class="line"><span class="lineno">  376</span> </div>
<div class="line"><span class="lineno">  377</span>  An example use case <span class="keywordflow">is</span> data augmentation: where we are given groundtruth</div>
<div class="line"><span class="lineno">  378</span>  boxes (boxlist) <span class="keywordflow">and</span> would like to randomly crop the image to some</div>
<div class="line"><span class="lineno">  379</span>  window (window). In this case we need to change the coordinate frame of</div>
<div class="line"><span class="lineno">  380</span>  each groundtruth box to be relative to this new window.</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>  Args:</div>
<div class="line"><span class="lineno">  383</span>    boxlist: A BoxList object holding N boxes.</div>
<div class="line"><span class="lineno">  384</span>    window: A rank 1 tensor [4].</div>
<div class="line"><span class="lineno">  385</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>  Returns:</div>
<div class="line"><span class="lineno">  388</span>    Returns a BoxList object <span class="keyword">with</span> N boxes.</div>
<div class="line"><span class="lineno">  389</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  390</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;ChangeCoordinateFrame&#39;</span>):</div>
<div class="line"><span class="lineno">  391</span>    win_height = window[2] - window[0]</div>
<div class="line"><span class="lineno">  392</span>    win_width = window[3] - window[1]</div>
<div class="line"><span class="lineno">  393</span>    boxlist_new = scale(box_list.BoxList(</div>
<div class="line"><span class="lineno">  394</span>        boxlist.get() - [window[0], window[1], window[0], window[1]]),</div>
<div class="line"><span class="lineno">  395</span>                        1.0 / win_height, 1.0 / win_width)</div>
<div class="line"><span class="lineno">  396</span>    boxlist_new = _copy_extra_fields(boxlist_new, boxlist)</div>
<div class="line"><span class="lineno">  397</span>    <span class="keywordflow">return</span> boxlist_new</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a725390a73d7d904bf824344014ed055c_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a725390a73d7d904bf824344014ed055c_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a725390a73d7d904bf824344014ed055c_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a725390a73d7d904bf824344014ed055c_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,232,45"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a3627514ae9ddcaf45f6039284657db24" title=" " alt="" coords="488,5,675,45"/>
<area shape="poly" title=" " alt="" coords="232,20,280,19,440,19,474,19,474,25,440,24,280,24,232,25"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a890e93aacb6d9ba7532251c3047d53fd" title=" " alt="" coords="280,33,440,73"/>
<area shape="poly" title=" " alt="" coords="233,36,267,40,266,45,232,41"/>
<area shape="poly" title=" " alt="" coords="440,41,474,36,475,42,441,46"/>
</map>
</div>

</div>
</div>
<a id="a0c75cbd62f25f099ee47c6f50a22c12d" name="a0c75cbd62f25f099ee47c6f50a22c12d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c75cbd62f25f099ee47c6f50a22c12d">&#9670;&#160;</a></span>clip_to_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.clip_to_window </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filter_nonoverlapping</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Clip bounding boxes to a window.

This op clips any input bounding boxes (represented by bounding box
corners) to a window, optionally filtering out boxes that do not
overlap at all with the window.

Args:
  boxlist: BoxList holding M_in boxes
  window: a tensor of shape [4] representing the [y_min, x_min, y_max, x_max]
    window to which the op should clip boxes.
  filter_nonoverlapping: whether to filter out boxes that do not overlap at
    all with the window.
  scope: name scope.

Returns:
  a BoxList holding M_out boxes where M_out &lt;= M_in
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00108">108</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  108</span><span class="keyword">def </span>clip_to_window(boxlist, window, filter_nonoverlapping=True, scope=None):</div>
<div class="line"><span class="lineno">  109</span>  <span class="stringliteral">&quot;&quot;&quot;Clip bounding boxes to a window.</span></div>
<div class="line"><span class="lineno">  110</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  111</span><span class="stringliteral">  This op clips any input bounding boxes (represented by bounding box</span></div>
<div class="line"><span class="lineno">  112</span><span class="stringliteral">  corners) to a window, optionally filtering out boxes that do </span><span class="keywordflow">not</span></div>
<div class="line"><span class="lineno">  113</span>  overlap at all <span class="keyword">with</span> the window.</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>  Args:</div>
<div class="line"><span class="lineno">  116</span>    boxlist: BoxList holding M_in boxes</div>
<div class="line"><span class="lineno">  117</span>    window: a tensor of shape [4] representing the [y_min, x_min, y_max, x_max]</div>
<div class="line"><span class="lineno">  118</span>      window to which the op should clip boxes.</div>
<div class="line"><span class="lineno">  119</span>    filter_nonoverlapping: whether to filter out boxes that do <span class="keywordflow">not</span> overlap at</div>
<div class="line"><span class="lineno">  120</span>      all <span class="keyword">with</span> the window.</div>
<div class="line"><span class="lineno">  121</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>  Returns:</div>
<div class="line"><span class="lineno">  124</span>    a BoxList holding M_out boxes where M_out &lt;= M_in</div>
<div class="line"><span class="lineno">  125</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  126</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;ClipToWindow&#39;</span>):</div>
<div class="line"><span class="lineno">  127</span>    y_min, x_min, y_max, x_max = tf.split(</div>
<div class="line"><span class="lineno">  128</span>        value=boxlist.get(), num_or_size_splits=4, axis=1)</div>
<div class="line"><span class="lineno">  129</span>    win_y_min, win_x_min, win_y_max, win_x_max = tf.unstack(window)</div>
<div class="line"><span class="lineno">  130</span>    y_min_clipped = tf.maximum(tf.minimum(y_min, win_y_max), win_y_min)</div>
<div class="line"><span class="lineno">  131</span>    y_max_clipped = tf.maximum(tf.minimum(y_max, win_y_max), win_y_min)</div>
<div class="line"><span class="lineno">  132</span>    x_min_clipped = tf.maximum(tf.minimum(x_min, win_x_max), win_x_min)</div>
<div class="line"><span class="lineno">  133</span>    x_max_clipped = tf.maximum(tf.minimum(x_max, win_x_max), win_x_min)</div>
<div class="line"><span class="lineno">  134</span>    clipped = box_list.BoxList(</div>
<div class="line"><span class="lineno">  135</span>        tf.concat([y_min_clipped, x_min_clipped, y_max_clipped, x_max_clipped],</div>
<div class="line"><span class="lineno">  136</span>                  1))</div>
<div class="line"><span class="lineno">  137</span>    clipped = _copy_extra_fields(clipped, boxlist)</div>
<div class="line"><span class="lineno">  138</span>    <span class="keywordflow">if</span> filter_nonoverlapping:</div>
<div class="line"><span class="lineno">  139</span>      areas = area(clipped)</div>
<div class="line"><span class="lineno">  140</span>      nonzero_area_indices = tf.cast(</div>
<div class="line"><span class="lineno">  141</span>          tf.reshape(tf.where(tf.greater(areas, 0.0)), [-1]), tf.int32)</div>
<div class="line"><span class="lineno">  142</span>      clipped = gather(clipped, nonzero_area_indices)</div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordflow">return</span> clipped</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a0c75cbd62f25f099ee47c6f50a22c12d_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a0c75cbd62f25f099ee47c6f50a22c12d_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a0c75cbd62f25f099ee47c6f50a22c12d_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a0c75cbd62f25f099ee47c6f50a22c12d_cgraph">
<area shape="rect" title=" " alt="" coords="5,69,171,109"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a3627514ae9ddcaf45f6039284657db24" title=" " alt="" coords="219,5,405,45"/>
<area shape="poly" title=" " alt="" coords="158,67,228,47,229,52,159,72"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a92898db065feb66a9559123f5dc1190e" title=" " alt="" coords="232,69,392,109"/>
<area shape="poly" title=" " alt="" coords="171,87,218,87,218,92,171,92"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab935f3907c57be324fe3e04a553aad0b" title=" " alt="" coords="232,133,392,173"/>
<area shape="poly" title=" " alt="" coords="159,107,229,127,228,132,158,112"/>
</map>
</div>

</div>
</div>
<a id="a7bdc06a00ef29d99daeab567329d7421" name="a7bdc06a00ef29d99daeab567329d7421"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bdc06a00ef29d99daeab567329d7421">&#9670;&#160;</a></span>concatenate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.concatenate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlists</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fields</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Concatenate list of BoxLists.

This op concatenates a list of input BoxLists into a larger BoxList.  It also
handles concatenation of BoxList fields as long as the field tensor shapes
are equal except for the first dimension.

Args:
  boxlists: list of BoxList objects
  fields: optional list of fields to also concatenate.  By default, all
    fields from the first BoxList in the list are included in the
    concatenation.
  scope: name scope.

Returns:
  a BoxList with number of boxes equal to
    sum([boxlist.num_boxes() for boxlist in BoxList])
Raises:
  ValueError: if boxlists is invalid (i.e., is not a list, is empty, or
    contains non BoxList objects), or if requested fields are not contained in
    all boxlists
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00536">536</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  536</span><span class="keyword">def </span>concatenate(boxlists, fields=None, scope=None):</div>
<div class="line"><span class="lineno">  537</span>  <span class="stringliteral">&quot;&quot;&quot;Concatenate list of BoxLists.</span></div>
<div class="line"><span class="lineno">  538</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  539</span><span class="stringliteral">  This op concatenates a list of input BoxLists into a larger BoxList.  It also</span></div>
<div class="line"><span class="lineno">  540</span><span class="stringliteral">  handles concatenation of BoxList fields </span><span class="keyword">as</span> long <span class="keyword">as</span> the field tensor shapes</div>
<div class="line"><span class="lineno">  541</span>  are equal <span class="keywordflow">except</span> <span class="keywordflow">for</span> the first dimension.</div>
<div class="line"><span class="lineno">  542</span> </div>
<div class="line"><span class="lineno">  543</span>  Args:</div>
<div class="line"><span class="lineno">  544</span>    boxlists: list of BoxList objects</div>
<div class="line"><span class="lineno">  545</span>    fields: optional list of fields to also concatenate.  By default, all</div>
<div class="line"><span class="lineno">  546</span>      fields <span class="keyword">from</span> the first BoxList <span class="keywordflow">in</span> the list are included <span class="keywordflow">in</span> the</div>
<div class="line"><span class="lineno">  547</span>      concatenation.</div>
<div class="line"><span class="lineno">  548</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  549</span> </div>
<div class="line"><span class="lineno">  550</span>  Returns:</div>
<div class="line"><span class="lineno">  551</span>    a BoxList <span class="keyword">with</span> number of boxes equal to</div>
<div class="line"><span class="lineno">  552</span>      sum([boxlist.num_boxes() <span class="keywordflow">for</span> boxlist <span class="keywordflow">in</span> BoxList])</div>
<div class="line"><span class="lineno">  553</span>  Raises:</div>
<div class="line"><span class="lineno">  554</span>    ValueError: <span class="keywordflow">if</span> boxlists <span class="keywordflow">is</span> invalid (i.e., <span class="keywordflow">is</span> <span class="keywordflow">not</span> a list, <span class="keywordflow">is</span> empty, <span class="keywordflow">or</span></div>
<div class="line"><span class="lineno">  555</span>      contains non BoxList objects), <span class="keywordflow">or</span> <span class="keywordflow">if</span> requested fields are <span class="keywordflow">not</span> contained <span class="keywordflow">in</span></div>
<div class="line"><span class="lineno">  556</span>      all boxlists</div>
<div class="line"><span class="lineno">  557</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  558</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;Concatenate&#39;</span>):</div>
<div class="line"><span class="lineno">  559</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(boxlists, list):</div>
<div class="line"><span class="lineno">  560</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlists should be a list&#39;</span>)</div>
<div class="line"><span class="lineno">  561</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> boxlists:</div>
<div class="line"><span class="lineno">  562</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlists should have nonzero length&#39;</span>)</div>
<div class="line"><span class="lineno">  563</span>    <span class="keywordflow">for</span> boxlist <span class="keywordflow">in</span> boxlists:</div>
<div class="line"><span class="lineno">  564</span>      <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(boxlist, box_list.BoxList):</div>
<div class="line"><span class="lineno">  565</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;all elements of boxlists should be BoxList objects&#39;</span>)</div>
<div class="line"><span class="lineno">  566</span>    concatenated = box_list.BoxList(</div>
<div class="line"><span class="lineno">  567</span>        tf.concat([boxlist.get() <span class="keywordflow">for</span> boxlist <span class="keywordflow">in</span> boxlists], 0))</div>
<div class="line"><span class="lineno">  568</span>    <span class="keywordflow">if</span> fields <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  569</span>      fields = boxlists[0].get_extra_fields()</div>
<div class="line"><span class="lineno">  570</span>    <span class="keywordflow">for</span> field <span class="keywordflow">in</span> fields:</div>
<div class="line"><span class="lineno">  571</span>      first_field_shape = boxlists[0].get_field(field).get_shape().as_list()</div>
<div class="line"><span class="lineno">  572</span>      first_field_shape[0] = -1</div>
<div class="line"><span class="lineno">  573</span>      <span class="keywordflow">if</span> <span class="keywordtype">None</span> <span class="keywordflow">in</span> first_field_shape:</div>
<div class="line"><span class="lineno">  574</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;field %s must have fully defined shape except for the&#39;</span></div>
<div class="line"><span class="lineno">  575</span>                         <span class="stringliteral">&#39; 0th dimension.&#39;</span> % field)</div>
<div class="line"><span class="lineno">  576</span>      <span class="keywordflow">for</span> boxlist <span class="keywordflow">in</span> boxlists:</div>
<div class="line"><span class="lineno">  577</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> boxlist.has_field(field):</div>
<div class="line"><span class="lineno">  578</span>          <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlist must contain all requested fields&#39;</span>)</div>
<div class="line"><span class="lineno">  579</span>        field_shape = boxlist.get_field(field).get_shape().as_list()</div>
<div class="line"><span class="lineno">  580</span>        field_shape[0] = -1</div>
<div class="line"><span class="lineno">  581</span>        <span class="keywordflow">if</span> field_shape != first_field_shape:</div>
<div class="line"><span class="lineno">  582</span>          <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;field %s must have same shape for all boxlists &#39;</span></div>
<div class="line"><span class="lineno">  583</span>                           <span class="stringliteral">&#39;except for the 0th dimension.&#39;</span> % field)</div>
<div class="line"><span class="lineno">  584</span>      concatenated_field = tf.concat(</div>
<div class="line"><span class="lineno">  585</span>          [boxlist.get_field(field) <span class="keywordflow">for</span> boxlist <span class="keywordflow">in</span> boxlists], 0)</div>
<div class="line"><span class="lineno">  586</span>      concatenated.add_field(field, concatenated_field)</div>
<div class="line"><span class="lineno">  587</span>    <span class="keywordflow">return</span> concatenated</div>
<div class="line"><span class="lineno">  588</span> </div>
<div class="line"><span class="lineno">  589</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a7bdc06a00ef29d99daeab567329d7421_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a7bdc06a00ef29d99daeab567329d7421_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a7bdc06a00ef29d99daeab567329d7421_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a7bdc06a00ef29d99daeab567329d7421_icgraph">
<area shape="rect" title=" " alt="" coords="213,13,373,53"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a94cd2ba48717a3b24c2889ac73e749f9" title=" " alt="" coords="5,5,165,60"/>
<area shape="poly" title=" " alt="" coords="200,35,166,35,166,30,200,30"/>
</map>
</div>

</div>
</div>
<a id="a704393f594559cb69a017b29adfb0eab" name="a704393f594559cb69a017b29adfb0eab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a704393f594559cb69a017b29adfb0eab">&#9670;&#160;</a></span>filter_field_value_equals()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.filter_field_value_equals </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Filter to keep only boxes with field entries equal to the given value.

Args:
  boxlist: BoxList holding N boxes.
  field: field name for filtering.
  value: scalar value.
  scope: name scope.

Returns:
  a BoxList holding M boxes where M &lt;= N

Raises:
  ValueError: if boxlist not a BoxList object or if it does not have
    the specified field.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00660">660</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  660</span><span class="keyword">def </span>filter_field_value_equals(boxlist, field, value, scope=None):</div>
<div class="line"><span class="lineno">  661</span>  <span class="stringliteral">&quot;&quot;&quot;Filter to keep only boxes with field entries equal to the given value.</span></div>
<div class="line"><span class="lineno">  662</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  663</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  664</span><span class="stringliteral">    boxlist: BoxList holding N boxes.</span></div>
<div class="line"><span class="lineno">  665</span><span class="stringliteral">    field: field name </span><span class="keywordflow">for</span> filtering.</div>
<div class="line"><span class="lineno">  666</span>    value: scalar value.</div>
<div class="line"><span class="lineno">  667</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  668</span> </div>
<div class="line"><span class="lineno">  669</span>  Returns:</div>
<div class="line"><span class="lineno">  670</span>    a BoxList holding M boxes where M &lt;= N</div>
<div class="line"><span class="lineno">  671</span> </div>
<div class="line"><span class="lineno">  672</span>  Raises:</div>
<div class="line"><span class="lineno">  673</span>    ValueError: <span class="keywordflow">if</span> boxlist <span class="keywordflow">not</span> a BoxList object <span class="keywordflow">or</span> <span class="keywordflow">if</span> it does <span class="keywordflow">not</span> have</div>
<div class="line"><span class="lineno">  674</span>      the specified field.</div>
<div class="line"><span class="lineno">  675</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  676</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;FilterFieldValueEquals&#39;</span>):</div>
<div class="line"><span class="lineno">  677</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(boxlist, box_list.BoxList):</div>
<div class="line"><span class="lineno">  678</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlist must be a BoxList&#39;</span>)</div>
<div class="line"><span class="lineno">  679</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> boxlist.has_field(field):</div>
<div class="line"><span class="lineno">  680</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlist must contain the specified field&#39;</span>)</div>
<div class="line"><span class="lineno">  681</span>    filter_field = boxlist.get_field(field)</div>
<div class="line"><span class="lineno">  682</span>    gather_index = tf.reshape(tf.where(tf.equal(filter_field, value)), [-1])</div>
<div class="line"><span class="lineno">  683</span>    <span class="keywordflow">return</span> gather(boxlist, gather_index)</div>
<div class="line"><span class="lineno">  684</span> </div>
<div class="line"><span class="lineno">  685</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a704393f594559cb69a017b29adfb0eab_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a704393f594559cb69a017b29adfb0eab_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a704393f594559cb69a017b29adfb0eab_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a704393f594559cb69a017b29adfb0eab_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,165,60"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab935f3907c57be324fe3e04a553aad0b" title=" " alt="" coords="213,13,373,53"/>
<area shape="poly" title=" " alt="" coords="165,30,199,30,199,35,165,35"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a704393f594559cb69a017b29adfb0eab_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a704393f594559cb69a017b29adfb0eab_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a704393f594559cb69a017b29adfb0eab_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a704393f594559cb69a017b29adfb0eab_icgraph">
<area shape="rect" title=" " alt="" coords="213,5,373,60"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a94cd2ba48717a3b24c2889ac73e749f9" title=" " alt="" coords="5,5,165,60"/>
<area shape="poly" title=" " alt="" coords="200,35,166,35,166,30,200,30"/>
</map>
</div>

</div>
</div>
<a id="af19b9892d46f5558103b58fb131dc5c5" name="af19b9892d46f5558103b58fb131dc5c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af19b9892d46f5558103b58fb131dc5c5">&#9670;&#160;</a></span>filter_greater_than()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.filter_greater_than </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>thresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Filter to keep only boxes with score exceeding a given threshold.

This op keeps the collection of boxes whose corresponding scores are
greater than the input threshold.

TODO(jonathanhuang): Change function name to filter_scores_greater_than

Args:
  boxlist: BoxList holding N boxes.  Must contain a 'scores' field
    representing detection scores.
  thresh: scalar threshold
  scope: name scope.

Returns:
  a BoxList holding M boxes where M &lt;= N

Raises:
  ValueError: if boxlist not a BoxList object or if it does not
    have a scores field
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00686">686</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  686</span><span class="keyword">def </span>filter_greater_than(boxlist, thresh, scope=None):</div>
<div class="line"><span class="lineno">  687</span>  <span class="stringliteral">&quot;&quot;&quot;Filter to keep only boxes with score exceeding a given threshold.</span></div>
<div class="line"><span class="lineno">  688</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  689</span><span class="stringliteral">  This op keeps the collection of boxes whose corresponding scores are</span></div>
<div class="line"><span class="lineno">  690</span><span class="stringliteral">  greater than the input threshold.</span></div>
<div class="line"><span class="lineno">  691</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  692</span><span class="stringliteral">  TODO(jonathanhuang): Change function name to filter_scores_greater_than</span></div>
<div class="line"><span class="lineno">  693</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  694</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  695</span><span class="stringliteral">    boxlist: BoxList holding N boxes.  Must contain a &#39;scores&#39;</span> field</div>
<div class="line"><span class="lineno">  696</span>      representing detection scores.</div>
<div class="line"><span class="lineno">  697</span>    thresh: scalar threshold</div>
<div class="line"><span class="lineno">  698</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  699</span> </div>
<div class="line"><span class="lineno">  700</span>  Returns:</div>
<div class="line"><span class="lineno">  701</span>    a BoxList holding M boxes where M &lt;= N</div>
<div class="line"><span class="lineno">  702</span> </div>
<div class="line"><span class="lineno">  703</span>  Raises:</div>
<div class="line"><span class="lineno">  704</span>    ValueError: <span class="keywordflow">if</span> boxlist <span class="keywordflow">not</span> a BoxList object <span class="keywordflow">or</span> <span class="keywordflow">if</span> it does <span class="keywordflow">not</span></div>
<div class="line"><span class="lineno">  705</span>      have a scores field</div>
<div class="line"><span class="lineno">  706</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  707</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;FilterGreaterThan&#39;</span>):</div>
<div class="line"><span class="lineno">  708</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(boxlist, box_list.BoxList):</div>
<div class="line"><span class="lineno">  709</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlist must be a BoxList&#39;</span>)</div>
<div class="line"><span class="lineno">  710</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> boxlist.has_field(<span class="stringliteral">&#39;scores&#39;</span>):</div>
<div class="line"><span class="lineno">  711</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;input boxlist must have \&#39;scores\&#39; field&#39;</span>)</div>
<div class="line"><span class="lineno">  712</span>    scores = boxlist.get_field(<span class="stringliteral">&#39;scores&#39;</span>)</div>
<div class="line"><span class="lineno">  713</span>    <span class="keywordflow">if</span> len(scores.shape.as_list()) &gt; 2:</div>
<div class="line"><span class="lineno">  714</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;Scores should have rank 1 or 2&#39;</span>)</div>
<div class="line"><span class="lineno">  715</span>    <span class="keywordflow">if</span> len(scores.shape.as_list()) == 2 <span class="keywordflow">and</span> scores.shape.as_list()[1] != 1:</div>
<div class="line"><span class="lineno">  716</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;Scores should have rank 1 or have shape &#39;</span></div>
<div class="line"><span class="lineno">  717</span>                       <span class="stringliteral">&#39;consistent with [None, 1]&#39;</span>)</div>
<div class="line"><span class="lineno">  718</span>    high_score_indices = tf.cast(tf.reshape(</div>
<div class="line"><span class="lineno">  719</span>        tf.where(tf.greater(scores, thresh)),</div>
<div class="line"><span class="lineno">  720</span>        [-1]), tf.int32)</div>
<div class="line"><span class="lineno">  721</span>    <span class="keywordflow">return</span> gather(boxlist, high_score_indices)</div>
<div class="line"><span class="lineno">  722</span> </div>
<div class="line"><span class="lineno">  723</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_af19b9892d46f5558103b58fb131dc5c5_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_af19b9892d46f5558103b58fb131dc5c5_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_af19b9892d46f5558103b58fb131dc5c5_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_af19b9892d46f5558103b58fb131dc5c5_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,187,45"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab935f3907c57be324fe3e04a553aad0b" title=" " alt="" coords="235,5,395,45"/>
<area shape="poly" title=" " alt="" coords="187,23,221,23,221,28,187,28"/>
</map>
</div>

</div>
</div>
<a id="ab935f3907c57be324fe3e04a553aad0b" name="ab935f3907c57be324fe3e04a553aad0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab935f3907c57be324fe3e04a553aad0b">&#9670;&#160;</a></span>gather()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.gather </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fields</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>use_static_shapes</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Gather boxes from BoxList according to indices and return new BoxList.

By default, `gather` returns boxes corresponding to the input index list, as
well as all additional fields stored in the boxlist (indexing into the
first dimension).  However one can optionally only gather from a
subset of fields.

Args:
  boxlist: BoxList holding N boxes
  indices: a rank-1 tensor of type int32 / int64
  fields: (optional) list of fields to also gather from.  If None (default),
    all fields are gathered from.  Pass an empty fields list to only gather
    the box coordinates.
  scope: name scope.
  use_static_shapes: Whether to use an implementation with static shape
    gurantees.

Returns:
  subboxlist: a BoxList corresponding to the subset of the input BoxList
  specified by indices
Raises:
  ValueError: if specified field is not contained in boxlist or if the
    indices are not of type int32
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00491">491</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  491</span><span class="keyword">def </span>gather(boxlist, indices, fields=None, scope=None, use_static_shapes=False):</div>
<div class="line"><span class="lineno">  492</span>  <span class="stringliteral">&quot;&quot;&quot;Gather boxes from BoxList according to indices and return new BoxList.</span></div>
<div class="line"><span class="lineno">  493</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  494</span><span class="stringliteral">  By default, `gather` returns boxes corresponding to the input index list, </span><span class="keyword">as</span></div>
<div class="line"><span class="lineno">  495</span>  well <span class="keyword">as</span> all additional fields stored <span class="keywordflow">in</span> the boxlist (indexing into the</div>
<div class="line"><span class="lineno">  496</span>  first dimension).  However one can optionally only gather <span class="keyword">from</span> a</div>
<div class="line"><span class="lineno">  497</span>  subset of fields.</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>  Args:</div>
<div class="line"><span class="lineno">  500</span>    boxlist: BoxList holding N boxes</div>
<div class="line"><span class="lineno">  501</span>    indices: a rank-1 tensor of type int32 / int64</div>
<div class="line"><span class="lineno">  502</span>    fields: (optional) list of fields to also gather <span class="keyword">from</span>.  If <span class="keywordtype">None</span> (default),</div>
<div class="line"><span class="lineno">  503</span>      all fields are gathered <span class="keyword">from</span>.  Pass an empty fields list to only gather</div>
<div class="line"><span class="lineno">  504</span>      the box coordinates.</div>
<div class="line"><span class="lineno">  505</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  506</span>    use_static_shapes: Whether to use an implementation <span class="keyword">with</span> static shape</div>
<div class="line"><span class="lineno">  507</span>      gurantees.</div>
<div class="line"><span class="lineno">  508</span> </div>
<div class="line"><span class="lineno">  509</span>  Returns:</div>
<div class="line"><span class="lineno">  510</span>    subboxlist: a BoxList corresponding to the subset of the input BoxList</div>
<div class="line"><span class="lineno">  511</span>    specified by indices</div>
<div class="line"><span class="lineno">  512</span>  Raises:</div>
<div class="line"><span class="lineno">  513</span>    ValueError: <span class="keywordflow">if</span> specified field <span class="keywordflow">is</span> <span class="keywordflow">not</span> contained <span class="keywordflow">in</span> boxlist <span class="keywordflow">or</span> <span class="keywordflow">if</span> the</div>
<div class="line"><span class="lineno">  514</span>      indices are <span class="keywordflow">not</span> of type int32</div>
<div class="line"><span class="lineno">  515</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  516</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;Gather&#39;</span>):</div>
<div class="line"><span class="lineno">  517</span>    <span class="keywordflow">if</span> len(indices.shape.as_list()) != 1:</div>
<div class="line"><span class="lineno">  518</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;indices should have rank 1&#39;</span>)</div>
<div class="line"><span class="lineno">  519</span>    <span class="keywordflow">if</span> indices.dtype != tf.int32 <span class="keywordflow">and</span> indices.dtype != tf.int64:</div>
<div class="line"><span class="lineno">  520</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;indices should be an int32 / int64 tensor&#39;</span>)</div>
<div class="line"><span class="lineno">  521</span>    gather_op = tf.gather</div>
<div class="line"><span class="lineno">  522</span>    <span class="keywordflow">if</span> use_static_shapes:</div>
<div class="line"><span class="lineno">  523</span>      gather_op = ops.matmul_gather_on_zeroth_axis</div>
<div class="line"><span class="lineno">  524</span>    subboxlist = box_list.BoxList(gather_op(boxlist.get(), indices))</div>
<div class="line"><span class="lineno">  525</span>    <span class="keywordflow">if</span> fields <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  526</span>      fields = boxlist.get_extra_fields()</div>
<div class="line"><span class="lineno">  527</span>    fields += [<span class="stringliteral">&#39;boxes&#39;</span>]</div>
<div class="line"><span class="lineno">  528</span>    <span class="keywordflow">for</span> field <span class="keywordflow">in</span> fields:</div>
<div class="line"><span class="lineno">  529</span>      <span class="keywordflow">if</span> <span class="keywordflow">not</span> boxlist.has_field(field):</div>
<div class="line"><span class="lineno">  530</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlist must contain all specified fields&#39;</span>)</div>
<div class="line"><span class="lineno">  531</span>      subfieldlist = gather_op(boxlist.get_field(field), indices)</div>
<div class="line"><span class="lineno">  532</span>      subboxlist.add_field(field, subfieldlist)</div>
<div class="line"><span class="lineno">  533</span>    <span class="keywordflow">return</span> subboxlist</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ab935f3907c57be324fe3e04a553aad0b_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ab935f3907c57be324fe3e04a553aad0b_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ab935f3907c57be324fe3e04a553aad0b_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ab935f3907c57be324fe3e04a553aad0b_icgraph">
<area shape="rect" title=" " alt="" coords="720,284,880,324"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ad52cd56fc9dc0a632dd326e489bd1399" title=" " alt="" coords="465,5,628,45"/>
<area shape="poly" title=" " alt="" coords="788,272,774,224,750,166,716,108,695,82,670,59,650,47,627,38,629,33,652,42,674,55,699,79,720,105,755,164,779,222,794,270"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a0c75cbd62f25f099ee47c6f50a22c12d" title=" " alt="" coords="464,69,629,109"/>
<area shape="poly" title=" " alt="" coords="781,273,738,201,707,163,670,130,628,109,631,104,674,126,711,159,742,198,786,270"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a704393f594559cb69a017b29adfb0eab" title=" " alt="" coords="213,145,373,199"/>
<area shape="poly" title=" " alt="" coords="778,274,734,220,704,194,671,174,634,161,595,153,516,146,440,149,374,157,373,152,440,143,516,140,596,147,635,156,673,170,707,190,738,216,782,271"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#af19b9892d46f5558103b58fb131dc5c5" title=" " alt="" coords="456,184,637,224"/>
<area shape="poly" title=" " alt="" coords="753,279,714,258,671,238,636,227,638,222,673,234,716,253,756,275"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a4f53127d0876cf0b4ab378bf7d2e2ef1" title=" " alt="" coords="443,248,651,288"/>
<area shape="poly" title=" " alt="" coords="706,293,651,285,651,280,707,288"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ac97746ffdde0c48bd2bad8c439c6bd3c" title=" " alt="" coords="457,313,637,367"/>
<area shape="poly" title=" " alt="" coords="706,320,637,330,637,325,706,315"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a71b57b4bfadf9a8c24875f06c894ec79" title=" " alt="" coords="421,392,672,432"/>
<area shape="poly" title=" " alt="" coords="760,334,719,358,673,381,636,394,634,389,671,376,716,354,757,329"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a8cce2ae473046db81897506796042133" title=" " alt="" coords="443,456,651,496"/>
<area shape="poly" title=" " alt="" coords="781,337,736,393,706,422,673,446,649,458,646,454,671,442,703,418,732,390,776,334"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a121943718c068c50e17a0dbbde02b17e" title=" " alt="" coords="451,520,642,560"/>
<area shape="poly" title=" " alt="" coords="790,338,772,378,748,425,715,471,674,510,644,526,641,522,670,506,711,467,743,422,768,376,785,336"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a103f0e0e0eeb3193514895e6b2c9ba94" title=" " alt="" coords="213,444,373,484"/>
<area shape="poly" title=" " alt="" coords="797,338,785,393,763,458,747,492,727,523,702,551,673,574,640,593,609,605,579,611,550,611,491,599,420,574,386,557,354,533,309,486,312,482,358,529,388,552,422,570,492,594,551,606,579,606,607,600,637,588,671,570,699,547,722,520,742,489,758,456,780,391,792,337"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a94cd2ba48717a3b24c2889ac73e749f9" title=" " alt="" coords="5,241,165,295"/>
<area shape="poly" title=" " alt="" coords="222,208,146,243,144,238,220,203"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a7763ebbaf43a4450d6ae5d0fe88398a7" title=" " alt="" coords="213,248,373,288"/>
<area shape="poly" title=" " alt="" coords="429,271,373,271,373,265,429,265"/>
<area shape="poly" title=" " alt="" coords="200,271,166,271,166,265,200,265"/>
<area shape="poly" title=" " alt="" coords="259,436,114,298,117,294,263,432"/>
</map>
</div>

</div>
</div>
<a id="ab20486b60634ec258c5e24dbc5f64e52" name="ab20486b60634ec258c5e24dbc5f64e52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab20486b60634ec258c5e24dbc5f64e52">&#9670;&#160;</a></span>get_minimal_coverage_box()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.get_minimal_coverage_box </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>default_box</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Creates a single bounding box which covers all boxes in the boxlist.

Args:
  boxlist: A Boxlist.
  default_box: A [1, 4] float32 tensor. If no boxes are present in `boxlist`,
    this default box will be returned. If None, will use a default box of
    [[0., 0., 1., 1.]].
  scope: Name scope.

Returns:
  A [1, 4] float32 tensor with a bounding box that tightly covers all the
  boxes in the box list. If the boxlist does not contain any boxes, the
  default box is returned.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l01058">1058</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1060</span>                             scope=<span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno"> 1061</span>  <span class="stringliteral">&quot;&quot;&quot;Creates a single bounding box which covers all boxes in the boxlist.</span></div>
<div class="line"><span class="lineno"> 1062</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1063</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno"> 1064</span><span class="stringliteral">    boxlist: A Boxlist.</span></div>
<div class="line"><span class="lineno"> 1065</span><span class="stringliteral">    default_box: A [1, 4] float32 tensor. If no boxes are present </span><span class="keywordflow">in</span> `boxlist`,</div>
<div class="line"><span class="lineno"> 1066</span>      this default box will be returned. If <span class="keywordtype">None</span>, will use a default box of</div>
<div class="line"><span class="lineno"> 1067</span>      [[0., 0., 1., 1.]].</div>
<div class="line"><span class="lineno"> 1068</span>    scope: Name scope.</div>
<div class="line"><span class="lineno"> 1069</span> </div>
<div class="line"><span class="lineno"> 1070</span>  Returns:</div>
<div class="line"><span class="lineno"> 1071</span>    A [1, 4] float32 tensor <span class="keyword">with</span> a bounding box that tightly covers all the</div>
<div class="line"><span class="lineno"> 1072</span>    boxes <span class="keywordflow">in</span> the box list. If the boxlist does <span class="keywordflow">not</span> contain any boxes, the</div>
<div class="line"><span class="lineno"> 1073</span>    default box <span class="keywordflow">is</span> returned.</div>
<div class="line"><span class="lineno"> 1074</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1075</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;CreateCoverageBox&#39;</span>):</div>
<div class="line"><span class="lineno"> 1076</span>    num_boxes = boxlist.num_boxes()</div>
<div class="line"><span class="lineno"> 1077</span> </div>
<div class="line"><span class="lineno"> 1078</span>    <span class="keyword">def </span>coverage_box(bboxes):</div>
<div class="line"><span class="lineno"> 1079</span>      y_min, x_min, y_max, x_max = tf.split(</div>
<div class="line"><span class="lineno"> 1080</span>          value=bboxes, num_or_size_splits=4, axis=1)</div>
<div class="line"><span class="lineno"> 1081</span>      y_min_coverage = tf.reduce_min(y_min, axis=0)</div>
<div class="line"><span class="lineno"> 1082</span>      x_min_coverage = tf.reduce_min(x_min, axis=0)</div>
<div class="line"><span class="lineno"> 1083</span>      y_max_coverage = tf.reduce_max(y_max, axis=0)</div>
<div class="line"><span class="lineno"> 1084</span>      x_max_coverage = tf.reduce_max(x_max, axis=0)</div>
<div class="line"><span class="lineno"> 1085</span>      <span class="keywordflow">return</span> tf.stack(</div>
<div class="line"><span class="lineno"> 1086</span>          [y_min_coverage, x_min_coverage, y_max_coverage, x_max_coverage],</div>
<div class="line"><span class="lineno"> 1087</span>          axis=1)</div>
<div class="line"><span class="lineno"> 1088</span> </div>
<div class="line"><span class="lineno"> 1089</span>    default_box = default_box <span class="keywordflow">or</span> tf.constant([[0., 0., 1., 1.]])</div>
<div class="line"><span class="lineno"> 1090</span>    <span class="keywordflow">return</span> tf.cond(</div>
<div class="line"><span class="lineno"> 1091</span>        tf.greater_equal(num_boxes, 1),</div>
<div class="line"><span class="lineno"> 1092</span>        true_fn=<span class="keyword">lambda</span>: coverage_box(boxlist.get()),</div>
<div class="line"><span class="lineno"> 1093</span>        false_fn=<span class="keyword">lambda</span>: default_box)</div>
<div class="line"><span class="lineno"> 1094</span> </div>
<div class="line"><span class="lineno"> 1095</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a30d8f8a23a3ee1a92ed2aded0b20b761" name="a30d8f8a23a3ee1a92ed2aded0b20b761"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30d8f8a23a3ee1a92ed2aded0b20b761">&#9670;&#160;</a></span>height_width()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.height_width </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Computes height and width of boxes in boxlist.

Args:
  boxlist: BoxList holding N boxes
  scope: name scope.

Returns:
  Height: A tensor with shape [N] representing box heights.
  Width: A tensor with shape [N] representing box widths.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00065">65</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   65</span><span class="keyword">def </span>height_width(boxlist, scope=None):</div>
<div class="line"><span class="lineno">   66</span>  <span class="stringliteral">&quot;&quot;&quot;Computes height and width of boxes in boxlist.</span></div>
<div class="line"><span class="lineno">   67</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   68</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">   69</span><span class="stringliteral">    boxlist: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">   70</span><span class="stringliteral">    scope: name scope.</span></div>
<div class="line"><span class="lineno">   71</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   72</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">   73</span><span class="stringliteral">    Height: A tensor </span><span class="keyword">with</span> shape [N] representing box heights.</div>
<div class="line"><span class="lineno">   74</span>    Width: A tensor <span class="keyword">with</span> shape [N] representing box widths.</div>
<div class="line"><span class="lineno">   75</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;HeightWidth&#39;</span>):</div>
<div class="line"><span class="lineno">   77</span>    y_min, x_min, y_max, x_max = tf.split(</div>
<div class="line"><span class="lineno">   78</span>        value=boxlist.get(), num_or_size_splits=4, axis=1)</div>
<div class="line"><span class="lineno">   79</span>    <span class="keywordflow">return</span> tf.squeeze(y_max - y_min, [1]), tf.squeeze(x_max - x_min, [1])</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a30d8f8a23a3ee1a92ed2aded0b20b761_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a30d8f8a23a3ee1a92ed2aded0b20b761_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a30d8f8a23a3ee1a92ed2aded0b20b761_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a30d8f8a23a3ee1a92ed2aded0b20b761_icgraph">
<area shape="rect" title=" " alt="" coords="244,5,404,45"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a121943718c068c50e17a0dbbde02b17e" title=" " alt="" coords="5,5,196,45"/>
<area shape="poly" title=" " alt="" coords="230,28,196,28,196,23,230,23"/>
</map>
</div>

</div>
</div>
<a id="afd15da7dda22daae6756580f198e34da" name="afd15da7dda22daae6756580f198e34da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd15da7dda22daae6756580f198e34da">&#9670;&#160;</a></span>intersection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.intersection </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compute pairwise intersection areas between boxes.

Args:
  boxlist1: BoxList holding N boxes
  boxlist2: BoxList holding M boxes
  scope: name scope.

Returns:
  a tensor with shape [N, M] representing pairwise intersections
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00210">210</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  210</span><span class="keyword">def </span>intersection(boxlist1, boxlist2, scope=None):</div>
<div class="line"><span class="lineno">  211</span>  <span class="stringliteral">&quot;&quot;&quot;Compute pairwise intersection areas between boxes.</span></div>
<div class="line"><span class="lineno">  212</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  213</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  214</span><span class="stringliteral">    boxlist1: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">  215</span><span class="stringliteral">    boxlist2: BoxList holding M boxes</span></div>
<div class="line"><span class="lineno">  216</span><span class="stringliteral">    scope: name scope.</span></div>
<div class="line"><span class="lineno">  217</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  218</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  219</span><span class="stringliteral">    a tensor </span><span class="keyword">with</span> shape [N, M] representing pairwise intersections</div>
<div class="line"><span class="lineno">  220</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  221</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;Intersection&#39;</span>):</div>
<div class="line"><span class="lineno">  222</span>    y_min1, x_min1, y_max1, x_max1 = tf.split(</div>
<div class="line"><span class="lineno">  223</span>        value=boxlist1.get(), num_or_size_splits=4, axis=1)</div>
<div class="line"><span class="lineno">  224</span>    y_min2, x_min2, y_max2, x_max2 = tf.split(</div>
<div class="line"><span class="lineno">  225</span>        value=boxlist2.get(), num_or_size_splits=4, axis=1)</div>
<div class="line"><span class="lineno">  226</span>    all_pairs_min_ymax = tf.minimum(y_max1, tf.transpose(y_max2))</div>
<div class="line"><span class="lineno">  227</span>    all_pairs_max_ymin = tf.maximum(y_min1, tf.transpose(y_min2))</div>
<div class="line"><span class="lineno">  228</span>    intersect_heights = tf.maximum(0.0, all_pairs_min_ymax - all_pairs_max_ymin)</div>
<div class="line"><span class="lineno">  229</span>    all_pairs_min_xmax = tf.minimum(x_max1, tf.transpose(x_max2))</div>
<div class="line"><span class="lineno">  230</span>    all_pairs_max_xmin = tf.maximum(x_min1, tf.transpose(x_min2))</div>
<div class="line"><span class="lineno">  231</span>    intersect_widths = tf.maximum(0.0, all_pairs_min_xmax - all_pairs_max_xmin)</div>
<div class="line"><span class="lineno">  232</span>    <span class="keywordflow">return</span> intersect_heights * intersect_widths</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_afd15da7dda22daae6756580f198e34da_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_afd15da7dda22daae6756580f198e34da_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_afd15da7dda22daae6756580f198e34da_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_afd15da7dda22daae6756580f198e34da_icgraph">
<area shape="rect" title=" " alt="" coords="928,61,1088,101"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a9e0ac719b5e09ec7392954a9c9fe4174" title=" " alt="" coords="720,29,880,69"/>
<area shape="poly" title=" " alt="" coords="914,70,880,64,881,59,915,64"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a0c3ceb43da9213d701fe159dd5ab3b16" title=" " alt="" coords="720,93,880,133"/>
<area shape="poly" title=" " alt="" coords="915,98,881,104,880,98,914,93"/>
<area shape="poly" title=" " alt="" coords="835,18,823,11,800,8,780,10,768,15,764,21,766,28,761,30,759,20,765,10,779,5,800,3,824,6,838,13"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a71b57b4bfadf9a8c24875f06c894ec79" title=" " alt="" coords="421,29,672,69"/>
<area shape="poly" title=" " alt="" coords="706,52,672,52,672,47,706,47"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a6d89634b5541a267c532cd81b4abaf64" title=" " alt="" coords="467,93,627,133"/>
<area shape="poly" title=" " alt="" coords="706,116,627,116,627,111,706,111"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a7763ebbaf43a4450d6ae5d0fe88398a7" title=" " alt="" coords="213,93,373,133"/>
<area shape="poly" title=" " alt="" coords="453,116,374,116,374,111,453,111"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a94cd2ba48717a3b24c2889ac73e749f9" title=" " alt="" coords="5,86,165,141"/>
<area shape="poly" title=" " alt="" coords="200,116,166,116,166,111,200,111"/>
</map>
</div>

</div>
</div>
<a id="a9e0ac719b5e09ec7392954a9c9fe4174" name="a9e0ac719b5e09ec7392954a9c9fe4174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e0ac719b5e09ec7392954a9c9fe4174">&#9670;&#160;</a></span>ioa()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.ioa </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Computes pairwise intersection-over-area between box collections.

intersection-over-area (IOA) between two boxes box1 and box2 is defined as
their intersection area over box2's area. Note that ioa is not symmetric,
that is, ioa(box1, box2) != ioa(box2, box1).

Args:
  boxlist1: BoxList holding N boxes
  boxlist2: BoxList holding M boxes
  scope: name scope.

Returns:
  a tensor with shape [N, M] representing pairwise ioa scores.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00303">303</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  303</span><span class="keyword">def </span>ioa(boxlist1, boxlist2, scope=None):</div>
<div class="line"><span class="lineno">  304</span>  <span class="stringliteral">&quot;&quot;&quot;Computes pairwise intersection-over-area between box collections.</span></div>
<div class="line"><span class="lineno">  305</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  306</span><span class="stringliteral">  intersection-over-area (IOA) between two boxes box1 </span><span class="keywordflow">and</span> box2 <span class="keywordflow">is</span> defined <span class="keyword">as</span></div>
<div class="line"><span class="lineno">  307</span>  their intersection area over box2<span class="stringliteral">&#39;s area. Note that ioa is not symmetric,</span></div>
<div class="line"><span class="lineno">  308</span><span class="stringliteral">  that </span><span class="keywordflow">is</span>, ioa(box1, box2) != ioa(box2, box1).</div>
<div class="line"><span class="lineno">  309</span> </div>
<div class="line"><span class="lineno">  310</span>  Args:</div>
<div class="line"><span class="lineno">  311</span>    boxlist1: BoxList holding N boxes</div>
<div class="line"><span class="lineno">  312</span>    boxlist2: BoxList holding M boxes</div>
<div class="line"><span class="lineno">  313</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  314</span> </div>
<div class="line"><span class="lineno">  315</span>  Returns:</div>
<div class="line"><span class="lineno">  316</span>    a tensor <span class="keyword">with</span> shape [N, M] representing pairwise ioa scores.</div>
<div class="line"><span class="lineno">  317</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  318</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;IOA&#39;</span>):</div>
<div class="line"><span class="lineno">  319</span>    intersections = intersection(boxlist1, boxlist2)</div>
<div class="line"><span class="lineno">  320</span>    areas = tf.expand_dims(area(boxlist2), 0)</div>
<div class="line"><span class="lineno">  321</span>    <span class="keywordflow">return</span> tf.truediv(intersections, areas)</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a9e0ac719b5e09ec7392954a9c9fe4174_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a9e0ac719b5e09ec7392954a9c9fe4174_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a9e0ac719b5e09ec7392954a9c9fe4174_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a9e0ac719b5e09ec7392954a9c9fe4174_cgraph">
<area shape="rect" title=" " alt="" coords="5,37,165,77"/>
<area shape="poly" title=" " alt="" coords="46,38,44,28,50,18,64,13,85,11,110,14,123,21,120,26,108,19,85,16,65,18,53,23,49,29,51,36"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a92898db065feb66a9559123f5dc1190e" title=" " alt="" coords="213,5,373,45"/>
<area shape="poly" title=" " alt="" coords="165,42,199,37,200,42,166,48"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#afd15da7dda22daae6756580f198e34da" title=" " alt="" coords="213,69,373,109"/>
<area shape="poly" title=" " alt="" coords="166,67,200,72,199,78,165,72"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a9e0ac719b5e09ec7392954a9c9fe4174_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a9e0ac719b5e09ec7392954a9c9fe4174_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a9e0ac719b5e09ec7392954a9c9fe4174_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a9e0ac719b5e09ec7392954a9c9fe4174_icgraph">
<area shape="rect" title=" " alt="" coords="304,29,464,69"/>
<area shape="poly" title=" " alt="" coords="427,18,412,11,384,8,359,10,345,15,339,21,342,28,337,30,334,20,342,10,358,5,384,3,413,6,429,13"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a71b57b4bfadf9a8c24875f06c894ec79" title=" " alt="" coords="5,29,256,69"/>
<area shape="poly" title=" " alt="" coords="290,52,256,52,256,47,290,47"/>
</map>
</div>

</div>
</div>
<a id="a0c3ceb43da9213d701fe159dd5ab3b16" name="a0c3ceb43da9213d701fe159dd5ab3b16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c3ceb43da9213d701fe159dd5ab3b16">&#9670;&#160;</a></span>iou()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.iou </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Computes pairwise intersection-over-union between box collections.

Args:
  boxlist1: BoxList holding N boxes
  boxlist2: BoxList holding M boxes
  scope: name scope.

Returns:
  a tensor with shape [N, M] representing pairwise iou scores.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00260">260</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  260</span><span class="keyword">def </span>iou(boxlist1, boxlist2, scope=None):</div>
<div class="line"><span class="lineno">  261</span>  <span class="stringliteral">&quot;&quot;&quot;Computes pairwise intersection-over-union between box collections.</span></div>
<div class="line"><span class="lineno">  262</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  263</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  264</span><span class="stringliteral">    boxlist1: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">  265</span><span class="stringliteral">    boxlist2: BoxList holding M boxes</span></div>
<div class="line"><span class="lineno">  266</span><span class="stringliteral">    scope: name scope.</span></div>
<div class="line"><span class="lineno">  267</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  268</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  269</span><span class="stringliteral">    a tensor </span><span class="keyword">with</span> shape [N, M] representing pairwise iou scores.</div>
<div class="line"><span class="lineno">  270</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  271</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;IOU&#39;</span>):</div>
<div class="line"><span class="lineno">  272</span>    intersections = intersection(boxlist1, boxlist2)</div>
<div class="line"><span class="lineno">  273</span>    areas1 = area(boxlist1)</div>
<div class="line"><span class="lineno">  274</span>    areas2 = area(boxlist2)</div>
<div class="line"><span class="lineno">  275</span>    unions = (</div>
<div class="line"><span class="lineno">  276</span>        tf.expand_dims(areas1, 1) + tf.expand_dims(areas2, 0) - intersections)</div>
<div class="line"><span class="lineno">  277</span>    <span class="keywordflow">return</span> tf.where(</div>
<div class="line"><span class="lineno">  278</span>        tf.equal(intersections, 0.0),</div>
<div class="line"><span class="lineno">  279</span>        tf.zeros_like(intersections), tf.truediv(intersections, unions))</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a0c3ceb43da9213d701fe159dd5ab3b16_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a0c3ceb43da9213d701fe159dd5ab3b16_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a0c3ceb43da9213d701fe159dd5ab3b16_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a0c3ceb43da9213d701fe159dd5ab3b16_cgraph">
<area shape="rect" title=" " alt="" coords="5,37,165,77"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a92898db065feb66a9559123f5dc1190e" title=" " alt="" coords="213,5,373,45"/>
<area shape="poly" title=" " alt="" coords="165,42,199,37,200,42,166,48"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#afd15da7dda22daae6756580f198e34da" title=" " alt="" coords="213,69,373,109"/>
<area shape="poly" title=" " alt="" coords="166,67,200,72,199,78,165,72"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a0c3ceb43da9213d701fe159dd5ab3b16_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a0c3ceb43da9213d701fe159dd5ab3b16_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a0c3ceb43da9213d701fe159dd5ab3b16_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a0c3ceb43da9213d701fe159dd5ab3b16_icgraph">
<area shape="rect" title=" " alt="" coords="629,13,789,53"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a6d89634b5541a267c532cd81b4abaf64" title=" " alt="" coords="421,13,581,53"/>
<area shape="poly" title=" " alt="" coords="616,35,582,35,582,30,616,30"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a7763ebbaf43a4450d6ae5d0fe88398a7" title=" " alt="" coords="213,13,373,53"/>
<area shape="poly" title=" " alt="" coords="408,35,374,35,374,30,408,30"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a94cd2ba48717a3b24c2889ac73e749f9" title=" " alt="" coords="5,5,165,60"/>
<area shape="poly" title=" " alt="" coords="200,35,166,35,166,30,200,30"/>
</map>
</div>

</div>
</div>
<a id="afdde2971529ea91174efe09af9202c05" name="afdde2971529ea91174efe09af9202c05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdde2971529ea91174efe09af9202c05">&#9670;&#160;</a></span>matched_intersection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.matched_intersection </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compute intersection areas between corresponding boxes in two boxlists.

Args:
  boxlist1: BoxList holding N boxes
  boxlist2: BoxList holding N boxes
  scope: name scope.

Returns:
  a tensor with shape [N] representing pairwise intersections
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00235">235</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  235</span><span class="keyword">def </span>matched_intersection(boxlist1, boxlist2, scope=None):</div>
<div class="line"><span class="lineno">  236</span>  <span class="stringliteral">&quot;&quot;&quot;Compute intersection areas between corresponding boxes in two boxlists.</span></div>
<div class="line"><span class="lineno">  237</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  238</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  239</span><span class="stringliteral">    boxlist1: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">  240</span><span class="stringliteral">    boxlist2: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">  241</span><span class="stringliteral">    scope: name scope.</span></div>
<div class="line"><span class="lineno">  242</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  243</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  244</span><span class="stringliteral">    a tensor </span><span class="keyword">with</span> shape [N] representing pairwise intersections</div>
<div class="line"><span class="lineno">  245</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  246</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;MatchedIntersection&#39;</span>):</div>
<div class="line"><span class="lineno">  247</span>    y_min1, x_min1, y_max1, x_max1 = tf.split(</div>
<div class="line"><span class="lineno">  248</span>        value=boxlist1.get(), num_or_size_splits=4, axis=1)</div>
<div class="line"><span class="lineno">  249</span>    y_min2, x_min2, y_max2, x_max2 = tf.split(</div>
<div class="line"><span class="lineno">  250</span>        value=boxlist2.get(), num_or_size_splits=4, axis=1)</div>
<div class="line"><span class="lineno">  251</span>    min_ymax = tf.minimum(y_max1, y_max2)</div>
<div class="line"><span class="lineno">  252</span>    max_ymin = tf.maximum(y_min1, y_min2)</div>
<div class="line"><span class="lineno">  253</span>    intersect_heights = tf.maximum(0.0, min_ymax - max_ymin)</div>
<div class="line"><span class="lineno">  254</span>    min_xmax = tf.minimum(x_max1, x_max2)</div>
<div class="line"><span class="lineno">  255</span>    max_xmin = tf.maximum(x_min1, x_min2)</div>
<div class="line"><span class="lineno">  256</span>    intersect_widths = tf.maximum(0.0, min_xmax - max_xmin)</div>
<div class="line"><span class="lineno">  257</span>    <span class="keywordflow">return</span> tf.reshape(intersect_heights * intersect_widths, [-1])</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_afdde2971529ea91174efe09af9202c05_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_afdde2971529ea91174efe09af9202c05_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_afdde2971529ea91174efe09af9202c05_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_afdde2971529ea91174efe09af9202c05_icgraph">
<area shape="rect" title=" " alt="" coords="213,5,416,45"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a9fad601f99641baf7fda27235c4723a0" title=" " alt="" coords="5,5,165,45"/>
<area shape="poly" title=" " alt="" coords="200,28,165,28,165,23,200,23"/>
</map>
</div>

</div>
</div>
<a id="a9fad601f99641baf7fda27235c4723a0" name="a9fad601f99641baf7fda27235c4723a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fad601f99641baf7fda27235c4723a0">&#9670;&#160;</a></span>matched_iou()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.matched_iou </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compute intersection-over-union between corresponding boxes in boxlists.

Args:
  boxlist1: BoxList holding N boxes
  boxlist2: BoxList holding N boxes
  scope: name scope.

Returns:
  a tensor with shape [N] representing pairwise iou scores.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00282">282</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  282</span><span class="keyword">def </span>matched_iou(boxlist1, boxlist2, scope=None):</div>
<div class="line"><span class="lineno">  283</span>  <span class="stringliteral">&quot;&quot;&quot;Compute intersection-over-union between corresponding boxes in boxlists.</span></div>
<div class="line"><span class="lineno">  284</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  285</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  286</span><span class="stringliteral">    boxlist1: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">  287</span><span class="stringliteral">    boxlist2: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">  288</span><span class="stringliteral">    scope: name scope.</span></div>
<div class="line"><span class="lineno">  289</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  290</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  291</span><span class="stringliteral">    a tensor </span><span class="keyword">with</span> shape [N] representing pairwise iou scores.</div>
<div class="line"><span class="lineno">  292</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  293</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;MatchedIOU&#39;</span>):</div>
<div class="line"><span class="lineno">  294</span>    intersections = matched_intersection(boxlist1, boxlist2)</div>
<div class="line"><span class="lineno">  295</span>    areas1 = area(boxlist1)</div>
<div class="line"><span class="lineno">  296</span>    areas2 = area(boxlist2)</div>
<div class="line"><span class="lineno">  297</span>    unions = areas1 + areas2 - intersections</div>
<div class="line"><span class="lineno">  298</span>    <span class="keywordflow">return</span> tf.where(</div>
<div class="line"><span class="lineno">  299</span>        tf.equal(intersections, 0.0),</div>
<div class="line"><span class="lineno">  300</span>        tf.zeros_like(intersections), tf.truediv(intersections, unions))</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a9fad601f99641baf7fda27235c4723a0_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a9fad601f99641baf7fda27235c4723a0_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a9fad601f99641baf7fda27235c4723a0_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a9fad601f99641baf7fda27235c4723a0_cgraph">
<area shape="rect" title=" " alt="" coords="5,37,165,77"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a92898db065feb66a9559123f5dc1190e" title=" " alt="" coords="235,5,395,45"/>
<area shape="poly" title=" " alt="" coords="166,44,220,36,221,41,166,49"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#afdde2971529ea91174efe09af9202c05" title=" " alt="" coords="213,69,416,109"/>
<area shape="poly" title=" " alt="" coords="166,66,200,71,199,76,166,71"/>
</map>
</div>

</div>
</div>
<a id="a4f53127d0876cf0b4ab378bf7d2e2ef1" name="a4f53127d0876cf0b4ab378bf7d2e2ef1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f53127d0876cf0b4ab378bf7d2e2ef1">&#9670;&#160;</a></span>non_max_suppression()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.non_max_suppression </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>thresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>max_output_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Non maximum suppression.

This op greedily selects a subset of detection bounding boxes, pruning
away boxes that have high IOU (intersection over union) overlap (&gt; thresh)
with already selected boxes.  Note that this only works for a single class ---
to apply NMS to multi-class predictions, use MultiClassNonMaxSuppression.

Args:
  boxlist: BoxList holding N boxes.  Must contain a 'scores' field
    representing detection scores.
  thresh: scalar threshold
  max_output_size: maximum number of retained boxes
  scope: name scope.

Returns:
  a BoxList holding M boxes where M &lt;= max_output_size
Raises:
  ValueError: if thresh is not in [0, 1]
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00724">724</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  724</span><span class="keyword">def </span>non_max_suppression(boxlist, thresh, max_output_size, scope=None):</div>
<div class="line"><span class="lineno">  725</span>  <span class="stringliteral">&quot;&quot;&quot;Non maximum suppression.</span></div>
<div class="line"><span class="lineno">  726</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  727</span><span class="stringliteral">  This op greedily selects a subset of detection bounding boxes, pruning</span></div>
<div class="line"><span class="lineno">  728</span><span class="stringliteral">  away boxes that have high IOU (intersection over union) overlap (&gt; thresh)</span></div>
<div class="line"><span class="lineno">  729</span><span class="stringliteral">  </span><span class="keyword">with</span> already selected boxes.  Note that this only works <span class="keywordflow">for</span> a single <span class="keyword">class </span>---</div>
<div class="line"><span class="lineno">  730</span>  to apply NMS to multi-<span class="keyword">class </span>predictions, use MultiClassNonMaxSuppression.</div>
<div class="line"><span class="lineno">  731</span> </div>
<div class="line"><span class="lineno">  732</span>  Args:</div>
<div class="line"><span class="lineno">  733</span>    boxlist: BoxList holding N boxes.  Must contain a <span class="stringliteral">&#39;scores&#39;</span> field</div>
<div class="line"><span class="lineno">  734</span>      representing detection scores.</div>
<div class="line"><span class="lineno">  735</span>    thresh: scalar threshold</div>
<div class="line"><span class="lineno">  736</span>    max_output_size: maximum number of retained boxes</div>
<div class="line"><span class="lineno">  737</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  738</span> </div>
<div class="line"><span class="lineno">  739</span>  Returns:</div>
<div class="line"><span class="lineno">  740</span>    a BoxList holding M boxes where M &lt;= max_output_size</div>
<div class="line"><span class="lineno">  741</span>  Raises:</div>
<div class="line"><span class="lineno">  742</span>    ValueError: <span class="keywordflow">if</span> thresh <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> [0, 1]</div>
<div class="line"><span class="lineno">  743</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  744</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;NonMaxSuppression&#39;</span>):</div>
<div class="line"><span class="lineno">  745</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> 0 &lt;= thresh &lt;= 1.0:</div>
<div class="line"><span class="lineno">  746</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;thresh must be between 0 and 1&#39;</span>)</div>
<div class="line"><span class="lineno">  747</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(boxlist, box_list.BoxList):</div>
<div class="line"><span class="lineno">  748</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlist must be a BoxList&#39;</span>)</div>
<div class="line"><span class="lineno">  749</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> boxlist.has_field(<span class="stringliteral">&#39;scores&#39;</span>):</div>
<div class="line"><span class="lineno">  750</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;input boxlist must have \&#39;scores\&#39; field&#39;</span>)</div>
<div class="line"><span class="lineno">  751</span>    selected_indices = tf.image.non_max_suppression(</div>
<div class="line"><span class="lineno">  752</span>        boxlist.get(), boxlist.get_field(<span class="stringliteral">&#39;scores&#39;</span>),</div>
<div class="line"><span class="lineno">  753</span>        max_output_size, iou_threshold=thresh)</div>
<div class="line"><span class="lineno">  754</span>    <span class="keywordflow">return</span> gather(boxlist, selected_indices)</div>
<div class="line"><span class="lineno">  755</span> </div>
<div class="line"><span class="lineno">  756</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a4f53127d0876cf0b4ab378bf7d2e2ef1_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a4f53127d0876cf0b4ab378bf7d2e2ef1_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a4f53127d0876cf0b4ab378bf7d2e2ef1_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a4f53127d0876cf0b4ab378bf7d2e2ef1_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,213,45"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab935f3907c57be324fe3e04a553aad0b" title=" " alt="" coords="261,5,421,45"/>
<area shape="poly" title=" " alt="" coords="214,23,248,23,248,28,214,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a4f53127d0876cf0b4ab378bf7d2e2ef1_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a4f53127d0876cf0b4ab378bf7d2e2ef1_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a4f53127d0876cf0b4ab378bf7d2e2ef1_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a4f53127d0876cf0b4ab378bf7d2e2ef1_icgraph">
<area shape="rect" title=" " alt="" coords="421,13,629,53"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a7763ebbaf43a4450d6ae5d0fe88398a7" title=" " alt="" coords="213,13,373,53"/>
<area shape="poly" title=" " alt="" coords="408,35,374,35,374,30,408,30"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a94cd2ba48717a3b24c2889ac73e749f9" title=" " alt="" coords="5,5,165,60"/>
<area shape="poly" title=" " alt="" coords="200,35,166,35,166,30,200,30"/>
</map>
</div>

</div>
</div>
<a id="ad7ee814b54c928c4600ce5f111e6b51b" name="ad7ee814b54c928c4600ce5f111e6b51b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7ee814b54c928c4600ce5f111e6b51b">&#9670;&#160;</a></span>pad_or_clip_box_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.pad_or_clip_box_list </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>num_boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Pads or clips all fields of a BoxList.

Args:
  boxlist: A BoxList with arbitrary of number of boxes.
  num_boxes: First num_boxes in boxlist are kept.
    The fields are zero-padded if num_boxes is bigger than the
    actual number of boxes.
  scope: name scope.

Returns:
  BoxList with all fields padded or clipped.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00997">997</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  997</span><span class="keyword">def </span>pad_or_clip_box_list(boxlist, num_boxes, scope=None):</div>
<div class="line"><span class="lineno">  998</span>  <span class="stringliteral">&quot;&quot;&quot;Pads or clips all fields of a BoxList.</span></div>
<div class="line"><span class="lineno">  999</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1000</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno"> 1001</span><span class="stringliteral">    boxlist: A BoxList </span><span class="keyword">with</span> arbitrary of number of boxes.</div>
<div class="line"><span class="lineno"> 1002</span>    num_boxes: First num_boxes <span class="keywordflow">in</span> boxlist are kept.</div>
<div class="line"><span class="lineno"> 1003</span>      The fields are zero-padded <span class="keywordflow">if</span> num_boxes <span class="keywordflow">is</span> bigger than the</div>
<div class="line"><span class="lineno"> 1004</span>      actual number of boxes.</div>
<div class="line"><span class="lineno"> 1005</span>    scope: name scope.</div>
<div class="line"><span class="lineno"> 1006</span> </div>
<div class="line"><span class="lineno"> 1007</span>  Returns:</div>
<div class="line"><span class="lineno"> 1008</span>    BoxList <span class="keyword">with</span> all fields padded <span class="keywordflow">or</span> clipped.</div>
<div class="line"><span class="lineno"> 1009</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1010</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;PadOrClipBoxList&#39;</span>):</div>
<div class="line"><span class="lineno"> 1011</span>    subboxlist = box_list.BoxList(shape_utils.pad_or_clip_tensor(</div>
<div class="line"><span class="lineno"> 1012</span>        boxlist.get(), num_boxes))</div>
<div class="line"><span class="lineno"> 1013</span>    <span class="keywordflow">for</span> field <span class="keywordflow">in</span> boxlist.get_extra_fields():</div>
<div class="line"><span class="lineno"> 1014</span>      subfield = shape_utils.pad_or_clip_tensor(</div>
<div class="line"><span class="lineno"> 1015</span>          boxlist.get_field(field), num_boxes)</div>
<div class="line"><span class="lineno"> 1016</span>      subboxlist.add_field(field, subfield)</div>
<div class="line"><span class="lineno"> 1017</span>    <span class="keywordflow">return</span> subboxlist</div>
<div class="line"><span class="lineno"> 1018</span> </div>
<div class="line"><span class="lineno"> 1019</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac97746ffdde0c48bd2bad8c439c6bd3c" name="ac97746ffdde0c48bd2bad8c439c6bd3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac97746ffdde0c48bd2bad8c439c6bd3c">&#9670;&#160;</a></span>prune_completely_outside_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.prune_completely_outside_window </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Prunes bounding boxes that fall completely outside of the given window.

The function clip_to_window prunes bounding boxes that fall
completely outside the window, but also clips any bounding boxes that
partially overflow. This function does not clip partially overflowing boxes.

Args:
  boxlist: a BoxList holding M_in boxes.
  window: a float tensor of shape [4] representing [ymin, xmin, ymax, xmax]
    of the window
  scope: name scope.

Returns:
  pruned_boxlist: a new BoxList with all bounding boxes partially or fully in
    the window.
  valid_indices: a tensor with shape [M_out] indexing the valid bounding boxes
   in the input tensor.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00178">178</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  178</span><span class="keyword">def </span>prune_completely_outside_window(boxlist, window, scope=None):</div>
<div class="line"><span class="lineno">  179</span>  <span class="stringliteral">&quot;&quot;&quot;Prunes bounding boxes that fall completely outside of the given window.</span></div>
<div class="line"><span class="lineno">  180</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  181</span><span class="stringliteral">  The function clip_to_window prunes bounding boxes that fall</span></div>
<div class="line"><span class="lineno">  182</span><span class="stringliteral">  completely outside the window, but also clips any bounding boxes that</span></div>
<div class="line"><span class="lineno">  183</span><span class="stringliteral">  partially overflow. This function does </span><span class="keywordflow">not</span> clip partially overflowing boxes.</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>  Args:</div>
<div class="line"><span class="lineno">  186</span>    boxlist: a BoxList holding M_in boxes.</div>
<div class="line"><span class="lineno">  187</span>    window: a float tensor of shape [4] representing [ymin, xmin, ymax, xmax]</div>
<div class="line"><span class="lineno">  188</span>      of the window</div>
<div class="line"><span class="lineno">  189</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>  Returns:</div>
<div class="line"><span class="lineno">  192</span>    pruned_boxlist: a new BoxList <span class="keyword">with</span> all bounding boxes partially <span class="keywordflow">or</span> fully <span class="keywordflow">in</span></div>
<div class="line"><span class="lineno">  193</span>      the window.</div>
<div class="line"><span class="lineno">  194</span>    valid_indices: a tensor <span class="keyword">with</span> shape [M_out] indexing the valid bounding boxes</div>
<div class="line"><span class="lineno">  195</span>     <span class="keywordflow">in</span> the input tensor.</div>
<div class="line"><span class="lineno">  196</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  197</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;PruneCompleteleyOutsideWindow&#39;</span>):</div>
<div class="line"><span class="lineno">  198</span>    y_min, x_min, y_max, x_max = tf.split(</div>
<div class="line"><span class="lineno">  199</span>        value=boxlist.get(), num_or_size_splits=4, axis=1)</div>
<div class="line"><span class="lineno">  200</span>    win_y_min, win_x_min, win_y_max, win_x_max = tf.unstack(window)</div>
<div class="line"><span class="lineno">  201</span>    coordinate_violations = tf.concat([</div>
<div class="line"><span class="lineno">  202</span>        tf.greater_equal(y_min, win_y_max), tf.greater_equal(x_min, win_x_max),</div>
<div class="line"><span class="lineno">  203</span>        tf.less_equal(y_max, win_y_min), tf.less_equal(x_max, win_x_min)</div>
<div class="line"><span class="lineno">  204</span>    ], 1)</div>
<div class="line"><span class="lineno">  205</span>    valid_indices = tf.reshape(</div>
<div class="line"><span class="lineno">  206</span>        tf.where(tf.logical_not(tf.reduce_any(coordinate_violations, 1))), [-1])</div>
<div class="line"><span class="lineno">  207</span>    <span class="keywordflow">return</span> gather(boxlist, valid_indices), valid_indices</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ac97746ffdde0c48bd2bad8c439c6bd3c_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ac97746ffdde0c48bd2bad8c439c6bd3c_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ac97746ffdde0c48bd2bad8c439c6bd3c_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ac97746ffdde0c48bd2bad8c439c6bd3c_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,185,60"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab935f3907c57be324fe3e04a553aad0b" title=" " alt="" coords="233,13,393,53"/>
<area shape="poly" title=" " alt="" coords="185,30,219,30,219,35,185,35"/>
</map>
</div>

</div>
</div>
<a id="a71b57b4bfadf9a8c24875f06c894ec79" name="a71b57b4bfadf9a8c24875f06c894ec79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71b57b4bfadf9a8c24875f06c894ec79">&#9670;&#160;</a></span>prune_non_overlapping_boxes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.prune_non_overlapping_boxes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_overlap</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Prunes the boxes in boxlist1 that overlap less than thresh with boxlist2.

For each box in boxlist1, we want its IOA to be more than minoverlap with
at least one of the boxes in boxlist2. If it does not, we remove it.

Args:
  boxlist1: BoxList holding N boxes.
  boxlist2: BoxList holding M boxes.
  min_overlap: Minimum required overlap between boxes, to count them as
              overlapping.
  scope: name scope.

Returns:
  new_boxlist1: A pruned boxlist with size [N', 4].
  keep_inds: A tensor with shape [N'] indexing kept bounding boxes in the
    first input BoxList `boxlist1`.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00324">324</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  325</span>    boxlist1, boxlist2, min_overlap=0.0, scope=<span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno">  326</span>  <span class="stringliteral">&quot;&quot;&quot;Prunes the boxes in boxlist1 that overlap less than thresh with boxlist2.</span></div>
<div class="line"><span class="lineno">  327</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  328</span><span class="stringliteral">  For each box </span><span class="keywordflow">in</span> boxlist1, we want its IOA to be more than minoverlap <span class="keyword">with</span></div>
<div class="line"><span class="lineno">  329</span>  at least one of the boxes <span class="keywordflow">in</span> boxlist2. If it does <span class="keywordflow">not</span>, we remove it.</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>  Args:</div>
<div class="line"><span class="lineno">  332</span>    boxlist1: BoxList holding N boxes.</div>
<div class="line"><span class="lineno">  333</span>    boxlist2: BoxList holding M boxes.</div>
<div class="line"><span class="lineno">  334</span>    min_overlap: Minimum required overlap between boxes, to count them <span class="keyword">as</span></div>
<div class="line"><span class="lineno">  335</span>                overlapping.</div>
<div class="line"><span class="lineno">  336</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>  Returns:</div>
<div class="line"><span class="lineno">  339</span>    new_boxlist1: A pruned boxlist <span class="keyword">with</span> size [N<span class="stringliteral">&#39;, 4].</span></div>
<div class="line"><span class="lineno">  340</span><span class="stringliteral">    keep_inds: A tensor </span><span class="keyword">with</span> shape [N<span class="stringliteral">&#39;] indexing kept bounding boxes in the</span></div>
<div class="line"><span class="lineno">  341</span><span class="stringliteral">      first input BoxList `boxlist1`.</span></div>
<div class="line"><span class="lineno">  342</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  343</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;PruneNonOverlappingBoxes&#39;</span>):</div>
<div class="line"><span class="lineno">  344</span>    ioa_ = ioa(boxlist2, boxlist1)  <span class="comment"># [M, N] tensor</span></div>
<div class="line"><span class="lineno">  345</span>    ioa_ = tf.reduce_max(ioa_, reduction_indices=[0])  <span class="comment"># [N] tensor</span></div>
<div class="line"><span class="lineno">  346</span>    keep_bool = tf.greater_equal(ioa_, tf.constant(min_overlap))</div>
<div class="line"><span class="lineno">  347</span>    keep_inds = tf.squeeze(tf.where(keep_bool), axis=[1])</div>
<div class="line"><span class="lineno">  348</span>    new_boxlist1 = gather(boxlist1, keep_inds)</div>
<div class="line"><span class="lineno">  349</span>    <span class="keywordflow">return</span> new_boxlist1, keep_inds</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a71b57b4bfadf9a8c24875f06c894ec79_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a71b57b4bfadf9a8c24875f06c894ec79_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a71b57b4bfadf9a8c24875f06c894ec79_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a71b57b4bfadf9a8c24875f06c894ec79_cgraph">
<area shape="rect" title=" " alt="" coords="5,49,256,89"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab935f3907c57be324fe3e04a553aad0b" title=" " alt="" coords="304,5,464,45"/>
<area shape="poly" title=" " alt="" coords="246,47,290,39,291,44,246,52"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a9e0ac719b5e09ec7392954a9c9fe4174" title=" " alt="" coords="304,93,464,133"/>
<area shape="poly" title=" " alt="" coords="246,87,291,95,290,100,246,92"/>
<area shape="poly" title=" " alt="" coords="345,94,343,84,349,74,363,69,384,67,408,70,422,77,419,82,407,75,384,72,364,74,352,79,348,85,350,92"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a92898db065feb66a9559123f5dc1190e" title=" " alt="" coords="512,61,672,101"/>
<area shape="poly" title=" " alt="" coords="464,98,498,93,499,98,465,104"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#afd15da7dda22daae6756580f198e34da" title=" " alt="" coords="512,125,672,165"/>
<area shape="poly" title=" " alt="" coords="465,123,499,128,498,134,464,128"/>
</map>
</div>

</div>
</div>
<a id="a8cce2ae473046db81897506796042133" name="a8cce2ae473046db81897506796042133"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cce2ae473046db81897506796042133">&#9670;&#160;</a></span>prune_outside_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.prune_outside_window </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Prunes bounding boxes that fall outside a given window.

This function prunes bounding boxes that even partially fall outside the given
window. See also clip_to_window which only prunes bounding boxes that fall
completely outside the window, and clips any bounding boxes that partially
overflow.

Args:
  boxlist: a BoxList holding M_in boxes.
  window: a float tensor of shape [4] representing [ymin, xmin, ymax, xmax]
    of the window
  scope: name scope.

Returns:
  pruned_corners: a tensor with shape [M_out, 4] where M_out &lt;= M_in
  valid_indices: a tensor with shape [M_out] indexing the valid bounding boxes
   in the input tensor.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00146">146</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  146</span><span class="keyword">def </span>prune_outside_window(boxlist, window, scope=None):</div>
<div class="line"><span class="lineno">  147</span>  <span class="stringliteral">&quot;&quot;&quot;Prunes bounding boxes that fall outside a given window.</span></div>
<div class="line"><span class="lineno">  148</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  149</span><span class="stringliteral">  This function prunes bounding boxes that even partially fall outside the given</span></div>
<div class="line"><span class="lineno">  150</span><span class="stringliteral">  window. See also clip_to_window which only prunes bounding boxes that fall</span></div>
<div class="line"><span class="lineno">  151</span><span class="stringliteral">  completely outside the window, </span><span class="keywordflow">and</span> clips any bounding boxes that partially</div>
<div class="line"><span class="lineno">  152</span>  overflow.</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>  Args:</div>
<div class="line"><span class="lineno">  155</span>    boxlist: a BoxList holding M_in boxes.</div>
<div class="line"><span class="lineno">  156</span>    window: a float tensor of shape [4] representing [ymin, xmin, ymax, xmax]</div>
<div class="line"><span class="lineno">  157</span>      of the window</div>
<div class="line"><span class="lineno">  158</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>  Returns:</div>
<div class="line"><span class="lineno">  161</span>    pruned_corners: a tensor <span class="keyword">with</span> shape [M_out, 4] where M_out &lt;= M_in</div>
<div class="line"><span class="lineno">  162</span>    valid_indices: a tensor <span class="keyword">with</span> shape [M_out] indexing the valid bounding boxes</div>
<div class="line"><span class="lineno">  163</span>     <span class="keywordflow">in</span> the input tensor.</div>
<div class="line"><span class="lineno">  164</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  165</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;PruneOutsideWindow&#39;</span>):</div>
<div class="line"><span class="lineno">  166</span>    y_min, x_min, y_max, x_max = tf.split(</div>
<div class="line"><span class="lineno">  167</span>        value=boxlist.get(), num_or_size_splits=4, axis=1)</div>
<div class="line"><span class="lineno">  168</span>    win_y_min, win_x_min, win_y_max, win_x_max = tf.unstack(window)</div>
<div class="line"><span class="lineno">  169</span>    coordinate_violations = tf.concat([</div>
<div class="line"><span class="lineno">  170</span>        tf.less(y_min, win_y_min), tf.less(x_min, win_x_min),</div>
<div class="line"><span class="lineno">  171</span>        tf.greater(y_max, win_y_max), tf.greater(x_max, win_x_max)</div>
<div class="line"><span class="lineno">  172</span>    ], 1)</div>
<div class="line"><span class="lineno">  173</span>    valid_indices = tf.reshape(</div>
<div class="line"><span class="lineno">  174</span>        tf.where(tf.logical_not(tf.reduce_any(coordinate_violations, 1))), [-1])</div>
<div class="line"><span class="lineno">  175</span>    <span class="keywordflow">return</span> gather(boxlist, valid_indices), valid_indices</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a8cce2ae473046db81897506796042133_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a8cce2ae473046db81897506796042133_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a8cce2ae473046db81897506796042133_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a8cce2ae473046db81897506796042133_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,213,45"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab935f3907c57be324fe3e04a553aad0b" title=" " alt="" coords="261,5,421,45"/>
<area shape="poly" title=" " alt="" coords="214,23,248,23,248,28,214,28"/>
</map>
</div>

</div>
</div>
<a id="a121943718c068c50e17a0dbbde02b17e" name="a121943718c068c50e17a0dbbde02b17e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a121943718c068c50e17a0dbbde02b17e">&#9670;&#160;</a></span>prune_small_boxes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.prune_small_boxes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_side</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Prunes small boxes in the boxlist which have a side smaller than min_side.

Args:
  boxlist: BoxList holding N boxes.
  min_side: Minimum width AND height of box to survive pruning.
  scope: name scope.

Returns:
  A pruned boxlist.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00352">352</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  352</span><span class="keyword">def </span>prune_small_boxes(boxlist, min_side, scope=None):</div>
<div class="line"><span class="lineno">  353</span>  <span class="stringliteral">&quot;&quot;&quot;Prunes small boxes in the boxlist which have a side smaller than min_side.</span></div>
<div class="line"><span class="lineno">  354</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  355</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  356</span><span class="stringliteral">    boxlist: BoxList holding N boxes.</span></div>
<div class="line"><span class="lineno">  357</span><span class="stringliteral">    min_side: Minimum width AND height of box to survive pruning.</span></div>
<div class="line"><span class="lineno">  358</span><span class="stringliteral">    scope: name scope.</span></div>
<div class="line"><span class="lineno">  359</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  360</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  361</span><span class="stringliteral">    A pruned boxlist.</span></div>
<div class="line"><span class="lineno">  362</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  363</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;PruneSmallBoxes&#39;</span>):</div>
<div class="line"><span class="lineno">  364</span>    height, width = height_width(boxlist)</div>
<div class="line"><span class="lineno">  365</span>    is_valid = tf.logical_and(tf.greater_equal(width, min_side),</div>
<div class="line"><span class="lineno">  366</span>                              tf.greater_equal(height, min_side))</div>
<div class="line"><span class="lineno">  367</span>    <span class="keywordflow">return</span> gather(boxlist, tf.reshape(tf.where(is_valid), [-1]))</div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a121943718c068c50e17a0dbbde02b17e_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a121943718c068c50e17a0dbbde02b17e_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a121943718c068c50e17a0dbbde02b17e_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a121943718c068c50e17a0dbbde02b17e_cgraph">
<area shape="rect" title=" " alt="" coords="5,37,196,77"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab935f3907c57be324fe3e04a553aad0b" title=" " alt="" coords="244,5,404,45"/>
<area shape="poly" title=" " alt="" coords="196,41,230,36,231,41,197,46"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a30d8f8a23a3ee1a92ed2aded0b20b761" title=" " alt="" coords="244,69,404,109"/>
<area shape="poly" title=" " alt="" coords="197,68,231,73,230,79,196,74"/>
</map>
</div>

</div>
</div>
<a id="a7763ebbaf43a4450d6ae5d0fe88398a7" name="a7763ebbaf43a4450d6ae5d0fe88398a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7763ebbaf43a4450d6ae5d0fe88398a7">&#9670;&#160;</a></span>refine_boxes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.refine_boxes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pool_boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>nms_iou_thresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>nms_max_detections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>voting_iou_thresh</em> = <code>0.5</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Refines a pool of boxes using non max suppression and box voting.

Args:
  pool_boxes: (BoxList) A collection of boxes to be refined. pool_boxes must
    have a rank 1 'scores' field.
  nms_iou_thresh: (float scalar) iou threshold for non max suppression (NMS).
  nms_max_detections: (int scalar) maximum output size for NMS.
  voting_iou_thresh: (float scalar) iou threshold for box voting.

Returns:
  BoxList of refined boxes.

Raises:
  ValueError: if
    a) nms_iou_thresh or voting_iou_thresh is not in [0, 1].
    b) pool_boxes is not a BoxList.
    c) pool_boxes does not have a scores field.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00897">897</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  900</span>                 voting_iou_thresh=0.5):</div>
<div class="line"><span class="lineno">  901</span>  <span class="stringliteral">&quot;&quot;&quot;Refines a pool of boxes using non max suppression and box voting.</span></div>
<div class="line"><span class="lineno">  902</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  903</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  904</span><span class="stringliteral">    pool_boxes: (BoxList) A collection of boxes to be refined. pool_boxes must</span></div>
<div class="line"><span class="lineno">  905</span><span class="stringliteral">      have a rank 1 &#39;scores&#39;</span> field.</div>
<div class="line"><span class="lineno">  906</span>    nms_iou_thresh: (float scalar) iou threshold <span class="keywordflow">for</span> non max suppression (NMS).</div>
<div class="line"><span class="lineno">  907</span>    nms_max_detections: (int scalar) maximum output size <span class="keywordflow">for</span> NMS.</div>
<div class="line"><span class="lineno">  908</span>    voting_iou_thresh: (float scalar) iou threshold <span class="keywordflow">for</span> box voting.</div>
<div class="line"><span class="lineno">  909</span> </div>
<div class="line"><span class="lineno">  910</span>  Returns:</div>
<div class="line"><span class="lineno">  911</span>    BoxList of refined boxes.</div>
<div class="line"><span class="lineno">  912</span> </div>
<div class="line"><span class="lineno">  913</span>  Raises:</div>
<div class="line"><span class="lineno">  914</span>    ValueError: <span class="keywordflow">if</span></div>
<div class="line"><span class="lineno">  915</span>      a) nms_iou_thresh <span class="keywordflow">or</span> voting_iou_thresh <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> [0, 1].</div>
<div class="line"><span class="lineno">  916</span>      b) pool_boxes <span class="keywordflow">is</span> <span class="keywordflow">not</span> a BoxList.</div>
<div class="line"><span class="lineno">  917</span>      c) pool_boxes does <span class="keywordflow">not</span> have a scores field.</div>
<div class="line"><span class="lineno">  918</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  919</span><span class="stringliteral">  </span><span class="keywordflow">if</span> <span class="keywordflow">not</span> 0.0 &lt;= nms_iou_thresh &lt;= 1.0:</div>
<div class="line"><span class="lineno">  920</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;nms_iou_thresh must be between 0 and 1&#39;</span>)</div>
<div class="line"><span class="lineno">  921</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> 0.0 &lt;= voting_iou_thresh &lt;= 1.0:</div>
<div class="line"><span class="lineno">  922</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;voting_iou_thresh must be between 0 and 1&#39;</span>)</div>
<div class="line"><span class="lineno">  923</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(pool_boxes, box_list.BoxList):</div>
<div class="line"><span class="lineno">  924</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;pool_boxes must be a BoxList&#39;</span>)</div>
<div class="line"><span class="lineno">  925</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> pool_boxes.has_field(<span class="stringliteral">&#39;scores&#39;</span>):</div>
<div class="line"><span class="lineno">  926</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;pool_boxes must have a \&#39;scores\&#39; field&#39;</span>)</div>
<div class="line"><span class="lineno">  927</span> </div>
<div class="line"><span class="lineno">  928</span>  nms_boxes = non_max_suppression(</div>
<div class="line"><span class="lineno">  929</span>      pool_boxes, nms_iou_thresh, nms_max_detections)</div>
<div class="line"><span class="lineno">  930</span>  <span class="keywordflow">return</span> box_voting(nms_boxes, pool_boxes, voting_iou_thresh)</div>
<div class="line"><span class="lineno">  931</span> </div>
<div class="line"><span class="lineno">  932</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a7763ebbaf43a4450d6ae5d0fe88398a7_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a7763ebbaf43a4450d6ae5d0fe88398a7_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a7763ebbaf43a4450d6ae5d0fe88398a7_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a7763ebbaf43a4450d6ae5d0fe88398a7_cgraph">
<area shape="rect" title=" " alt="" coords="5,101,165,141"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a6d89634b5541a267c532cd81b4abaf64" title=" " alt="" coords="237,69,397,109"/>
<area shape="poly" title=" " alt="" coords="165,108,224,100,224,105,166,113"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a4f53127d0876cf0b4ab378bf7d2e2ef1" title=" " alt="" coords="213,133,421,173"/>
<area shape="poly" title=" " alt="" coords="166,130,200,134,199,140,165,135"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a3627514ae9ddcaf45f6039284657db24" title=" " alt="" coords="469,5,656,45"/>
<area shape="poly" title=" " alt="" coords="394,67,472,46,473,51,395,72"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a0c3ceb43da9213d701fe159dd5ab3b16" title=" " alt="" coords="483,69,643,109"/>
<area shape="poly" title=" " alt="" coords="397,87,469,87,469,92,397,92"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a92898db065feb66a9559123f5dc1190e" title=" " alt="" coords="704,37,864,77"/>
<area shape="poly" title=" " alt="" coords="643,75,690,68,691,74,643,80"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#afd15da7dda22daae6756580f198e34da" title=" " alt="" coords="704,101,864,141"/>
<area shape="poly" title=" " alt="" coords="643,98,691,105,690,110,643,104"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab935f3907c57be324fe3e04a553aad0b" title=" " alt="" coords="483,133,643,173"/>
<area shape="poly" title=" " alt="" coords="422,151,469,151,469,156,422,156"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a7763ebbaf43a4450d6ae5d0fe88398a7_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a7763ebbaf43a4450d6ae5d0fe88398a7_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a7763ebbaf43a4450d6ae5d0fe88398a7_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a7763ebbaf43a4450d6ae5d0fe88398a7_icgraph">
<area shape="rect" title=" " alt="" coords="213,13,373,53"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a94cd2ba48717a3b24c2889ac73e749f9" title=" " alt="" coords="5,5,165,60"/>
<area shape="poly" title=" " alt="" coords="200,35,166,35,166,30,200,30"/>
</map>
</div>

</div>
</div>
<a id="a94cd2ba48717a3b24c2889ac73e749f9" name="a94cd2ba48717a3b24c2889ac73e749f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94cd2ba48717a3b24c2889ac73e749f9">&#9670;&#160;</a></span>refine_boxes_multi_class()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.refine_boxes_multi_class </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pool_boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>num_classes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>nms_iou_thresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>nms_max_detections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>voting_iou_thresh</em> = <code>0.5</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Refines a pool of boxes using non max suppression and box voting.

Box refinement is done independently for each class.

Args:
  pool_boxes: (BoxList) A collection of boxes to be refined. pool_boxes must
    have a rank 1 'scores' field and a rank 1 'classes' field.
  num_classes: (int scalar) Number of classes.
  nms_iou_thresh: (float scalar) iou threshold for non max suppression (NMS).
  nms_max_detections: (int scalar) maximum output size for NMS.
  voting_iou_thresh: (float scalar) iou threshold for box voting.

Returns:
  BoxList of refined boxes.

Raises:
  ValueError: if
    a) nms_iou_thresh or voting_iou_thresh is not in [0, 1].
    b) pool_boxes is not a BoxList.
    c) pool_boxes does not have a scores and classes field.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00851">851</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  855</span>                             voting_iou_thresh=0.5):</div>
<div class="line"><span class="lineno">  856</span>  <span class="stringliteral">&quot;&quot;&quot;Refines a pool of boxes using non max suppression and box voting.</span></div>
<div class="line"><span class="lineno">  857</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  858</span><span class="stringliteral">  Box refinement </span><span class="keywordflow">is</span> done independently <span class="keywordflow">for</span> each <span class="keyword">class</span>.</div>
<div class="line"><span class="lineno">  859</span> </div>
<div class="line"><span class="lineno">  860</span>  Args:</div>
<div class="line"><span class="lineno">  861</span>    pool_boxes: (BoxList) A collection of boxes to be refined. pool_boxes must</div>
<div class="line"><span class="lineno">  862</span>      have a rank 1 <span class="stringliteral">&#39;scores&#39;</span> field <span class="keywordflow">and</span> a rank 1 <span class="stringliteral">&#39;classes&#39;</span> field.</div>
<div class="line"><span class="lineno">  863</span>    num_classes: (int scalar) Number of classes.</div>
<div class="line"><span class="lineno">  864</span>    nms_iou_thresh: (float scalar) iou threshold <span class="keywordflow">for</span> non max suppression (NMS).</div>
<div class="line"><span class="lineno">  865</span>    nms_max_detections: (int scalar) maximum output size <span class="keywordflow">for</span> NMS.</div>
<div class="line"><span class="lineno">  866</span>    voting_iou_thresh: (float scalar) iou threshold <span class="keywordflow">for</span> box voting.</div>
<div class="line"><span class="lineno">  867</span> </div>
<div class="line"><span class="lineno">  868</span>  Returns:</div>
<div class="line"><span class="lineno">  869</span>    BoxList of refined boxes.</div>
<div class="line"><span class="lineno">  870</span> </div>
<div class="line"><span class="lineno">  871</span>  Raises:</div>
<div class="line"><span class="lineno">  872</span>    ValueError: <span class="keywordflow">if</span></div>
<div class="line"><span class="lineno">  873</span>      a) nms_iou_thresh <span class="keywordflow">or</span> voting_iou_thresh <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> [0, 1].</div>
<div class="line"><span class="lineno">  874</span>      b) pool_boxes <span class="keywordflow">is</span> <span class="keywordflow">not</span> a BoxList.</div>
<div class="line"><span class="lineno">  875</span>      c) pool_boxes does <span class="keywordflow">not</span> have a scores <span class="keywordflow">and</span> classes field.</div>
<div class="line"><span class="lineno">  876</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  877</span><span class="stringliteral">  </span><span class="keywordflow">if</span> <span class="keywordflow">not</span> 0.0 &lt;= nms_iou_thresh &lt;= 1.0:</div>
<div class="line"><span class="lineno">  878</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;nms_iou_thresh must be between 0 and 1&#39;</span>)</div>
<div class="line"><span class="lineno">  879</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> 0.0 &lt;= voting_iou_thresh &lt;= 1.0:</div>
<div class="line"><span class="lineno">  880</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;voting_iou_thresh must be between 0 and 1&#39;</span>)</div>
<div class="line"><span class="lineno">  881</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(pool_boxes, box_list.BoxList):</div>
<div class="line"><span class="lineno">  882</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;pool_boxes must be a BoxList&#39;</span>)</div>
<div class="line"><span class="lineno">  883</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> pool_boxes.has_field(<span class="stringliteral">&#39;scores&#39;</span>):</div>
<div class="line"><span class="lineno">  884</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;pool_boxes must have a \&#39;scores\&#39; field&#39;</span>)</div>
<div class="line"><span class="lineno">  885</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> pool_boxes.has_field(<span class="stringliteral">&#39;classes&#39;</span>):</div>
<div class="line"><span class="lineno">  886</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;pool_boxes must have a \&#39;classes\&#39; field&#39;</span>)</div>
<div class="line"><span class="lineno">  887</span> </div>
<div class="line"><span class="lineno">  888</span>  refined_boxes = []</div>
<div class="line"><span class="lineno">  889</span>  <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(num_classes):</div>
<div class="line"><span class="lineno">  890</span>    boxes_class = filter_field_value_equals(pool_boxes, <span class="stringliteral">&#39;classes&#39;</span>, i)</div>
<div class="line"><span class="lineno">  891</span>    refined_boxes_class = refine_boxes(boxes_class, nms_iou_thresh,</div>
<div class="line"><span class="lineno">  892</span>                                       nms_max_detections, voting_iou_thresh)</div>
<div class="line"><span class="lineno">  893</span>    refined_boxes.append(refined_boxes_class)</div>
<div class="line"><span class="lineno">  894</span>  <span class="keywordflow">return</span> sort_by_field(concatenate(refined_boxes), <span class="stringliteral">&#39;scores&#39;</span>)</div>
<div class="line"><span class="lineno">  895</span> </div>
<div class="line"><span class="lineno">  896</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a94cd2ba48717a3b24c2889ac73e749f9_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a94cd2ba48717a3b24c2889ac73e749f9_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a94cd2ba48717a3b24c2889ac73e749f9_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a94cd2ba48717a3b24c2889ac73e749f9_cgraph">
<area shape="rect" title=" " alt="" coords="5,91,165,146"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a7bdc06a00ef29d99daeab567329d7421" title=" " alt="" coords="213,5,373,45"/>
<area shape="poly" title=" " alt="" coords="140,89,212,55,228,48,230,53,214,60,142,94"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a704393f594559cb69a017b29adfb0eab" title=" " alt="" coords="445,119,605,174"/>
<area shape="poly" title=" " alt="" coords="166,121,432,138,432,143,165,126"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a7763ebbaf43a4450d6ae5d0fe88398a7" title=" " alt="" coords="213,199,373,239"/>
<area shape="poly" title=" " alt="" coords="144,144,240,190,237,195,142,149"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a103f0e0e0eeb3193514895e6b2c9ba94" title=" " alt="" coords="213,69,373,109"/>
<area shape="poly" title=" " alt="" coords="165,105,199,100,200,105,166,110"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab935f3907c57be324fe3e04a553aad0b" title=" " alt="" coords="691,127,851,167"/>
<area shape="poly" title=" " alt="" coords="605,144,677,144,677,149,605,149"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a6d89634b5541a267c532cd81b4abaf64" title=" " alt="" coords="445,263,605,303"/>
<area shape="poly" title=" " alt="" coords="367,236,440,256,439,262,366,241"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a4f53127d0876cf0b4ab378bf7d2e2ef1" title=" " alt="" coords="421,199,629,239"/>
<area shape="poly" title=" " alt="" coords="374,216,408,216,408,221,374,221"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a3627514ae9ddcaf45f6039284657db24" title=" " alt="" coords="677,295,864,335"/>
<area shape="poly" title=" " alt="" coords="606,290,664,298,663,303,605,296"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a0c3ceb43da9213d701fe159dd5ab3b16" title=" " alt="" coords="691,231,851,271"/>
<area shape="poly" title=" " alt="" coords="605,270,677,260,677,266,606,275"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a92898db065feb66a9559123f5dc1190e" title=" " alt="" coords="912,199,1072,239"/>
<area shape="poly" title=" " alt="" coords="851,236,898,230,899,235,851,242"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#afd15da7dda22daae6756580f198e34da" title=" " alt="" coords="912,263,1072,303"/>
<area shape="poly" title=" " alt="" coords="851,260,899,266,898,272,851,265"/>
<area shape="poly" title=" " alt="" coords="594,196,688,168,690,173,595,201"/>
<area shape="poly" title=" " alt="" coords="374,86,495,91,630,105,695,120,694,125,629,111,494,96,374,92"/>
</map>
</div>

</div>
</div>
<a id="a15808676e298dede166cab386896e46c" name="a15808676e298dede166cab386896e46c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15808676e298dede166cab386896e46c">&#9670;&#160;</a></span>sample_boxes_by_jittering()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.sample_boxes_by_jittering </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>num_boxes_to_sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>stddev</em> = <code>0.1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Samples num_boxes_to_sample boxes by jittering around boxlist boxes.

It is possible that this function might generate boxes with size 0. The larger
the stddev, this is more probable. For a small stddev of 0.1 this probability
is very small.

Args:
  boxlist: A boxlist containing N boxes in normalized coordinates.
  num_boxes_to_sample: A positive integer containing the number of boxes to
    sample.
  stddev: Standard deviation. This is used to draw random offsets for the
    box corners from a normal distribution. The offset is multiplied by the
    box size so will be larger in terms of pixels for larger boxes.
  scope: Name scope.

Returns:
  sampled_boxlist: A boxlist containing num_boxes_to_sample boxes in
    normalized coordinates.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l01096">1096</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1099</span>                              scope=<span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno"> 1100</span>  <span class="stringliteral">&quot;&quot;&quot;Samples num_boxes_to_sample boxes by jittering around boxlist boxes.</span></div>
<div class="line"><span class="lineno"> 1101</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1102</span><span class="stringliteral">  It </span><span class="keywordflow">is</span> possible that this function might generate boxes <span class="keyword">with</span> size 0. The larger</div>
<div class="line"><span class="lineno"> 1103</span>  the stddev, this <span class="keywordflow">is</span> more probable. For a small stddev of 0.1 this probability</div>
<div class="line"><span class="lineno"> 1104</span>  <span class="keywordflow">is</span> very small.</div>
<div class="line"><span class="lineno"> 1105</span> </div>
<div class="line"><span class="lineno"> 1106</span>  Args:</div>
<div class="line"><span class="lineno"> 1107</span>    boxlist: A boxlist containing N boxes <span class="keywordflow">in</span> normalized coordinates.</div>
<div class="line"><span class="lineno"> 1108</span>    num_boxes_to_sample: A positive integer containing the number of boxes to</div>
<div class="line"><span class="lineno"> 1109</span>      sample.</div>
<div class="line"><span class="lineno"> 1110</span>    stddev: Standard deviation. This <span class="keywordflow">is</span> used to draw random offsets <span class="keywordflow">for</span> the</div>
<div class="line"><span class="lineno"> 1111</span>      box corners <span class="keyword">from</span> a normal distribution. The offset <span class="keywordflow">is</span> multiplied by the</div>
<div class="line"><span class="lineno"> 1112</span>      box size so will be larger <span class="keywordflow">in</span> terms of pixels <span class="keywordflow">for</span> larger boxes.</div>
<div class="line"><span class="lineno"> 1113</span>    scope: Name scope.</div>
<div class="line"><span class="lineno"> 1114</span> </div>
<div class="line"><span class="lineno"> 1115</span>  Returns:</div>
<div class="line"><span class="lineno"> 1116</span>    sampled_boxlist: A boxlist containing num_boxes_to_sample boxes <span class="keywordflow">in</span></div>
<div class="line"><span class="lineno"> 1117</span>      normalized coordinates.</div>
<div class="line"><span class="lineno"> 1118</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1119</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;SampleBoxesByJittering&#39;</span>):</div>
<div class="line"><span class="lineno"> 1120</span>    num_boxes = boxlist.num_boxes()</div>
<div class="line"><span class="lineno"> 1121</span>    box_indices = tf.random_uniform(</div>
<div class="line"><span class="lineno"> 1122</span>        [num_boxes_to_sample],</div>
<div class="line"><span class="lineno"> 1123</span>        minval=0,</div>
<div class="line"><span class="lineno"> 1124</span>        maxval=num_boxes,</div>
<div class="line"><span class="lineno"> 1125</span>        dtype=tf.int32)</div>
<div class="line"><span class="lineno"> 1126</span>    sampled_boxes = tf.gather(boxlist.get(), box_indices)</div>
<div class="line"><span class="lineno"> 1127</span>    sampled_boxes_height = sampled_boxes[:, 2] - sampled_boxes[:, 0]</div>
<div class="line"><span class="lineno"> 1128</span>    sampled_boxes_width = sampled_boxes[:, 3] - sampled_boxes[:, 1]</div>
<div class="line"><span class="lineno"> 1129</span>    rand_miny_gaussian = tf.random_normal([num_boxes_to_sample], stddev=stddev)</div>
<div class="line"><span class="lineno"> 1130</span>    rand_minx_gaussian = tf.random_normal([num_boxes_to_sample], stddev=stddev)</div>
<div class="line"><span class="lineno"> 1131</span>    rand_maxy_gaussian = tf.random_normal([num_boxes_to_sample], stddev=stddev)</div>
<div class="line"><span class="lineno"> 1132</span>    rand_maxx_gaussian = tf.random_normal([num_boxes_to_sample], stddev=stddev)</div>
<div class="line"><span class="lineno"> 1133</span>    miny = rand_miny_gaussian * sampled_boxes_height + sampled_boxes[:, 0]</div>
<div class="line"><span class="lineno"> 1134</span>    minx = rand_minx_gaussian * sampled_boxes_width + sampled_boxes[:, 1]</div>
<div class="line"><span class="lineno"> 1135</span>    maxy = rand_maxy_gaussian * sampled_boxes_height + sampled_boxes[:, 2]</div>
<div class="line"><span class="lineno"> 1136</span>    maxx = rand_maxx_gaussian * sampled_boxes_width + sampled_boxes[:, 3]</div>
<div class="line"><span class="lineno"> 1137</span>    maxy = tf.maximum(miny, maxy)</div>
<div class="line"><span class="lineno"> 1138</span>    maxx = tf.maximum(minx, maxx)</div>
<div class="line"><span class="lineno"> 1139</span>    sampled_boxes = tf.stack([miny, minx, maxy, maxx], axis=1)</div>
<div class="line"><span class="lineno"> 1140</span>    sampled_boxes = tf.maximum(tf.minimum(sampled_boxes, 1.0), 0.0)</div>
<div class="line"><span class="lineno"> 1141</span>    <span class="keywordflow">return</span> box_list.BoxList(sampled_boxes)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a890e93aacb6d9ba7532251c3047d53fd" name="a890e93aacb6d9ba7532251c3047d53fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a890e93aacb6d9ba7532251c3047d53fd">&#9670;&#160;</a></span>scale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.scale </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x_scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">scale box coordinates in x and y dimensions.

Args:
  boxlist: BoxList holding N boxes
  y_scale: (float) scalar tensor
  x_scale: (float) scalar tensor
  scope: name scope.

Returns:
  boxlist: BoxList holding N boxes
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00082">82</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   82</span><span class="keyword">def </span>scale(boxlist, y_scale, x_scale, scope=None):</div>
<div class="line"><span class="lineno">   83</span>  <span class="stringliteral">&quot;&quot;&quot;scale box coordinates in x and y dimensions.</span></div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">    boxlist: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">   87</span><span class="stringliteral">    y_scale: (float) scalar tensor</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral">    x_scale: (float) scalar tensor</span></div>
<div class="line"><span class="lineno">   89</span><span class="stringliteral">    scope: name scope.</span></div>
<div class="line"><span class="lineno">   90</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   91</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">   92</span><span class="stringliteral">    boxlist: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">   93</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   94</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;Scale&#39;</span>):</div>
<div class="line"><span class="lineno">   95</span>    y_scale = tf.cast(y_scale, tf.float32)</div>
<div class="line"><span class="lineno">   96</span>    x_scale = tf.cast(x_scale, tf.float32)</div>
<div class="line"><span class="lineno">   97</span>    y_min, x_min, y_max, x_max = tf.split(</div>
<div class="line"><span class="lineno">   98</span>        value=boxlist.get(), num_or_size_splits=4, axis=1)</div>
<div class="line"><span class="lineno">   99</span>    y_min = y_scale * y_min</div>
<div class="line"><span class="lineno">  100</span>    y_max = y_scale * y_max</div>
<div class="line"><span class="lineno">  101</span>    x_min = x_scale * x_min</div>
<div class="line"><span class="lineno">  102</span>    x_max = x_scale * x_max</div>
<div class="line"><span class="lineno">  103</span>    scaled_boxlist = box_list.BoxList(</div>
<div class="line"><span class="lineno">  104</span>        tf.concat([y_min, x_min, y_max, x_max], 1))</div>
<div class="line"><span class="lineno">  105</span>    <span class="keywordflow">return</span> _copy_extra_fields(scaled_boxlist, boxlist)</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a890e93aacb6d9ba7532251c3047d53fd_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a890e93aacb6d9ba7532251c3047d53fd_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a890e93aacb6d9ba7532251c3047d53fd_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a890e93aacb6d9ba7532251c3047d53fd_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,165,45"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a3627514ae9ddcaf45f6039284657db24" title=" " alt="" coords="213,5,400,45"/>
<area shape="poly" title=" " alt="" coords="166,23,200,23,200,28,166,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a890e93aacb6d9ba7532251c3047d53fd_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a890e93aacb6d9ba7532251c3047d53fd_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a890e93aacb6d9ba7532251c3047d53fd_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a890e93aacb6d9ba7532251c3047d53fd_icgraph">
<area shape="rect" title=" " alt="" coords="280,105,440,145"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a725390a73d7d904bf824344014ed055c" title=" " alt="" coords="5,5,232,45"/>
<area shape="poly" title=" " alt="" coords="313,101,231,60,198,48,199,43,233,55,315,96"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ada89676fbe54301964c23a14e0260a8c" title=" " alt="" coords="9,69,228,109"/>
<area shape="poly" title=" " alt="" coords="266,114,228,108,229,103,267,109"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a8a6b7f0a6aa75c518f14f90c8480c146" title=" " alt="" coords="39,134,199,189"/>
<area shape="poly" title=" " alt="" coords="267,142,199,152,198,147,266,137"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab18840a73551ff7a36605bc8e53552e4" title=" " alt="" coords="34,213,203,267"/>
<area shape="poly" title=" " alt="" coords="318,155,233,202,204,215,202,210,231,198,315,151"/>
</map>
</div>

</div>
</div>
<a id="a4bce696e11d0578132e9c0e56ab93167" name="a4bce696e11d0578132e9c0e56ab93167"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bce696e11d0578132e9c0e56ab93167">&#9670;&#160;</a></span>select_random_box()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.select_random_box </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>default_box</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>seed</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Selects a random bounding box from a `BoxList`.

Args:
  boxlist: A BoxList.
  default_box: A [1, 4] float32 tensor. If no boxes are present in `boxlist`,
    this default box will be returned. If None, will use a default box of
    [[-1., -1., -1., -1.]].
  seed: Random seed.
  scope: Name scope.

Returns:
  bbox: A [1, 4] tensor with a random bounding box.
  valid: A bool tensor indicating whether a valid bounding box is returned
    (True) or whether the default box is returned (False).
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l01020">1020</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1023</span>                      scope=<span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno"> 1024</span>  <span class="stringliteral">&quot;&quot;&quot;Selects a random bounding box from a `BoxList`.</span></div>
<div class="line"><span class="lineno"> 1025</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1026</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno"> 1027</span><span class="stringliteral">    boxlist: A BoxList.</span></div>
<div class="line"><span class="lineno"> 1028</span><span class="stringliteral">    default_box: A [1, 4] float32 tensor. If no boxes are present </span><span class="keywordflow">in</span> `boxlist`,</div>
<div class="line"><span class="lineno"> 1029</span>      this default box will be returned. If <span class="keywordtype">None</span>, will use a default box of</div>
<div class="line"><span class="lineno"> 1030</span>      [[-1., -1., -1., -1.]].</div>
<div class="line"><span class="lineno"> 1031</span>    seed: Random seed.</div>
<div class="line"><span class="lineno"> 1032</span>    scope: Name scope.</div>
<div class="line"><span class="lineno"> 1033</span> </div>
<div class="line"><span class="lineno"> 1034</span>  Returns:</div>
<div class="line"><span class="lineno"> 1035</span>    bbox: A [1, 4] tensor <span class="keyword">with</span> a random bounding box.</div>
<div class="line"><span class="lineno"> 1036</span>    valid: A bool tensor indicating whether a valid bounding box <span class="keywordflow">is</span> returned</div>
<div class="line"><span class="lineno"> 1037</span>      (<span class="keyword">True</span>) <span class="keywordflow">or</span> whether the default box <span class="keywordflow">is</span> returned (<span class="keyword">False</span>).</div>
<div class="line"><span class="lineno"> 1038</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1039</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;SelectRandomBox&#39;</span>):</div>
<div class="line"><span class="lineno"> 1040</span>    bboxes = boxlist.get()</div>
<div class="line"><span class="lineno"> 1041</span>    combined_shape = shape_utils.combined_static_and_dynamic_shape(bboxes)</div>
<div class="line"><span class="lineno"> 1042</span>    number_of_boxes = combined_shape[0]</div>
<div class="line"><span class="lineno"> 1043</span>    default_box = default_box <span class="keywordflow">or</span> tf.constant([[-1., -1., -1., -1.]])</div>
<div class="line"><span class="lineno"> 1044</span> </div>
<div class="line"><span class="lineno"> 1045</span>    <span class="keyword">def </span>select_box():</div>
<div class="line"><span class="lineno"> 1046</span>      random_index = tf.random_uniform([],</div>
<div class="line"><span class="lineno"> 1047</span>                                       maxval=number_of_boxes,</div>
<div class="line"><span class="lineno"> 1048</span>                                       dtype=tf.int32,</div>
<div class="line"><span class="lineno"> 1049</span>                                       seed=seed)</div>
<div class="line"><span class="lineno"> 1050</span>      <span class="keywordflow">return</span> tf.expand_dims(bboxes[random_index], axis=0), tf.constant(<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1051</span> </div>
<div class="line"><span class="lineno"> 1052</span>  <span class="keywordflow">return</span> tf.cond(</div>
<div class="line"><span class="lineno"> 1053</span>      tf.greater_equal(number_of_boxes, 1),</div>
<div class="line"><span class="lineno"> 1054</span>      true_fn=select_box,</div>
<div class="line"><span class="lineno"> 1055</span>      false_fn=<span class="keyword">lambda</span>: (default_box, tf.constant(<span class="keyword">False</span>)))</div>
<div class="line"><span class="lineno"> 1056</span> </div>
<div class="line"><span class="lineno"> 1057</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a103f0e0e0eeb3193514895e6b2c9ba94" name="a103f0e0e0eeb3193514895e6b2c9ba94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a103f0e0e0eeb3193514895e6b2c9ba94">&#9670;&#160;</a></span>sort_by_field()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.sort_by_field </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>order</em> = <code><a class="el" href="../../de/d0f/classdetection__utils_1_1core_1_1box__list__ops_1_1_sort_order.html#a50eb8b077a78822f0085d91664f9226d">SortOrder.descend</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Sort boxes and associated fields according to a scalar field.

A common use case is reordering the boxes according to descending scores.

Args:
  boxlist: BoxList holding N boxes.
  field: A BoxList field for sorting and reordering the BoxList.
  order: (Optional) descend or ascend. Default is descend.
  scope: name scope.

Returns:
  sorted_boxlist: A sorted BoxList with the field in the specified order.

Raises:
  ValueError: if specified field does not exist
  ValueError: if the order is not either descend or ascend
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00590">590</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  590</span><span class="keyword">def </span>sort_by_field(boxlist, field, order=SortOrder.descend, scope=None):</div>
<div class="line"><span class="lineno">  591</span>  <span class="stringliteral">&quot;&quot;&quot;Sort boxes and associated fields according to a scalar field.</span></div>
<div class="line"><span class="lineno">  592</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  593</span><span class="stringliteral">  A common use case </span><span class="keywordflow">is</span> reordering the boxes according to descending scores.</div>
<div class="line"><span class="lineno">  594</span> </div>
<div class="line"><span class="lineno">  595</span>  Args:</div>
<div class="line"><span class="lineno">  596</span>    boxlist: BoxList holding N boxes.</div>
<div class="line"><span class="lineno">  597</span>    field: A BoxList field <span class="keywordflow">for</span> sorting <span class="keywordflow">and</span> reordering the BoxList.</div>
<div class="line"><span class="lineno">  598</span>    order: (Optional) descend <span class="keywordflow">or</span> ascend. Default <span class="keywordflow">is</span> descend.</div>
<div class="line"><span class="lineno">  599</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  600</span> </div>
<div class="line"><span class="lineno">  601</span>  Returns:</div>
<div class="line"><span class="lineno">  602</span>    sorted_boxlist: A sorted BoxList <span class="keyword">with</span> the field <span class="keywordflow">in</span> the specified order.</div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span>  Raises:</div>
<div class="line"><span class="lineno">  605</span>    ValueError: <span class="keywordflow">if</span> specified field does <span class="keywordflow">not</span> exist</div>
<div class="line"><span class="lineno">  606</span>    ValueError: <span class="keywordflow">if</span> the order <span class="keywordflow">is</span> <span class="keywordflow">not</span> either descend <span class="keywordflow">or</span> ascend</div>
<div class="line"><span class="lineno">  607</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  608</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;SortByField&#39;</span>):</div>
<div class="line"><span class="lineno">  609</span>    <span class="keywordflow">if</span> order != SortOrder.descend <span class="keywordflow">and</span> order != SortOrder.ascend:</div>
<div class="line"><span class="lineno">  610</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;Invalid sort order&#39;</span>)</div>
<div class="line"><span class="lineno">  611</span> </div>
<div class="line"><span class="lineno">  612</span>    field_to_sort = boxlist.get_field(field)</div>
<div class="line"><span class="lineno">  613</span>    <span class="keywordflow">if</span> len(field_to_sort.shape.as_list()) != 1:</div>
<div class="line"><span class="lineno">  614</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;Field should have rank 1&#39;</span>)</div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span>    num_boxes = boxlist.num_boxes()</div>
<div class="line"><span class="lineno">  617</span>    num_entries = tf.size(field_to_sort)</div>
<div class="line"><span class="lineno">  618</span>    length_assert = tf.Assert(</div>
<div class="line"><span class="lineno">  619</span>        tf.equal(num_boxes, num_entries),</div>
<div class="line"><span class="lineno">  620</span>        [<span class="stringliteral">&#39;Incorrect field size: actual vs expected.&#39;</span>, num_entries, num_boxes])</div>
<div class="line"><span class="lineno">  621</span> </div>
<div class="line"><span class="lineno">  622</span>    <span class="keyword">with</span> tf.control_dependencies([length_assert]):</div>
<div class="line"><span class="lineno">  623</span>      _, sorted_indices = tf.nn.top_k(field_to_sort, num_boxes, sorted=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  624</span> </div>
<div class="line"><span class="lineno">  625</span>    <span class="keywordflow">if</span> order == SortOrder.ascend:</div>
<div class="line"><span class="lineno">  626</span>      sorted_indices = tf.reverse_v2(sorted_indices, [0])</div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>    <span class="keywordflow">return</span> gather(boxlist, sorted_indices)</div>
<div class="line"><span class="lineno">  629</span> </div>
<div class="line"><span class="lineno">  630</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a103f0e0e0eeb3193514895e6b2c9ba94_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a103f0e0e0eeb3193514895e6b2c9ba94_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a103f0e0e0eeb3193514895e6b2c9ba94_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a103f0e0e0eeb3193514895e6b2c9ba94_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,165,45"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#ab935f3907c57be324fe3e04a553aad0b" title=" " alt="" coords="213,5,373,45"/>
<area shape="poly" title=" " alt="" coords="165,23,199,23,199,28,165,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a103f0e0e0eeb3193514895e6b2c9ba94_icgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a103f0e0e0eeb3193514895e6b2c9ba94_icgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a103f0e0e0eeb3193514895e6b2c9ba94_icgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a103f0e0e0eeb3193514895e6b2c9ba94_icgraph">
<area shape="rect" title=" " alt="" coords="213,13,373,53"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a94cd2ba48717a3b24c2889ac73e749f9" title=" " alt="" coords="5,5,165,60"/>
<area shape="poly" title=" " alt="" coords="200,35,166,35,166,30,200,30"/>
</map>
</div>

</div>
</div>
<a id="a2e9b6ea6358fa09ac69ff5f20e6696ee" name="a2e9b6ea6358fa09ac69ff5f20e6696ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e9b6ea6358fa09ac69ff5f20e6696ee">&#9670;&#160;</a></span>sq_dist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.sq_dist </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Computes the pairwise squared distances between box corners.

This op treats each box as if it were a point in a 4d Euclidean space and
computes pairwise squared distances.

Mathematically, we are given two matrices of box coordinates X and Y,
where X(i,:) is the i'th row of X, containing the 4 numbers defining the
corners of the i'th box in boxlist1. Similarly Y(j,:) corresponds to
boxlist2.  We compute
Z(i,j) = ||X(i,:) - Y(j,:)||^2
       = ||X(i,:)||^2 + ||Y(j,:)||^2 - 2 X(i,:)' * Y(j,:),

Args:
  boxlist1: BoxList holding N boxes
  boxlist2: BoxList holding M boxes
  scope: name scope.

Returns:
  a tensor with shape [N, M] representing pairwise distances
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00400">400</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  400</span><span class="keyword">def </span>sq_dist(boxlist1, boxlist2, scope=None):</div>
<div class="line"><span class="lineno">  401</span>  <span class="stringliteral">&quot;&quot;&quot;Computes the pairwise squared distances between box corners.</span></div>
<div class="line"><span class="lineno">  402</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  403</span><span class="stringliteral">  This op treats each box </span><span class="keyword">as</span> <span class="keywordflow">if</span> it were a point <span class="keywordflow">in</span> a 4d Euclidean space <span class="keywordflow">and</span></div>
<div class="line"><span class="lineno">  404</span>  computes pairwise squared distances.</div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span>  Mathematically, we are given two matrices of box coordinates X <span class="keywordflow">and</span> Y,</div>
<div class="line"><span class="lineno">  407</span>  where X(i,:) <span class="keywordflow">is</span> the i<span class="stringliteral">&#39;th row of X, containing the 4 numbers defining the</span></div>
<div class="line"><span class="lineno">  408</span><span class="stringliteral">  corners of the i&#39;th box in boxlist1. Similarly Y(j,:) corresponds to</span></div>
<div class="line"><span class="lineno">  409</span><span class="stringliteral">  boxlist2.  We compute</span></div>
<div class="line"><span class="lineno">  410</span><span class="stringliteral">  Z(i,j) = ||X(i,:) - Y(j,:)||^2</span></div>
<div class="line"><span class="lineno">  411</span><span class="stringliteral">         = ||X(i,:)||^2 + ||Y(j,:)||^2 - 2 X(i,:)&#39; * Y(j,:),</span></div>
<div class="line"><span class="lineno">  412</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  413</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  414</span><span class="stringliteral">    boxlist1: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">  415</span><span class="stringliteral">    boxlist2: BoxList holding M boxes</span></div>
<div class="line"><span class="lineno">  416</span><span class="stringliteral">    scope: name scope.</span></div>
<div class="line"><span class="lineno">  417</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  418</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  419</span><span class="stringliteral">    a tensor </span><span class="keyword">with</span> shape [N, M] representing pairwise distances</div>
<div class="line"><span class="lineno">  420</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  421</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;SqDist&#39;</span>):</div>
<div class="line"><span class="lineno">  422</span>    sqnorm1 = tf.reduce_sum(tf.square(boxlist1.get()), 1, keep_dims=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  423</span>    sqnorm2 = tf.reduce_sum(tf.square(boxlist2.get()), 1, keep_dims=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  424</span>    innerprod = tf.matmul(boxlist1.get(), boxlist2.get(),</div>
<div class="line"><span class="lineno">  425</span>                          transpose_a=<span class="keyword">False</span>, transpose_b=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  426</span>    <span class="keywordflow">return</span> sqnorm1 + tf.transpose(sqnorm2) - 2.0 * innerprod</div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ada89676fbe54301964c23a14e0260a8c" name="ada89676fbe54301964c23a14e0260a8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada89676fbe54301964c23a14e0260a8c">&#9670;&#160;</a></span>to_absolute_coordinates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.to_absolute_coordinates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>check_range</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>maximum_normalized_coordinate</em> = <code>1.1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Converts normalized box coordinates to absolute pixel coordinates.

This function raises an assertion failed error when the maximum box coordinate
value is larger than maximum_normalized_coordinate (in which case coordinates
are already absolute).

Args:
  boxlist: BoxList with coordinates in range [0, 1].
  height: Maximum value for height of absolute box coordinates.
  width: Maximum value for width of absolute box coordinates.
  check_range: If True, checks if the coordinates are normalized or not.
  maximum_normalized_coordinate: Maximum coordinate value to be considered
    as normalized, default to 1.1.
  scope: name scope.

Returns:
  boxlist with absolute coordinates in terms of the image size.</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00809">809</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  814</span>                            scope=<span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno">  815</span>  <span class="stringliteral">&quot;&quot;&quot;Converts normalized box coordinates to absolute pixel coordinates.</span></div>
<div class="line"><span class="lineno">  816</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  817</span><span class="stringliteral">  This function raises an assertion failed error when the maximum box coordinate</span></div>
<div class="line"><span class="lineno">  818</span><span class="stringliteral">  value </span><span class="keywordflow">is</span> larger than maximum_normalized_coordinate (<span class="keywordflow">in</span> which case coordinates</div>
<div class="line"><span class="lineno">  819</span>  are already absolute).</div>
<div class="line"><span class="lineno">  820</span> </div>
<div class="line"><span class="lineno">  821</span>  Args:</div>
<div class="line"><span class="lineno">  822</span>    boxlist: BoxList <span class="keyword">with</span> coordinates <span class="keywordflow">in</span> range [0, 1].</div>
<div class="line"><span class="lineno">  823</span>    height: Maximum value <span class="keywordflow">for</span> height of absolute box coordinates.</div>
<div class="line"><span class="lineno">  824</span>    width: Maximum value <span class="keywordflow">for</span> width of absolute box coordinates.</div>
<div class="line"><span class="lineno">  825</span>    check_range: If <span class="keyword">True</span>, checks <span class="keywordflow">if</span> the coordinates are normalized <span class="keywordflow">or</span> <span class="keywordflow">not</span>.</div>
<div class="line"><span class="lineno">  826</span>    maximum_normalized_coordinate: Maximum coordinate value to be considered</div>
<div class="line"><span class="lineno">  827</span>      <span class="keyword">as</span> normalized, default to 1.1.</div>
<div class="line"><span class="lineno">  828</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  829</span> </div>
<div class="line"><span class="lineno">  830</span>  Returns:</div>
<div class="line"><span class="lineno">  831</span>    boxlist <span class="keyword">with</span> absolute coordinates <span class="keywordflow">in</span> terms of the image size.</div>
<div class="line"><span class="lineno">  832</span> </div>
<div class="line"><span class="lineno">  833</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  834</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;ToAbsoluteCoordinates&#39;</span>):</div>
<div class="line"><span class="lineno">  835</span>    height = tf.cast(height, tf.float32)</div>
<div class="line"><span class="lineno">  836</span>    width = tf.cast(width, tf.float32)</div>
<div class="line"><span class="lineno">  837</span> </div>
<div class="line"><span class="lineno">  838</span>    <span class="comment"># Ensure range of input boxes is correct.</span></div>
<div class="line"><span class="lineno">  839</span>    <span class="keywordflow">if</span> check_range:</div>
<div class="line"><span class="lineno">  840</span>      box_maximum = tf.reduce_max(boxlist.get())</div>
<div class="line"><span class="lineno">  841</span>      max_assert = tf.Assert(</div>
<div class="line"><span class="lineno">  842</span>          tf.greater_equal(maximum_normalized_coordinate, box_maximum),</div>
<div class="line"><span class="lineno">  843</span>          [<span class="stringliteral">&#39;maximum box coordinate value is larger &#39;</span></div>
<div class="line"><span class="lineno">  844</span>           <span class="stringliteral">&#39;than %f: &#39;</span> % maximum_normalized_coordinate, box_maximum])</div>
<div class="line"><span class="lineno">  845</span>      <span class="keyword">with</span> tf.control_dependencies([max_assert]):</div>
<div class="line"><span class="lineno">  846</span>        width = tf.identity(width)</div>
<div class="line"><span class="lineno">  847</span> </div>
<div class="line"><span class="lineno">  848</span>    <span class="keywordflow">return</span> scale(boxlist, height, width)</div>
<div class="line"><span class="lineno">  849</span> </div>
<div class="line"><span class="lineno">  850</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ada89676fbe54301964c23a14e0260a8c_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ada89676fbe54301964c23a14e0260a8c_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ada89676fbe54301964c23a14e0260a8c_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ada89676fbe54301964c23a14e0260a8c_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,224,45"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a890e93aacb6d9ba7532251c3047d53fd" title=" " alt="" coords="272,5,432,45"/>
<area shape="poly" title=" " alt="" coords="224,23,258,23,258,28,224,28"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a3627514ae9ddcaf45f6039284657db24" title=" " alt="" coords="480,5,667,45"/>
<area shape="poly" title=" " alt="" coords="432,23,466,23,466,28,432,28"/>
</map>
</div>

</div>
</div>
<a id="a8a6b7f0a6aa75c518f14f90c8480c146" name="a8a6b7f0a6aa75c518f14f90c8480c146"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a6b7f0a6aa75c518f14f90c8480c146">&#9670;&#160;</a></span>to_normalized_coordinates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.to_normalized_coordinates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>check_range</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Converts absolute box coordinates to normalized coordinates in [0, 1].

Usually one uses the dynamic shape of the image or conv-layer tensor:
  boxlist = box_list_ops.to_normalized_coordinates(boxlist,
                                                   tf.shape(images)[1],
                                                   tf.shape(images)[2]),

This function raises an assertion failed error at graph execution time when
the maximum coordinate is smaller than 1.01 (which means that coordinates are
already normalized). The value 1.01 is to deal with small rounding errors.

Args:
  boxlist: BoxList with coordinates in terms of pixel-locations.
  height: Maximum value for height of absolute box coordinates.
  width: Maximum value for width of absolute box coordinates.
  check_range: If True, checks if the coordinates are normalized or not.
  scope: name scope.

Returns:
  boxlist with normalized coordinates in [0, 1].
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00772">772</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  773</span>                              check_range=<span class="keyword">True</span>, scope=<span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno">  774</span>  <span class="stringliteral">&quot;&quot;&quot;Converts absolute box coordinates to normalized coordinates in [0, 1].</span></div>
<div class="line"><span class="lineno">  775</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  776</span><span class="stringliteral">  Usually one uses the dynamic shape of the image </span><span class="keywordflow">or</span> conv-layer tensor:</div>
<div class="line"><span class="lineno">  777</span>    boxlist = box_list_ops.to_normalized_coordinates(boxlist,</div>
<div class="line"><span class="lineno">  778</span>                                                     tf.shape(images)[1],</div>
<div class="line"><span class="lineno">  779</span>                                                     tf.shape(images)[2]),</div>
<div class="line"><span class="lineno">  780</span> </div>
<div class="line"><span class="lineno">  781</span>  This function raises an assertion failed error at graph execution time when</div>
<div class="line"><span class="lineno">  782</span>  the maximum coordinate <span class="keywordflow">is</span> smaller than 1.01 (which means that coordinates are</div>
<div class="line"><span class="lineno">  783</span>  already normalized). The value 1.01 <span class="keywordflow">is</span> to deal <span class="keyword">with</span> small rounding errors.</div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>  Args:</div>
<div class="line"><span class="lineno">  786</span>    boxlist: BoxList <span class="keyword">with</span> coordinates <span class="keywordflow">in</span> terms of pixel-locations.</div>
<div class="line"><span class="lineno">  787</span>    height: Maximum value <span class="keywordflow">for</span> height of absolute box coordinates.</div>
<div class="line"><span class="lineno">  788</span>    width: Maximum value <span class="keywordflow">for</span> width of absolute box coordinates.</div>
<div class="line"><span class="lineno">  789</span>    check_range: If <span class="keyword">True</span>, checks <span class="keywordflow">if</span> the coordinates are normalized <span class="keywordflow">or</span> <span class="keywordflow">not</span>.</div>
<div class="line"><span class="lineno">  790</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  791</span> </div>
<div class="line"><span class="lineno">  792</span>  Returns:</div>
<div class="line"><span class="lineno">  793</span>    boxlist <span class="keyword">with</span> normalized coordinates <span class="keywordflow">in</span> [0, 1].</div>
<div class="line"><span class="lineno">  794</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  795</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;ToNormalizedCoordinates&#39;</span>):</div>
<div class="line"><span class="lineno">  796</span>    height = tf.cast(height, tf.float32)</div>
<div class="line"><span class="lineno">  797</span>    width = tf.cast(width, tf.float32)</div>
<div class="line"><span class="lineno">  798</span> </div>
<div class="line"><span class="lineno">  799</span>    <span class="keywordflow">if</span> check_range:</div>
<div class="line"><span class="lineno">  800</span>      max_val = tf.reduce_max(boxlist.get())</div>
<div class="line"><span class="lineno">  801</span>      max_assert = tf.Assert(tf.greater(max_val, 1.01),</div>
<div class="line"><span class="lineno">  802</span>                             [<span class="stringliteral">&#39;max value is lower than 1.01: &#39;</span>, max_val])</div>
<div class="line"><span class="lineno">  803</span>      <span class="keyword">with</span> tf.control_dependencies([max_assert]):</div>
<div class="line"><span class="lineno">  804</span>        width = tf.identity(width)</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>    <span class="keywordflow">return</span> scale(boxlist, 1 / height, 1 / width)</div>
<div class="line"><span class="lineno">  807</span> </div>
<div class="line"><span class="lineno">  808</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a8a6b7f0a6aa75c518f14f90c8480c146_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a8a6b7f0a6aa75c518f14f90c8480c146_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a8a6b7f0a6aa75c518f14f90c8480c146_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_a8a6b7f0a6aa75c518f14f90c8480c146_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,165,60"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a890e93aacb6d9ba7532251c3047d53fd" title=" " alt="" coords="213,13,373,53"/>
<area shape="poly" title=" " alt="" coords="165,30,199,30,199,35,165,35"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a3627514ae9ddcaf45f6039284657db24" title=" " alt="" coords="421,13,608,53"/>
<area shape="poly" title=" " alt="" coords="374,30,408,30,408,35,374,35"/>
</map>
</div>

</div>
</div>
<a id="ab18840a73551ff7a36605bc8e53552e4" name="ab18840a73551ff7a36605bc8e53552e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab18840a73551ff7a36605bc8e53552e4">&#9670;&#160;</a></span>visualize_boxes_in_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.box_list_ops.visualize_boxes_in_image </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalized</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Overlay bounding box list on image.

Currently this visualization plots a 1 pixel thick red bounding box on top
of the image.  Note that tf.image.draw_bounding_boxes essentially is
1 indexed.

Args:
  image: an image tensor with shape [height, width, 3]
  boxlist: a BoxList
  normalized: (boolean) specify whether corners are to be interpreted
    as absolute coordinates in image space or normalized with respect to the
    image size.
  scope: name scope.

Returns:
  image_and_boxes: an image tensor with shape [height, width, 3]
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html#l00631">631</a> of file <a class="el" href="../../d3/dfb/box__list__ops_8py_source.html">box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  631</span><span class="keyword">def </span>visualize_boxes_in_image(image, boxlist, normalized=False, scope=None):</div>
<div class="line"><span class="lineno">  632</span>  <span class="stringliteral">&quot;&quot;&quot;Overlay bounding box list on image.</span></div>
<div class="line"><span class="lineno">  633</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  634</span><span class="stringliteral">  Currently this visualization plots a 1 pixel thick red bounding box on top</span></div>
<div class="line"><span class="lineno">  635</span><span class="stringliteral">  of the image.  Note that tf.image.draw_bounding_boxes essentially </span><span class="keywordflow">is</span></div>
<div class="line"><span class="lineno">  636</span>  1 indexed.</div>
<div class="line"><span class="lineno">  637</span> </div>
<div class="line"><span class="lineno">  638</span>  Args:</div>
<div class="line"><span class="lineno">  639</span>    image: an image tensor <span class="keyword">with</span> shape [height, width, 3]</div>
<div class="line"><span class="lineno">  640</span>    boxlist: a BoxList</div>
<div class="line"><span class="lineno">  641</span>    normalized: (boolean) specify whether corners are to be interpreted</div>
<div class="line"><span class="lineno">  642</span>      <span class="keyword">as</span> absolute coordinates <span class="keywordflow">in</span> image space <span class="keywordflow">or</span> normalized <span class="keyword">with</span> respect to the</div>
<div class="line"><span class="lineno">  643</span>      image size.</div>
<div class="line"><span class="lineno">  644</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  645</span> </div>
<div class="line"><span class="lineno">  646</span>  Returns:</div>
<div class="line"><span class="lineno">  647</span>    image_and_boxes: an image tensor <span class="keyword">with</span> shape [height, width, 3]</div>
<div class="line"><span class="lineno">  648</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  649</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;VisualizeBoxesInImage&#39;</span>):</div>
<div class="line"><span class="lineno">  650</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> normalized:</div>
<div class="line"><span class="lineno">  651</span>      height, width, _ = tf.unstack(tf.shape(image))</div>
<div class="line"><span class="lineno">  652</span>      boxlist = scale(boxlist,</div>
<div class="line"><span class="lineno">  653</span>                      1.0 / tf.cast(height, tf.float32),</div>
<div class="line"><span class="lineno">  654</span>                      1.0 / tf.cast(width, tf.float32))</div>
<div class="line"><span class="lineno">  655</span>    corners = tf.expand_dims(boxlist.get(), 0)</div>
<div class="line"><span class="lineno">  656</span>    image = tf.expand_dims(image, 0)</div>
<div class="line"><span class="lineno">  657</span>    <span class="keywordflow">return</span> tf.squeeze(tf.image.draw_bounding_boxes(image, corners), [0])</div>
<div class="line"><span class="lineno">  658</span> </div>
<div class="line"><span class="lineno">  659</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ab18840a73551ff7a36605bc8e53552e4_cgraph.png" border="0" usemap="#ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ab18840a73551ff7a36605bc8e53552e4_cgraph" alt=""/></div>
<map name="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ab18840a73551ff7a36605bc8e53552e4_cgraph" id="ad9/da1/namespacedetection__utils_1_1core_1_1box__list__ops_ab18840a73551ff7a36605bc8e53552e4_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,175,60"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a890e93aacb6d9ba7532251c3047d53fd" title=" " alt="" coords="223,13,383,53"/>
<area shape="poly" title=" " alt="" coords="175,30,209,30,209,35,175,35"/>
<area shape="rect" href="../../d9/da1/namespacedetection__utils_1_1core_1_1box__list__ops.html#a3627514ae9ddcaf45f6039284657db24" title=" " alt="" coords="431,13,617,53"/>
<area shape="poly" title=" " alt="" coords="383,30,417,30,417,35,383,35"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
