<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RESIIST: detection_utils.utils.np_box_list_ops Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RESIIST
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d8/d97/namespacedetection__utils.html">detection_utils</a></li><li class="navelem"><a class="el" href="../../d5/d2b/namespacedetection__utils_1_1utils.html">utils</a></li><li class="navelem"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html">np_box_list_ops</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">detection_utils.utils.np_box_list_ops Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d27/classdetection__utils_1_1utils_1_1np__box__list__ops_1_1_sort_order.html">SortOrder</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad96281cb1d7e01fc526275b67cad0375"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#ad96281cb1d7e01fc526275b67cad0375">area</a> (boxlist)</td></tr>
<tr class="separator:ad96281cb1d7e01fc526275b67cad0375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48a15dc063dcb4c84a0a8b786e929d0f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a48a15dc063dcb4c84a0a8b786e929d0f">intersection</a> (boxlist1, boxlist2)</td></tr>
<tr class="separator:a48a15dc063dcb4c84a0a8b786e929d0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e1fb8502b369a1fc5e134cc2442f48f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a6e1fb8502b369a1fc5e134cc2442f48f">iou</a> (boxlist1, boxlist2)</td></tr>
<tr class="separator:a6e1fb8502b369a1fc5e134cc2442f48f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae54fb4d62e0673102ef7018b06aa067c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#ae54fb4d62e0673102ef7018b06aa067c">ioa</a> (boxlist1, boxlist2)</td></tr>
<tr class="separator:ae54fb4d62e0673102ef7018b06aa067c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9781657d68639dcb6f6e7bc8f9b3ed58"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a9781657d68639dcb6f6e7bc8f9b3ed58">gather</a> (boxlist, indices, fields=None)</td></tr>
<tr class="separator:a9781657d68639dcb6f6e7bc8f9b3ed58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a757076f70d7d4e80ac2e037b2ee96148"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a757076f70d7d4e80ac2e037b2ee96148">sort_by_field</a> (boxlist, field, order=<a class="el" href="../../d3/d27/classdetection__utils_1_1utils_1_1np__box__list__ops_1_1_sort_order.html#aecde42d8b3cc4e57c6279fb9ed8c73de">SortOrder.DESCEND</a>)</td></tr>
<tr class="separator:a757076f70d7d4e80ac2e037b2ee96148"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4207b6b69df4bea40c751c55526f2a4e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a4207b6b69df4bea40c751c55526f2a4e">non_max_suppression</a> (boxlist, max_output_size=10000, iou_threshold=1.0, score_threshold=-10.0)</td></tr>
<tr class="separator:a4207b6b69df4bea40c751c55526f2a4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adea5b4b7f444ffe29a0f178612f35616"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#adea5b4b7f444ffe29a0f178612f35616">multi_class_non_max_suppression</a> (boxlist, score_thresh, iou_thresh, max_output_size)</td></tr>
<tr class="separator:adea5b4b7f444ffe29a0f178612f35616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeadd24ce65397ffcf87a3b25deab131b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#aeadd24ce65397ffcf87a3b25deab131b">scale</a> (boxlist, y_scale, x_scale)</td></tr>
<tr class="separator:aeadd24ce65397ffcf87a3b25deab131b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d71b9a07d242a99d093e03dcdf51019"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a3d71b9a07d242a99d093e03dcdf51019">clip_to_window</a> (boxlist, window, filter_nonoverlapping=True)</td></tr>
<tr class="separator:a3d71b9a07d242a99d093e03dcdf51019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc05c2fdd014bd0d9e9cd9f9af2f32e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#abc05c2fdd014bd0d9e9cd9f9af2f32e7">prune_non_overlapping_boxes</a> (boxlist1, boxlist2, minoverlap=0.0)</td></tr>
<tr class="separator:abc05c2fdd014bd0d9e9cd9f9af2f32e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20077b9e955652c979fb86a9ce208a1a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a20077b9e955652c979fb86a9ce208a1a">prune_outside_window</a> (boxlist, window)</td></tr>
<tr class="separator:a20077b9e955652c979fb86a9ce208a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3eb9bfd9f103216ccac1d905843ec8e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#ae3eb9bfd9f103216ccac1d905843ec8e">concatenate</a> (boxlists, fields=None)</td></tr>
<tr class="separator:ae3eb9bfd9f103216ccac1d905843ec8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11a143796571448227535bd7673f1dd0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a11a143796571448227535bd7673f1dd0">filter_scores_greater_than</a> (boxlist, thresh)</td></tr>
<tr class="separator:a11a143796571448227535bd7673f1dd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37a0fa083f17a474d1e5c7572b852b56"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a37a0fa083f17a474d1e5c7572b852b56">change_coordinate_frame</a> (boxlist, window)</td></tr>
<tr class="separator:a37a0fa083f17a474d1e5c7572b852b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9ecb3d84d6fd6889ff0382ee5666002"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#aa9ecb3d84d6fd6889ff0382ee5666002">_copy_extra_fields</a> (boxlist_to_copy_to, boxlist_to_copy_from)</td></tr>
<tr class="separator:aa9ecb3d84d6fd6889ff0382ee5666002"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07c67aca2a91478bb76ccd088de8f63a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a07c67aca2a91478bb76ccd088de8f63a">_update_valid_indices_by_removing_high_iou_boxes</a> (selected_indices, is_index_valid, intersect_over_union, threshold)</td></tr>
<tr class="separator:a07c67aca2a91478bb76ccd088de8f63a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Bounding Box List operations for Numpy BoxLists.

Example box operations that are supported:
  * Areas: compute bounding box areas
  * IOU: pairwise intersection-over-union scores
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="aa9ecb3d84d6fd6889ff0382ee5666002" name="aa9ecb3d84d6fd6889ff0382ee5666002"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9ecb3d84d6fd6889ff0382ee5666002">&#9670;&#160;</a></span>_copy_extra_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops._copy_extra_fields </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist_to_copy_to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist_to_copy_from</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Copies the extra fields of boxlist_to_copy_from to boxlist_to_copy_to.

Args:
  boxlist_to_copy_to: BoxList to which extra fields are copied.
  boxlist_to_copy_from: BoxList from which fields are copied.

Returns:
  boxlist_to_copy_to with extra fields.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00545">545</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  545</span><span class="keyword">def </span>_copy_extra_fields(boxlist_to_copy_to, boxlist_to_copy_from):</div>
<div class="line"><span class="lineno">  546</span>  <span class="stringliteral">&quot;&quot;&quot;Copies the extra fields of boxlist_to_copy_from to boxlist_to_copy_to.</span></div>
<div class="line"><span class="lineno">  547</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  548</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  549</span><span class="stringliteral">    boxlist_to_copy_to: BoxList to which extra fields are copied.</span></div>
<div class="line"><span class="lineno">  550</span><span class="stringliteral">    boxlist_to_copy_from: BoxList </span><span class="keyword">from</span> which fields are copied.</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>  Returns:</div>
<div class="line"><span class="lineno">  553</span>    boxlist_to_copy_to <span class="keyword">with</span> extra fields.</div>
<div class="line"><span class="lineno">  554</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  555</span><span class="stringliteral">  </span><span class="keywordflow">for</span> field <span class="keywordflow">in</span> boxlist_to_copy_from.get_extra_fields():</div>
<div class="line"><span class="lineno">  556</span>    boxlist_to_copy_to.add_field(field, boxlist_to_copy_from.get_field(field))</div>
<div class="line"><span class="lineno">  557</span>  <span class="keywordflow">return</span> boxlist_to_copy_to</div>
<div class="line"><span class="lineno">  558</span> </div>
<div class="line"><span class="lineno">  559</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_aa9ecb3d84d6fd6889ff0382ee5666002_icgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_aa9ecb3d84d6fd6889ff0382ee5666002_icgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_aa9ecb3d84d6fd6889ff0382ee5666002_icgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_aa9ecb3d84d6fd6889ff0382ee5666002_icgraph">
<area shape="rect" title=" " alt="" coords="308,37,523,77"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a37a0fa083f17a474d1e5c7572b852b56" title=" " alt="" coords="5,5,260,45"/>
<area shape="poly" title=" " alt="" coords="294,46,260,42,261,37,295,41"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a3d71b9a07d242a99d093e03dcdf51019" title=" " alt="" coords="36,69,229,109"/>
<area shape="poly" title=" " alt="" coords="295,74,230,81,229,76,294,68"/>
</map>
</div>

</div>
</div>
<a id="a07c67aca2a91478bb76ccd088de8f63a" name="a07c67aca2a91478bb76ccd088de8f63a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07c67aca2a91478bb76ccd088de8f63a">&#9670;&#160;</a></span>_update_valid_indices_by_removing_high_iou_boxes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops._update_valid_indices_by_removing_high_iou_boxes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>selected_indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>is_index_valid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>intersect_over_union</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>threshold</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00560">560</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  561</span>    selected_indices, is_index_valid, intersect_over_union, threshold):</div>
<div class="line"><span class="lineno">  562</span>  max_iou = np.max(intersect_over_union[:, selected_indices], axis=1)</div>
<div class="line"><span class="lineno">  563</span>  <span class="keywordflow">return</span> np.logical_and(is_index_valid, max_iou &lt;= threshold)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad96281cb1d7e01fc526275b67cad0375" name="ad96281cb1d7e01fc526275b67cad0375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad96281cb1d7e01fc526275b67cad0375">&#9670;&#160;</a></span>area()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.area </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Computes area of boxes.

Args:
  boxlist: BoxList holding N boxes

Returns:
  a numpy array with shape [N*1] representing box areas
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00044">44</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   44</span><span class="keyword">def </span>area(boxlist):</div>
<div class="line"><span class="lineno">   45</span>  <span class="stringliteral">&quot;&quot;&quot;Computes area of boxes.</span></div>
<div class="line"><span class="lineno">   46</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   47</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">   48</span><span class="stringliteral">    boxlist: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral">    a numpy array </span><span class="keyword">with</span> shape [N*1] representing box areas</div>
<div class="line"><span class="lineno">   52</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">  y_min, x_min, y_max, x_max = boxlist.get_coordinates()</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">  </span><span class="keywordflow">return</span> (y_max - y_min) * (x_max - x_min)</div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_ad96281cb1d7e01fc526275b67cad0375_icgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_ad96281cb1d7e01fc526275b67cad0375_icgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_ad96281cb1d7e01fc526275b67cad0375_icgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_ad96281cb1d7e01fc526275b67cad0375_icgraph">
<area shape="rect" title=" " alt="" coords="247,5,399,45"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a3d71b9a07d242a99d093e03dcdf51019" title=" " alt="" coords="5,5,199,45"/>
<area shape="poly" title=" " alt="" coords="233,28,199,28,199,23,233,23"/>
</map>
</div>

</div>
</div>
<a id="a37a0fa083f17a474d1e5c7572b852b56" name="a37a0fa083f17a474d1e5c7572b852b56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37a0fa083f17a474d1e5c7572b852b56">&#9670;&#160;</a></span>change_coordinate_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.change_coordinate_frame </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>window</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Change coordinate frame of the boxlist to be relative to window's frame.

Given a window of the form [ymin, xmin, ymax, xmax],
changes bounding box coordinates from boxlist to be relative to this window
(e.g., the min corner maps to (0,0) and the max corner maps to (1,1)).

An example use case is data augmentation: where we are given groundtruth
boxes (boxlist) and would like to randomly crop the image to some
window (window). In this case we need to change the coordinate frame of
each groundtruth box to be relative to this new window.

Args:
  boxlist: A BoxList object holding N boxes.
  window: a size 4 1-D numpy array.

Returns:
  Returns a BoxList object with N boxes.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00515">515</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  515</span><span class="keyword">def </span>change_coordinate_frame(boxlist, window):</div>
<div class="line"><span class="lineno">  516</span>  <span class="stringliteral">&quot;&quot;&quot;Change coordinate frame of the boxlist to be relative to window&#39;s frame.</span></div>
<div class="line"><span class="lineno">  517</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  518</span><span class="stringliteral">  Given a window of the form [ymin, xmin, ymax, xmax],</span></div>
<div class="line"><span class="lineno">  519</span><span class="stringliteral">  changes bounding box coordinates </span><span class="keyword">from</span> boxlist to be relative to this window</div>
<div class="line"><span class="lineno">  520</span>  (e.g., the min corner maps to (0,0) <span class="keywordflow">and</span> the max corner maps to (1,1)).</div>
<div class="line"><span class="lineno">  521</span> </div>
<div class="line"><span class="lineno">  522</span>  An example use case <span class="keywordflow">is</span> data augmentation: where we are given groundtruth</div>
<div class="line"><span class="lineno">  523</span>  boxes (boxlist) <span class="keywordflow">and</span> would like to randomly crop the image to some</div>
<div class="line"><span class="lineno">  524</span>  window (window). In this case we need to change the coordinate frame of</div>
<div class="line"><span class="lineno">  525</span>  each groundtruth box to be relative to this new window.</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>  Args:</div>
<div class="line"><span class="lineno">  528</span>    boxlist: A BoxList object holding N boxes.</div>
<div class="line"><span class="lineno">  529</span>    window: a size 4 1-D numpy array.</div>
<div class="line"><span class="lineno">  530</span> </div>
<div class="line"><span class="lineno">  531</span>  Returns:</div>
<div class="line"><span class="lineno">  532</span>    Returns a BoxList object <span class="keyword">with</span> N boxes.</div>
<div class="line"><span class="lineno">  533</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  534</span><span class="stringliteral">  win_height = window[2] - window[0]</span></div>
<div class="line"><span class="lineno">  535</span><span class="stringliteral">  win_width = window[3] - window[1]</span></div>
<div class="line"><span class="lineno">  536</span><span class="stringliteral">  boxlist_new = scale(</span></div>
<div class="line"><span class="lineno">  537</span><span class="stringliteral">      np_box_list.BoxList(boxlist.get() -</span></div>
<div class="line"><span class="lineno">  538</span><span class="stringliteral">                          [window[0], window[1], window[0], window[1]]),</span></div>
<div class="line"><span class="lineno">  539</span><span class="stringliteral">      1.0 / win_height, 1.0 / win_width)</span></div>
<div class="line"><span class="lineno">  540</span><span class="stringliteral">  _copy_extra_fields(boxlist_new, boxlist)</span></div>
<div class="line"><span class="lineno">  541</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  542</span><span class="stringliteral">  </span><span class="keywordflow">return</span> boxlist_new</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a37a0fa083f17a474d1e5c7572b852b56_cgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a37a0fa083f17a474d1e5c7572b852b56_cgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a37a0fa083f17a474d1e5c7572b852b56_cgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a37a0fa083f17a474d1e5c7572b852b56_cgraph">
<area shape="rect" title=" " alt="" coords="5,37,260,77"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#aa9ecb3d84d6fd6889ff0382ee5666002" title=" " alt="" coords="308,5,523,45"/>
<area shape="poly" title=" " alt="" coords="260,40,294,36,295,42,260,46"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#aeadd24ce65397ffcf87a3b25deab131b" title=" " alt="" coords="339,69,491,109"/>
<area shape="poly" title=" " alt="" coords="260,69,326,77,325,82,260,74"/>
</map>
</div>

</div>
</div>
<a id="a3d71b9a07d242a99d093e03dcdf51019" name="a3d71b9a07d242a99d093e03dcdf51019"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d71b9a07d242a99d093e03dcdf51019">&#9670;&#160;</a></span>clip_to_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.clip_to_window </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filter_nonoverlapping</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Clip bounding boxes to a window.

This op clips input bounding boxes (represented by bounding box
corners) to a window, optionally filtering out boxes that do not
overlap at all with the window.

Args:
  boxlist: BoxList holding M_in boxes
  window: a numpy array of shape [4] representing the
          [y_min, x_min, y_max, x_max] window to which the op
          should clip boxes.
  filter_nonoverlapping: whether to filter out boxes that do not overlap at
    all with the window.

Returns:
  a BoxList holding M_out boxes where M_out &lt;= M_in
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00339">339</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  339</span><span class="keyword">def </span>clip_to_window(boxlist, window, filter_nonoverlapping=True):</div>
<div class="line"><span class="lineno">  340</span>  <span class="stringliteral">&quot;&quot;&quot;Clip bounding boxes to a window.</span></div>
<div class="line"><span class="lineno">  341</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  342</span><span class="stringliteral">  This op clips input bounding boxes (represented by bounding box</span></div>
<div class="line"><span class="lineno">  343</span><span class="stringliteral">  corners) to a window, optionally filtering out boxes that do </span><span class="keywordflow">not</span></div>
<div class="line"><span class="lineno">  344</span>  overlap at all <span class="keyword">with</span> the window.</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>  Args:</div>
<div class="line"><span class="lineno">  347</span>    boxlist: BoxList holding M_in boxes</div>
<div class="line"><span class="lineno">  348</span>    window: a numpy array of shape [4] representing the</div>
<div class="line"><span class="lineno">  349</span>            [y_min, x_min, y_max, x_max] window to which the op</div>
<div class="line"><span class="lineno">  350</span>            should clip boxes.</div>
<div class="line"><span class="lineno">  351</span>    filter_nonoverlapping: whether to filter out boxes that do <span class="keywordflow">not</span> overlap at</div>
<div class="line"><span class="lineno">  352</span>      all <span class="keyword">with</span> the window.</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>  Returns:</div>
<div class="line"><span class="lineno">  355</span>    a BoxList holding M_out boxes where M_out &lt;= M_in</div>
<div class="line"><span class="lineno">  356</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  357</span><span class="stringliteral">  y_min, x_min, y_max, x_max = np.array_split(boxlist.get(), 4, axis=1)</span></div>
<div class="line"><span class="lineno">  358</span><span class="stringliteral">  win_y_min = window[0]</span></div>
<div class="line"><span class="lineno">  359</span><span class="stringliteral">  win_x_min = window[1]</span></div>
<div class="line"><span class="lineno">  360</span><span class="stringliteral">  win_y_max = window[2]</span></div>
<div class="line"><span class="lineno">  361</span><span class="stringliteral">  win_x_max = window[3]</span></div>
<div class="line"><span class="lineno">  362</span><span class="stringliteral">  y_min_clipped = np.fmax(np.fmin(y_min, win_y_max), win_y_min)</span></div>
<div class="line"><span class="lineno">  363</span><span class="stringliteral">  y_max_clipped = np.fmax(np.fmin(y_max, win_y_max), win_y_min)</span></div>
<div class="line"><span class="lineno">  364</span><span class="stringliteral">  x_min_clipped = np.fmax(np.fmin(x_min, win_x_max), win_x_min)</span></div>
<div class="line"><span class="lineno">  365</span><span class="stringliteral">  x_max_clipped = np.fmax(np.fmin(x_max, win_x_max), win_x_min)</span></div>
<div class="line"><span class="lineno">  366</span><span class="stringliteral">  clipped = np_box_list.BoxList(</span></div>
<div class="line"><span class="lineno">  367</span><span class="stringliteral">      np.hstack([y_min_clipped, x_min_clipped, y_max_clipped, x_max_clipped]))</span></div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral">  clipped = _copy_extra_fields(clipped, boxlist)</span></div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral">  </span><span class="keywordflow">if</span> filter_nonoverlapping:</div>
<div class="line"><span class="lineno">  370</span>    areas = area(clipped)</div>
<div class="line"><span class="lineno">  371</span>    nonzero_area_indices = np.reshape(</div>
<div class="line"><span class="lineno">  372</span>        np.nonzero(np.greater(areas, 0.0)), [-1]).astype(np.int32)</div>
<div class="line"><span class="lineno">  373</span>    clipped = gather(clipped, nonzero_area_indices)</div>
<div class="line"><span class="lineno">  374</span>  <span class="keywordflow">return</span> clipped</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a3d71b9a07d242a99d093e03dcdf51019_cgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a3d71b9a07d242a99d093e03dcdf51019_cgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a3d71b9a07d242a99d093e03dcdf51019_cgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a3d71b9a07d242a99d093e03dcdf51019_cgraph">
<area shape="rect" title=" " alt="" coords="5,69,199,109"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#aa9ecb3d84d6fd6889ff0382ee5666002" title=" " alt="" coords="247,5,461,45"/>
<area shape="poly" title=" " alt="" coords="181,67,261,46,262,51,182,72"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#ad96281cb1d7e01fc526275b67cad0375" title=" " alt="" coords="278,69,430,109"/>
<area shape="poly" title=" " alt="" coords="199,87,264,87,264,92,199,92"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a9781657d68639dcb6f6e7bc8f9b3ed58" title=" " alt="" coords="278,133,430,173"/>
<area shape="poly" title=" " alt="" coords="182,107,265,128,264,133,181,112"/>
</map>
</div>

</div>
</div>
<a id="ae3eb9bfd9f103216ccac1d905843ec8e" name="ae3eb9bfd9f103216ccac1d905843ec8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3eb9bfd9f103216ccac1d905843ec8e">&#9670;&#160;</a></span>concatenate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.concatenate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlists</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fields</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Concatenate list of BoxLists.

This op concatenates a list of input BoxLists into a larger BoxList.  It also
handles concatenation of BoxList fields as long as the field tensor shapes
are equal except for the first dimension.

Args:
  boxlists: list of BoxList objects
  fields: optional list of fields to also concatenate.  By default, all
    fields from the first BoxList in the list are included in the
    concatenation.

Returns:
  a BoxList with number of boxes equal to
    sum([boxlist.num_boxes() for boxlist in BoxList])
Raises:
  ValueError: if boxlists is invalid (i.e., is not a list, is empty, or
    contains non BoxList objects), or if requested fields are not contained in
    all boxlists
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00433">433</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  433</span><span class="keyword">def </span>concatenate(boxlists, fields=None):</div>
<div class="line"><span class="lineno">  434</span>  <span class="stringliteral">&quot;&quot;&quot;Concatenate list of BoxLists.</span></div>
<div class="line"><span class="lineno">  435</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  436</span><span class="stringliteral">  This op concatenates a list of input BoxLists into a larger BoxList.  It also</span></div>
<div class="line"><span class="lineno">  437</span><span class="stringliteral">  handles concatenation of BoxList fields </span><span class="keyword">as</span> long <span class="keyword">as</span> the field tensor shapes</div>
<div class="line"><span class="lineno">  438</span>  are equal <span class="keywordflow">except</span> <span class="keywordflow">for</span> the first dimension.</div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>  Args:</div>
<div class="line"><span class="lineno">  441</span>    boxlists: list of BoxList objects</div>
<div class="line"><span class="lineno">  442</span>    fields: optional list of fields to also concatenate.  By default, all</div>
<div class="line"><span class="lineno">  443</span>      fields <span class="keyword">from</span> the first BoxList <span class="keywordflow">in</span> the list are included <span class="keywordflow">in</span> the</div>
<div class="line"><span class="lineno">  444</span>      concatenation.</div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>  Returns:</div>
<div class="line"><span class="lineno">  447</span>    a BoxList <span class="keyword">with</span> number of boxes equal to</div>
<div class="line"><span class="lineno">  448</span>      sum([boxlist.num_boxes() <span class="keywordflow">for</span> boxlist <span class="keywordflow">in</span> BoxList])</div>
<div class="line"><span class="lineno">  449</span>  Raises:</div>
<div class="line"><span class="lineno">  450</span>    ValueError: <span class="keywordflow">if</span> boxlists <span class="keywordflow">is</span> invalid (i.e., <span class="keywordflow">is</span> <span class="keywordflow">not</span> a list, <span class="keywordflow">is</span> empty, <span class="keywordflow">or</span></div>
<div class="line"><span class="lineno">  451</span>      contains non BoxList objects), <span class="keywordflow">or</span> <span class="keywordflow">if</span> requested fields are <span class="keywordflow">not</span> contained <span class="keywordflow">in</span></div>
<div class="line"><span class="lineno">  452</span>      all boxlists</div>
<div class="line"><span class="lineno">  453</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  454</span><span class="stringliteral">  </span><span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(boxlists, list):</div>
<div class="line"><span class="lineno">  455</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlists should be a list&#39;</span>)</div>
<div class="line"><span class="lineno">  456</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> boxlists:</div>
<div class="line"><span class="lineno">  457</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlists should have nonzero length&#39;</span>)</div>
<div class="line"><span class="lineno">  458</span>  <span class="keywordflow">for</span> boxlist <span class="keywordflow">in</span> boxlists:</div>
<div class="line"><span class="lineno">  459</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(boxlist, np_box_list.BoxList):</div>
<div class="line"><span class="lineno">  460</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;all elements of boxlists should be BoxList objects&#39;</span>)</div>
<div class="line"><span class="lineno">  461</span>  concatenated = np_box_list.BoxList(</div>
<div class="line"><span class="lineno">  462</span>      np.vstack([boxlist.get() <span class="keywordflow">for</span> boxlist <span class="keywordflow">in</span> boxlists]))</div>
<div class="line"><span class="lineno">  463</span>  <span class="keywordflow">if</span> fields <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  464</span>    fields = boxlists[0].get_extra_fields()</div>
<div class="line"><span class="lineno">  465</span>  <span class="keywordflow">for</span> field <span class="keywordflow">in</span> fields:</div>
<div class="line"><span class="lineno">  466</span>    first_field_shape = boxlists[0].get_field(field).shape</div>
<div class="line"><span class="lineno">  467</span>    first_field_shape = first_field_shape[1:]</div>
<div class="line"><span class="lineno">  468</span>    <span class="keywordflow">for</span> boxlist <span class="keywordflow">in</span> boxlists:</div>
<div class="line"><span class="lineno">  469</span>      <span class="keywordflow">if</span> <span class="keywordflow">not</span> boxlist.has_field(field):</div>
<div class="line"><span class="lineno">  470</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlist must contain all requested fields&#39;</span>)</div>
<div class="line"><span class="lineno">  471</span>      field_shape = boxlist.get_field(field).shape</div>
<div class="line"><span class="lineno">  472</span>      field_shape = field_shape[1:]</div>
<div class="line"><span class="lineno">  473</span>      <span class="keywordflow">if</span> field_shape != first_field_shape:</div>
<div class="line"><span class="lineno">  474</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;field %s must have same shape for all boxlists &#39;</span></div>
<div class="line"><span class="lineno">  475</span>                         <span class="stringliteral">&#39;except for the 0th dimension.&#39;</span> % field)</div>
<div class="line"><span class="lineno">  476</span>    concatenated_field = np.concatenate(</div>
<div class="line"><span class="lineno">  477</span>        [boxlist.get_field(field) <span class="keywordflow">for</span> boxlist <span class="keywordflow">in</span> boxlists], axis=0)</div>
<div class="line"><span class="lineno">  478</span>    concatenated.add_field(field, concatenated_field)</div>
<div class="line"><span class="lineno">  479</span>  <span class="keywordflow">return</span> concatenated</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_ae3eb9bfd9f103216ccac1d905843ec8e_icgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_ae3eb9bfd9f103216ccac1d905843ec8e_icgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_ae3eb9bfd9f103216ccac1d905843ec8e_icgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_ae3eb9bfd9f103216ccac1d905843ec8e_icgraph">
<area shape="rect" title=" " alt="" coords="225,13,403,53"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#adea5b4b7f444ffe29a0f178612f35616" title=" " alt="" coords="5,5,177,60"/>
<area shape="poly" title=" " alt="" coords="212,35,177,35,177,30,212,30"/>
</map>
</div>

</div>
</div>
<a id="a11a143796571448227535bd7673f1dd0" name="a11a143796571448227535bd7673f1dd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11a143796571448227535bd7673f1dd0">&#9670;&#160;</a></span>filter_scores_greater_than()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.filter_scores_greater_than </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>thresh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Filter to keep only boxes with score exceeding a given threshold.

This op keeps the collection of boxes whose corresponding scores are
greater than the input threshold.

Args:
  boxlist: BoxList holding N boxes.  Must contain a 'scores' field
    representing detection scores.
  thresh: scalar threshold

Returns:
  a BoxList holding M boxes where M &lt;= N

Raises:
  ValueError: if boxlist not a BoxList object or if it does not
    have a scores field
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00482">482</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  482</span><span class="keyword">def </span>filter_scores_greater_than(boxlist, thresh):</div>
<div class="line"><span class="lineno">  483</span>  <span class="stringliteral">&quot;&quot;&quot;Filter to keep only boxes with score exceeding a given threshold.</span></div>
<div class="line"><span class="lineno">  484</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  485</span><span class="stringliteral">  This op keeps the collection of boxes whose corresponding scores are</span></div>
<div class="line"><span class="lineno">  486</span><span class="stringliteral">  greater than the input threshold.</span></div>
<div class="line"><span class="lineno">  487</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  488</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  489</span><span class="stringliteral">    boxlist: BoxList holding N boxes.  Must contain a &#39;scores&#39;</span> field</div>
<div class="line"><span class="lineno">  490</span>      representing detection scores.</div>
<div class="line"><span class="lineno">  491</span>    thresh: scalar threshold</div>
<div class="line"><span class="lineno">  492</span> </div>
<div class="line"><span class="lineno">  493</span>  Returns:</div>
<div class="line"><span class="lineno">  494</span>    a BoxList holding M boxes where M &lt;= N</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>  Raises:</div>
<div class="line"><span class="lineno">  497</span>    ValueError: <span class="keywordflow">if</span> boxlist <span class="keywordflow">not</span> a BoxList object <span class="keywordflow">or</span> <span class="keywordflow">if</span> it does <span class="keywordflow">not</span></div>
<div class="line"><span class="lineno">  498</span>      have a scores field</div>
<div class="line"><span class="lineno">  499</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  500</span><span class="stringliteral">  </span><span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(boxlist, np_box_list.BoxList):</div>
<div class="line"><span class="lineno">  501</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlist must be a BoxList&#39;</span>)</div>
<div class="line"><span class="lineno">  502</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> boxlist.has_field(<span class="stringliteral">&#39;scores&#39;</span>):</div>
<div class="line"><span class="lineno">  503</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;input boxlist must have \&#39;scores\&#39; field&#39;</span>)</div>
<div class="line"><span class="lineno">  504</span>  scores = boxlist.get_field(<span class="stringliteral">&#39;scores&#39;</span>)</div>
<div class="line"><span class="lineno">  505</span>  <span class="keywordflow">if</span> len(scores.shape) &gt; 2:</div>
<div class="line"><span class="lineno">  506</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;Scores should have rank 1 or 2&#39;</span>)</div>
<div class="line"><span class="lineno">  507</span>  <span class="keywordflow">if</span> len(scores.shape) == 2 <span class="keywordflow">and</span> scores.shape[1] != 1:</div>
<div class="line"><span class="lineno">  508</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;Scores should have rank 1 or have shape &#39;</span></div>
<div class="line"><span class="lineno">  509</span>                     <span class="stringliteral">&#39;consistent with [None, 1]&#39;</span>)</div>
<div class="line"><span class="lineno">  510</span>  high_score_indices = np.reshape(np.where(np.greater(scores, thresh)),</div>
<div class="line"><span class="lineno">  511</span>                                  [-1]).astype(np.int32)</div>
<div class="line"><span class="lineno">  512</span>  <span class="keywordflow">return</span> gather(boxlist, high_score_indices)</div>
<div class="line"><span class="lineno">  513</span> </div>
<div class="line"><span class="lineno">  514</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a11a143796571448227535bd7673f1dd0_cgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a11a143796571448227535bd7673f1dd0_cgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a11a143796571448227535bd7673f1dd0_cgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a11a143796571448227535bd7673f1dd0_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,181,60"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a9781657d68639dcb6f6e7bc8f9b3ed58" title=" " alt="" coords="229,13,381,53"/>
<area shape="poly" title=" " alt="" coords="182,30,215,30,215,35,182,35"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a11a143796571448227535bd7673f1dd0_icgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a11a143796571448227535bd7673f1dd0_icgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a11a143796571448227535bd7673f1dd0_icgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a11a143796571448227535bd7673f1dd0_icgraph">
<area shape="rect" title=" " alt="" coords="509,5,685,60"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#adea5b4b7f444ffe29a0f178612f35616" title=" " alt="" coords="5,5,177,60"/>
<area shape="poly" title=" " alt="" coords="496,32,461,31,225,31,178,32,178,27,225,26,461,26,496,27"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a4207b6b69df4bea40c751c55526f2a4e" title=" " alt="" coords="225,41,461,81"/>
<area shape="poly" title=" " alt="" coords="496,46,462,50,461,45,495,41"/>
<area shape="poly" title=" " alt="" coords="211,49,177,45,178,40,212,43"/>
</map>
</div>

</div>
</div>
<a id="a9781657d68639dcb6f6e7bc8f9b3ed58" name="a9781657d68639dcb6f6e7bc8f9b3ed58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9781657d68639dcb6f6e7bc8f9b3ed58">&#9670;&#160;</a></span>gather()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.gather </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fields</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Gather boxes from BoxList according to indices and return new BoxList.

By default, gather returns boxes corresponding to the input index list, as
well as all additional fields stored in the boxlist (indexing into the
first dimension).  However one can optionally only gather from a
subset of fields.

Args:
  boxlist: BoxList holding N boxes
  indices: a 1-d numpy array of type int_
  fields: (optional) list of fields to also gather from.  If None (default),
      all fields are gathered from.  Pass an empty fields list to only gather
      the box coordinates.

Returns:
  subboxlist: a BoxList corresponding to the subset of the input BoxList
      specified by indices

Raises:
  ValueError: if specified field is not contained in boxlist or if the
      indices are not of type int_
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00100">100</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  100</span><span class="keyword">def </span>gather(boxlist, indices, fields=None):</div>
<div class="line"><span class="lineno">  101</span>  <span class="stringliteral">&quot;&quot;&quot;Gather boxes from BoxList according to indices and return new BoxList.</span></div>
<div class="line"><span class="lineno">  102</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  103</span><span class="stringliteral">  By default, gather returns boxes corresponding to the input index list, </span><span class="keyword">as</span></div>
<div class="line"><span class="lineno">  104</span>  well <span class="keyword">as</span> all additional fields stored <span class="keywordflow">in</span> the boxlist (indexing into the</div>
<div class="line"><span class="lineno">  105</span>  first dimension).  However one can optionally only gather <span class="keyword">from</span> a</div>
<div class="line"><span class="lineno">  106</span>  subset of fields.</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>  Args:</div>
<div class="line"><span class="lineno">  109</span>    boxlist: BoxList holding N boxes</div>
<div class="line"><span class="lineno">  110</span>    indices: a 1-d numpy array of type int_</div>
<div class="line"><span class="lineno">  111</span>    fields: (optional) list of fields to also gather <span class="keyword">from</span>.  If <span class="keywordtype">None</span> (default),</div>
<div class="line"><span class="lineno">  112</span>        all fields are gathered <span class="keyword">from</span>.  Pass an empty fields list to only gather</div>
<div class="line"><span class="lineno">  113</span>        the box coordinates.</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>  Returns:</div>
<div class="line"><span class="lineno">  116</span>    subboxlist: a BoxList corresponding to the subset of the input BoxList</div>
<div class="line"><span class="lineno">  117</span>        specified by indices</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>  Raises:</div>
<div class="line"><span class="lineno">  120</span>    ValueError: <span class="keywordflow">if</span> specified field <span class="keywordflow">is</span> <span class="keywordflow">not</span> contained <span class="keywordflow">in</span> boxlist <span class="keywordflow">or</span> <span class="keywordflow">if</span> the</div>
<div class="line"><span class="lineno">  121</span>        indices are <span class="keywordflow">not</span> of type int_</div>
<div class="line"><span class="lineno">  122</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  123</span><span class="stringliteral">  </span><span class="keywordflow">if</span> indices.size:</div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">if</span> np.amax(indices) &gt;= boxlist.num_boxes() <span class="keywordflow">or</span> np.amin(indices) &lt; 0:</div>
<div class="line"><span class="lineno">  125</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;indices are out of valid range.&#39;</span>)</div>
<div class="line"><span class="lineno">  126</span>  subboxlist = np_box_list.BoxList(boxlist.get()[indices, :])</div>
<div class="line"><span class="lineno">  127</span>  <span class="keywordflow">if</span> fields <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  128</span>    fields = boxlist.get_extra_fields()</div>
<div class="line"><span class="lineno">  129</span>  <span class="keywordflow">for</span> field <span class="keywordflow">in</span> fields:</div>
<div class="line"><span class="lineno">  130</span>    extra_field_data = boxlist.get_field(field)</div>
<div class="line"><span class="lineno">  131</span>    subboxlist.add_field(field, extra_field_data[indices, ...])</div>
<div class="line"><span class="lineno">  132</span>  <span class="keywordflow">return</span> subboxlist</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a9781657d68639dcb6f6e7bc8f9b3ed58_icgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a9781657d68639dcb6f6e7bc8f9b3ed58_icgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a9781657d68639dcb6f6e7bc8f9b3ed58_icgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a9781657d68639dcb6f6e7bc8f9b3ed58_icgraph">
<area shape="rect" title=" " alt="" coords="793,176,945,216"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a3d71b9a07d242a99d093e03dcdf51019" title=" " alt="" coords="531,5,724,45"/>
<area shape="poly" title=" " alt="" coords="846,166,803,111,775,83,744,60,721,48,723,43,747,55,779,79,807,108,850,163"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a11a143796571448227535bd7673f1dd0" title=" " alt="" coords="539,70,715,125"/>
<area shape="poly" title=" " alt="" coords="807,173,744,146,697,127,699,122,746,142,809,168"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a4207b6b69df4bea40c751c55526f2a4e" title=" " alt="" coords="225,143,461,183"/>
<area shape="poly" title=" " alt="" coords="779,193,745,191,462,173,462,167,746,185,780,188"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#abc05c2fdd014bd0d9e9cd9f9af2f32e7" title=" " alt="" coords="544,201,711,255"/>
<area shape="poly" title=" " alt="" coords="780,211,711,220,711,214,779,205"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a20077b9e955652c979fb86a9ce208a1a" title=" " alt="" coords="509,280,745,320"/>
<area shape="poly" title=" " alt="" coords="829,226,790,249,746,270,713,282,712,277,744,266,787,244,826,221"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a757076f70d7d4e80ac2e037b2ee96148" title=" " alt="" coords="538,344,717,384"/>
<area shape="poly" title=" " alt="" coords="850,229,807,283,778,311,747,334,718,348,716,343,744,330,775,307,803,280,846,226"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#adea5b4b7f444ffe29a0f178612f35616" title=" " alt="" coords="5,135,177,190"/>
<area shape="poly" title=" " alt="" coords="526,104,383,114,226,133,178,143,177,138,225,128,383,109,525,99"/>
<area shape="poly" title=" " alt="" coords="527,123,432,145,430,140,526,118"/>
<area shape="poly" title=" " alt="" coords="211,165,177,165,177,160,211,160"/>
<area shape="poly" title=" " alt="" coords="534,343,508,335,312,260,153,193,155,188,314,256,510,329,535,337"/>
<area shape="poly" title=" " alt="" coords="524,343,508,334,491,320,481,307,459,275,366,185,369,181,463,272,486,303,495,317,511,330,526,338"/>
</map>
</div>

</div>
</div>
<a id="a48a15dc063dcb4c84a0a8b786e929d0f" name="a48a15dc063dcb4c84a0a8b786e929d0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48a15dc063dcb4c84a0a8b786e929d0f">&#9670;&#160;</a></span>intersection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.intersection </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compute pairwise intersection areas between boxes.

Args:
  boxlist1: BoxList holding N boxes
  boxlist2: BoxList holding M boxes

Returns:
  a numpy array with shape [N*M] representing pairwise intersection area
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00057">57</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   57</span><span class="keyword">def </span>intersection(boxlist1, boxlist2):</div>
<div class="line"><span class="lineno">   58</span>  <span class="stringliteral">&quot;&quot;&quot;Compute pairwise intersection areas between boxes.</span></div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   60</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">   61</span><span class="stringliteral">    boxlist1: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">   62</span><span class="stringliteral">    boxlist2: BoxList holding M boxes</span></div>
<div class="line"><span class="lineno">   63</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   64</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">   65</span><span class="stringliteral">    a numpy array </span><span class="keyword">with</span> shape [N*M] representing pairwise intersection area</div>
<div class="line"><span class="lineno">   66</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   67</span><span class="stringliteral">  </span><span class="keywordflow">return</span> np_box_ops.intersection(boxlist1.get(), boxlist2.get())</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae54fb4d62e0673102ef7018b06aa067c" name="ae54fb4d62e0673102ef7018b06aa067c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae54fb4d62e0673102ef7018b06aa067c">&#9670;&#160;</a></span>ioa()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.ioa </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Computes pairwise intersection-over-area between box collections.

Intersection-over-area (ioa) between two boxes box1 and box2 is defined as
their intersection area over box2's area. Note that ioa is not symmetric,
that is, IOA(box1, box2) != IOA(box2, box1).

Args:
  boxlist1: BoxList holding N boxes
  boxlist2: BoxList holding M boxes

Returns:
  a numpy array with shape [N, M] representing pairwise ioa scores.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00083">83</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   83</span><span class="keyword">def </span>ioa(boxlist1, boxlist2):</div>
<div class="line"><span class="lineno">   84</span>  <span class="stringliteral">&quot;&quot;&quot;Computes pairwise intersection-over-area between box collections.</span></div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">  Intersection-over-area (ioa) between two boxes box1 </span><span class="keywordflow">and</span> box2 <span class="keywordflow">is</span> defined <span class="keyword">as</span></div>
<div class="line"><span class="lineno">   87</span>  their intersection area over box2<span class="stringliteral">&#39;s area. Note that ioa is not symmetric,</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral">  that </span><span class="keywordflow">is</span>, IOA(box1, box2) != IOA(box2, box1).</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>  Args:</div>
<div class="line"><span class="lineno">   91</span>    boxlist1: BoxList holding N boxes</div>
<div class="line"><span class="lineno">   92</span>    boxlist2: BoxList holding M boxes</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>  Returns:</div>
<div class="line"><span class="lineno">   95</span>    a numpy array <span class="keyword">with</span> shape [N, M] representing pairwise ioa scores.</div>
<div class="line"><span class="lineno">   96</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   97</span><span class="stringliteral">  </span><span class="keywordflow">return</span> np_box_ops.ioa(boxlist1.get(), boxlist2.get())</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_ae54fb4d62e0673102ef7018b06aa067c_icgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_ae54fb4d62e0673102ef7018b06aa067c_icgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_ae54fb4d62e0673102ef7018b06aa067c_icgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_ae54fb4d62e0673102ef7018b06aa067c_icgraph">
<area shape="rect" title=" " alt="" coords="220,13,372,53"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#abc05c2fdd014bd0d9e9cd9f9af2f32e7" title=" " alt="" coords="5,5,172,60"/>
<area shape="poly" title=" " alt="" coords="206,35,172,35,172,30,206,30"/>
</map>
</div>

</div>
</div>
<a id="a6e1fb8502b369a1fc5e134cc2442f48f" name="a6e1fb8502b369a1fc5e134cc2442f48f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e1fb8502b369a1fc5e134cc2442f48f">&#9670;&#160;</a></span>iou()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.iou </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Computes pairwise intersection-over-union between box collections.

Args:
  boxlist1: BoxList holding N boxes
  boxlist2: BoxList holding M boxes

Returns:
  a numpy array with shape [N, M] representing pairwise iou scores.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00070">70</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   70</span><span class="keyword">def </span>iou(boxlist1, boxlist2):</div>
<div class="line"><span class="lineno">   71</span>  <span class="stringliteral">&quot;&quot;&quot;Computes pairwise intersection-over-union between box collections.</span></div>
<div class="line"><span class="lineno">   72</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   73</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">   74</span><span class="stringliteral">    boxlist1: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">   75</span><span class="stringliteral">    boxlist2: BoxList holding M boxes</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">    a numpy array </span><span class="keyword">with</span> shape [N, M] representing pairwise iou scores.</div>
<div class="line"><span class="lineno">   79</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">  </span><span class="keywordflow">return</span> np_box_ops.iou(boxlist1.get(), boxlist2.get())</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adea5b4b7f444ffe29a0f178612f35616" name="adea5b4b7f444ffe29a0f178612f35616"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adea5b4b7f444ffe29a0f178612f35616">&#9670;&#160;</a></span>multi_class_non_max_suppression()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.multi_class_non_max_suppression </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>score_thresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>iou_thresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>max_output_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Multi-class version of non maximum suppression.

This op greedily selects a subset of detection bounding boxes, pruning
away boxes that have high IOU (intersection over union) overlap (&gt; thresh)
with already selected boxes.  It operates independently for each class for
which scores are provided (via the scores field of the input box_list),
pruning boxes with score less than a provided threshold prior to
applying NMS.

Args:
  boxlist: BoxList holding N boxes.  Must contain a 'scores' field
    representing detection scores.  This scores field is a tensor that can
    be 1 dimensional (in the case of a single class) or 2-dimensional, which
    which case we assume that it takes the shape [num_boxes, num_classes].
    We further assume that this rank is known statically and that
    scores.shape[1] is also known (i.e., the number of classes is fixed
    and known at graph construction time).
  score_thresh: scalar threshold for score (low scoring boxes are removed).
  iou_thresh: scalar threshold for IOU (boxes that that high IOU overlap
    with previously selected boxes are removed).
  max_output_size: maximum number of retained boxes per class.

Returns:
  a BoxList holding M boxes with a rank-1 scores field representing
    corresponding scores for each box with scores sorted in decreasing order
    and a rank-1 classes field representing a class label for each box.
Raises:
  ValueError: if iou_thresh is not in [0, 1] or if input boxlist does not have
    a valid scores field.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00240">240</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  241</span>                                    max_output_size):</div>
<div class="line"><span class="lineno">  242</span>  <span class="stringliteral">&quot;&quot;&quot;Multi-class version of non maximum suppression.</span></div>
<div class="line"><span class="lineno">  243</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  244</span><span class="stringliteral">  This op greedily selects a subset of detection bounding boxes, pruning</span></div>
<div class="line"><span class="lineno">  245</span><span class="stringliteral">  away boxes that have high IOU (intersection over union) overlap (&gt; thresh)</span></div>
<div class="line"><span class="lineno">  246</span><span class="stringliteral">  </span><span class="keyword">with</span> already selected boxes.  It operates independently <span class="keywordflow">for</span> each <span class="keyword">class </span>for</div>
<div class="line"><span class="lineno">  247</span>  which scores are provided (via the scores field of the input box_list),</div>
<div class="line"><span class="lineno">  248</span>  pruning boxes <span class="keyword">with</span> score less than a provided threshold prior to</div>
<div class="line"><span class="lineno">  249</span>  applying NMS.</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>  Args:</div>
<div class="line"><span class="lineno">  252</span>    boxlist: BoxList holding N boxes.  Must contain a <span class="stringliteral">&#39;scores&#39;</span> field</div>
<div class="line"><span class="lineno">  253</span>      representing detection scores.  This scores field <span class="keywordflow">is</span> a tensor that can</div>
<div class="line"><span class="lineno">  254</span>      be 1 dimensional (<span class="keywordflow">in</span> the case of a single <span class="keyword">class</span>) <span class="keywordflow">or</span> 2-dimensional, which</div>
<div class="line"><span class="lineno">  255</span>      which case we assume that it takes the shape [num_boxes, num_classes].</div>
<div class="line"><span class="lineno">  256</span>      We further assume that this rank <span class="keywordflow">is</span> known statically <span class="keywordflow">and</span> that</div>
<div class="line"><span class="lineno">  257</span>      scores.shape[1] <span class="keywordflow">is</span> also known (i.e., the number of classes <span class="keywordflow">is</span> fixed</div>
<div class="line"><span class="lineno">  258</span>      <span class="keywordflow">and</span> known at graph construction time).</div>
<div class="line"><span class="lineno">  259</span>    score_thresh: scalar threshold <span class="keywordflow">for</span> score (low scoring boxes are removed).</div>
<div class="line"><span class="lineno">  260</span>    iou_thresh: scalar threshold <span class="keywordflow">for</span> IOU (boxes that that high IOU overlap</div>
<div class="line"><span class="lineno">  261</span>      <span class="keyword">with</span> previously selected boxes are removed).</div>
<div class="line"><span class="lineno">  262</span>    max_output_size: maximum number of retained boxes per <span class="keyword">class</span>.</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>  Returns:</div>
<div class="line"><span class="lineno">  265</span>    a BoxList holding M boxes <span class="keyword">with</span> a rank-1 scores field representing</div>
<div class="line"><span class="lineno">  266</span>      corresponding scores <span class="keywordflow">for</span> each box <span class="keyword">with</span> scores sorted <span class="keywordflow">in</span> decreasing order</div>
<div class="line"><span class="lineno">  267</span>      <span class="keywordflow">and</span> a rank-1 classes field representing a <span class="keyword">class </span>label for each box.</div>
<div class="line"><span class="lineno">  268</span>  Raises:</div>
<div class="line"><span class="lineno">  269</span>    ValueError: <span class="keywordflow">if</span> iou_thresh <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> [0, 1] <span class="keywordflow">or</span> <span class="keywordflow">if</span> input boxlist does <span class="keywordflow">not</span> have</div>
<div class="line"><span class="lineno">  270</span>      a valid scores field.</div>
<div class="line"><span class="lineno">  271</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  272</span><span class="stringliteral">  </span><span class="keywordflow">if</span> <span class="keywordflow">not</span> 0 &lt;= iou_thresh &lt;= 1.0:</div>
<div class="line"><span class="lineno">  273</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;thresh must be between 0 and 1&#39;</span>)</div>
<div class="line"><span class="lineno">  274</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(boxlist, np_box_list.BoxList):</div>
<div class="line"><span class="lineno">  275</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;boxlist must be a BoxList&#39;</span>)</div>
<div class="line"><span class="lineno">  276</span>  <span class="keywordflow">if</span> <span class="keywordflow">not</span> boxlist.has_field(<span class="stringliteral">&#39;scores&#39;</span>):</div>
<div class="line"><span class="lineno">  277</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;input boxlist must have \&#39;scores\&#39; field&#39;</span>)</div>
<div class="line"><span class="lineno">  278</span>  scores = boxlist.get_field(<span class="stringliteral">&#39;scores&#39;</span>)</div>
<div class="line"><span class="lineno">  279</span>  <span class="keywordflow">if</span> len(scores.shape) == 1:</div>
<div class="line"><span class="lineno">  280</span>    scores = np.reshape(scores, [-1, 1])</div>
<div class="line"><span class="lineno">  281</span>  <span class="keywordflow">elif</span> len(scores.shape) == 2:</div>
<div class="line"><span class="lineno">  282</span>    <span class="keywordflow">if</span> scores.shape[1] <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  283</span>      <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;scores field must have statically defined second &#39;</span></div>
<div class="line"><span class="lineno">  284</span>                       <span class="stringliteral">&#39;dimension&#39;</span>)</div>
<div class="line"><span class="lineno">  285</span>  <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  286</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;scores field must be of rank 1 or 2&#39;</span>)</div>
<div class="line"><span class="lineno">  287</span>  num_boxes = boxlist.num_boxes()</div>
<div class="line"><span class="lineno">  288</span>  num_scores = scores.shape[0]</div>
<div class="line"><span class="lineno">  289</span>  num_classes = scores.shape[1]</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>  <span class="keywordflow">if</span> num_boxes != num_scores:</div>
<div class="line"><span class="lineno">  292</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;Incorrect scores field length: actual vs expected.&#39;</span>)</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>  selected_boxes_list = []</div>
<div class="line"><span class="lineno">  295</span>  <span class="keywordflow">for</span> class_idx <span class="keywordflow">in</span> range(num_classes):</div>
<div class="line"><span class="lineno">  296</span>    boxlist_and_class_scores = np_box_list.BoxList(boxlist.get())</div>
<div class="line"><span class="lineno">  297</span>    class_scores = np.reshape(scores[0:num_scores, class_idx], [-1])</div>
<div class="line"><span class="lineno">  298</span>    boxlist_and_class_scores.add_field(<span class="stringliteral">&#39;scores&#39;</span>, class_scores)</div>
<div class="line"><span class="lineno">  299</span>    boxlist_filt = filter_scores_greater_than(boxlist_and_class_scores,</div>
<div class="line"><span class="lineno">  300</span>                                              score_thresh)</div>
<div class="line"><span class="lineno">  301</span>    nms_result = non_max_suppression(boxlist_filt,</div>
<div class="line"><span class="lineno">  302</span>                                     max_output_size=max_output_size,</div>
<div class="line"><span class="lineno">  303</span>                                     iou_threshold=iou_thresh,</div>
<div class="line"><span class="lineno">  304</span>                                     score_threshold=score_thresh)</div>
<div class="line"><span class="lineno">  305</span>    nms_result.add_field(</div>
<div class="line"><span class="lineno">  306</span>        <span class="stringliteral">&#39;classes&#39;</span>, np.zeros_like(nms_result.get_field(<span class="stringliteral">&#39;scores&#39;</span>)) + class_idx)</div>
<div class="line"><span class="lineno">  307</span>    selected_boxes_list.append(nms_result)</div>
<div class="line"><span class="lineno">  308</span>  selected_boxes = concatenate(selected_boxes_list)</div>
<div class="line"><span class="lineno">  309</span>  sorted_boxes = sort_by_field(selected_boxes, <span class="stringliteral">&#39;scores&#39;</span>)</div>
<div class="line"><span class="lineno">  310</span>  <span class="keywordflow">return</span> sorted_boxes</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_adea5b4b7f444ffe29a0f178612f35616_cgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_adea5b4b7f444ffe29a0f178612f35616_cgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_adea5b4b7f444ffe29a0f178612f35616_cgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_adea5b4b7f444ffe29a0f178612f35616_cgraph">
<area shape="rect" title=" " alt="" coords="5,85,177,139"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#ae3eb9bfd9f103216ccac1d905843ec8e" title=" " alt="" coords="255,5,432,45"/>
<area shape="poly" title=" " alt="" coords="166,82,224,61,267,47,268,52,226,67,168,87"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a11a143796571448227535bd7673f1dd0" title=" " alt="" coords="511,47,687,102"/>
<area shape="poly" title=" " alt="" coords="178,103,497,79,497,85,178,108"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a4207b6b69df4bea40c751c55526f2a4e" title=" " alt="" coords="225,120,461,160"/>
<area shape="poly" title=" " alt="" coords="178,119,212,123,211,128,177,124"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a757076f70d7d4e80ac2e037b2ee96148" title=" " alt="" coords="509,177,688,217"/>
<area shape="poly" title=" " alt="" coords="143,137,183,155,226,169,295,183,366,192,495,197,495,203,365,197,294,188,225,175,181,160,141,142"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a9781657d68639dcb6f6e7bc8f9b3ed58" title=" " alt="" coords="736,120,888,160"/>
<area shape="poly" title=" " alt="" coords="688,99,734,113,732,118,686,104"/>
<area shape="poly" title=" " alt="" coords="422,117,497,98,498,103,423,123"/>
<area shape="poly" title=" " alt="" coords="462,137,723,137,723,143,462,143"/>
<area shape="poly" title=" " alt="" coords="434,157,496,172,495,177,432,163"/>
<area shape="poly" title=" " alt="" coords="673,175,723,161,725,166,674,180"/>
</map>
</div>

</div>
</div>
<a id="a4207b6b69df4bea40c751c55526f2a4e" name="a4207b6b69df4bea40c751c55526f2a4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4207b6b69df4bea40c751c55526f2a4e">&#9670;&#160;</a></span>non_max_suppression()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.non_max_suppression </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>max_output_size</em> = <code>10000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>iou_threshold</em> = <code>1.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>score_threshold</em> = <code>-10.0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Non maximum suppression.

This op greedily selects a subset of detection bounding boxes, pruning
away boxes that have high IOU (intersection over union) overlap (&gt; thresh)
with already selected boxes. In each iteration, the detected bounding box with
highest score in the available pool is selected.

Args:
  boxlist: BoxList holding N boxes.  Must contain a 'scores' field
    representing detection scores. All scores belong to the same class.
  max_output_size: maximum number of retained boxes
  iou_threshold: intersection over union threshold.
  score_threshold: minimum score threshold. Remove the boxes with scores
                   less than this value. Default value is set to -10. A very
                   low threshold to pass pretty much all the boxes, unless
                   the user sets a different score threshold.

Returns:
  a BoxList holding M boxes where M &lt;= max_output_size
Raises:
  ValueError: if 'scores' field does not exist
  ValueError: if threshold is not in [0, 1]
  ValueError: if max_output_size &lt; 0
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00166">166</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  169</span>                        score_threshold=-10.0):</div>
<div class="line"><span class="lineno">  170</span>  <span class="stringliteral">&quot;&quot;&quot;Non maximum suppression.</span></div>
<div class="line"><span class="lineno">  171</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  172</span><span class="stringliteral">  This op greedily selects a subset of detection bounding boxes, pruning</span></div>
<div class="line"><span class="lineno">  173</span><span class="stringliteral">  away boxes that have high IOU (intersection over union) overlap (&gt; thresh)</span></div>
<div class="line"><span class="lineno">  174</span><span class="stringliteral">  </span><span class="keyword">with</span> already selected boxes. In each iteration, the detected bounding box <span class="keyword">with</span></div>
<div class="line"><span class="lineno">  175</span>  highest score <span class="keywordflow">in</span> the available pool <span class="keywordflow">is</span> selected.</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>  Args:</div>
<div class="line"><span class="lineno">  178</span>    boxlist: BoxList holding N boxes.  Must contain a <span class="stringliteral">&#39;scores&#39;</span> field</div>
<div class="line"><span class="lineno">  179</span>      representing detection scores. All scores belong to the same <span class="keyword">class</span>.</div>
<div class="line"><span class="lineno">  180</span>    max_output_size: maximum number of retained boxes</div>
<div class="line"><span class="lineno">  181</span>    iou_threshold: intersection over union threshold.</div>
<div class="line"><span class="lineno">  182</span>    score_threshold: minimum score threshold. Remove the boxes <span class="keyword">with</span> scores</div>
<div class="line"><span class="lineno">  183</span>                     less than this value. Default value <span class="keywordflow">is</span> set to -10. A very</div>
<div class="line"><span class="lineno">  184</span>                     low threshold to <span class="keywordflow">pass</span> pretty much all the boxes, unless</div>
<div class="line"><span class="lineno">  185</span>                     the user sets a different score threshold.</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>  Returns:</div>
<div class="line"><span class="lineno">  188</span>    a BoxList holding M boxes where M &lt;= max_output_size</div>
<div class="line"><span class="lineno">  189</span>  Raises:</div>
<div class="line"><span class="lineno">  190</span>    ValueError: <span class="keywordflow">if</span> <span class="stringliteral">&#39;scores&#39;</span> field does <span class="keywordflow">not</span> exist</div>
<div class="line"><span class="lineno">  191</span>    ValueError: <span class="keywordflow">if</span> threshold <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> [0, 1]</div>
<div class="line"><span class="lineno">  192</span>    ValueError: <span class="keywordflow">if</span> max_output_size &lt; 0</div>
<div class="line"><span class="lineno">  193</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  194</span><span class="stringliteral">  </span><span class="keywordflow">if</span> <span class="keywordflow">not</span> boxlist.has_field(<span class="stringliteral">&#39;scores&#39;</span>):</div>
<div class="line"><span class="lineno">  195</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;Field scores does not exist&#39;</span>)</div>
<div class="line"><span class="lineno">  196</span>  <span class="keywordflow">if</span> iou_threshold &lt; 0. <span class="keywordflow">or</span> iou_threshold &gt; 1.0:</div>
<div class="line"><span class="lineno">  197</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;IOU threshold must be in [0, 1]&#39;</span>)</div>
<div class="line"><span class="lineno">  198</span>  <span class="keywordflow">if</span> max_output_size &lt; 0:</div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;max_output_size must be bigger than 0.&#39;</span>)</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>  boxlist = filter_scores_greater_than(boxlist, score_threshold)</div>
<div class="line"><span class="lineno">  202</span>  <span class="keywordflow">if</span> boxlist.num_boxes() == 0:</div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">return</span> boxlist</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>  boxlist = sort_by_field(boxlist, <span class="stringliteral">&#39;scores&#39;</span>)</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>  <span class="comment"># Prevent further computation if NMS is disabled.</span></div>
<div class="line"><span class="lineno">  208</span>  <span class="keywordflow">if</span> iou_threshold == 1.0:</div>
<div class="line"><span class="lineno">  209</span>    <span class="keywordflow">if</span> boxlist.num_boxes() &gt; max_output_size:</div>
<div class="line"><span class="lineno">  210</span>      selected_indices = np.arange(max_output_size)</div>
<div class="line"><span class="lineno">  211</span>      <span class="keywordflow">return</span> gather(boxlist, selected_indices)</div>
<div class="line"><span class="lineno">  212</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  213</span>      <span class="keywordflow">return</span> boxlist</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>  boxes = boxlist.get()</div>
<div class="line"><span class="lineno">  216</span>  num_boxes = boxlist.num_boxes()</div>
<div class="line"><span class="lineno">  217</span>  <span class="comment"># is_index_valid is True only for all remaining valid boxes,</span></div>
<div class="line"><span class="lineno">  218</span>  is_index_valid = np.full(num_boxes, 1, dtype=bool)</div>
<div class="line"><span class="lineno">  219</span>  selected_indices = []</div>
<div class="line"><span class="lineno">  220</span>  num_output = 0</div>
<div class="line"><span class="lineno">  221</span>  <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(num_boxes):</div>
<div class="line"><span class="lineno">  222</span>    <span class="keywordflow">if</span> num_output &lt; max_output_size:</div>
<div class="line"><span class="lineno">  223</span>      <span class="keywordflow">if</span> is_index_valid[i]:</div>
<div class="line"><span class="lineno">  224</span>        num_output += 1</div>
<div class="line"><span class="lineno">  225</span>        selected_indices.append(i)</div>
<div class="line"><span class="lineno">  226</span>        is_index_valid[i] = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  227</span>        valid_indices = np.where(is_index_valid)[0]</div>
<div class="line"><span class="lineno">  228</span>        <span class="keywordflow">if</span> valid_indices.size == 0:</div>
<div class="line"><span class="lineno">  229</span>          <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>        intersect_over_union = np_box_ops.iou(</div>
<div class="line"><span class="lineno">  232</span>            np.expand_dims(boxes[i, :], axis=0), boxes[valid_indices, :])</div>
<div class="line"><span class="lineno">  233</span>        intersect_over_union = np.squeeze(intersect_over_union, axis=0)</div>
<div class="line"><span class="lineno">  234</span>        is_index_valid[valid_indices] = np.logical_and(</div>
<div class="line"><span class="lineno">  235</span>            is_index_valid[valid_indices],</div>
<div class="line"><span class="lineno">  236</span>            intersect_over_union &lt;= iou_threshold)</div>
<div class="line"><span class="lineno">  237</span>  <span class="keywordflow">return</span> gather(boxlist, np.array(selected_indices))</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a4207b6b69df4bea40c751c55526f2a4e_cgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a4207b6b69df4bea40c751c55526f2a4e_cgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a4207b6b69df4bea40c751c55526f2a4e_cgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a4207b6b69df4bea40c751c55526f2a4e_cgraph">
<area shape="rect" title=" " alt="" coords="5,78,241,118"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a11a143796571448227535bd7673f1dd0" title=" " alt="" coords="291,5,467,60"/>
<area shape="poly" title=" " alt="" coords="202,75,277,56,278,61,203,81"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a9781657d68639dcb6f6e7bc8f9b3ed58" title=" " alt="" coords="516,78,668,118"/>
<area shape="poly" title=" " alt="" coords="242,95,503,95,503,101,242,101"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a757076f70d7d4e80ac2e037b2ee96148" title=" " alt="" coords="289,135,468,175"/>
<area shape="poly" title=" " alt="" coords="214,115,276,130,275,135,212,121"/>
<area shape="poly" title=" " alt="" coords="468,57,514,71,512,76,466,62"/>
<area shape="poly" title=" " alt="" coords="453,133,503,119,505,124,454,138"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a4207b6b69df4bea40c751c55526f2a4e_icgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a4207b6b69df4bea40c751c55526f2a4e_icgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a4207b6b69df4bea40c751c55526f2a4e_icgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a4207b6b69df4bea40c751c55526f2a4e_icgraph">
<area shape="rect" title=" " alt="" coords="225,13,461,53"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#adea5b4b7f444ffe29a0f178612f35616" title=" " alt="" coords="5,5,177,60"/>
<area shape="poly" title=" " alt="" coords="211,35,177,35,177,30,211,30"/>
</map>
</div>

</div>
</div>
<a id="abc05c2fdd014bd0d9e9cd9f9af2f32e7" name="abc05c2fdd014bd0d9e9cd9f9af2f32e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc05c2fdd014bd0d9e9cd9f9af2f32e7">&#9670;&#160;</a></span>prune_non_overlapping_boxes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.prune_non_overlapping_boxes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>minoverlap</em> = <code>0.0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Prunes the boxes in boxlist1 that overlap less than thresh with boxlist2.

For each box in boxlist1, we want its IOA to be more than minoverlap with
at least one of the boxes in boxlist2. If it does not, we remove it.

Args:
  boxlist1: BoxList holding N boxes.
  boxlist2: BoxList holding M boxes.
  minoverlap: Minimum required overlap between boxes, to count them as
              overlapping.

Returns:
  A pruned boxlist with size [N', 4].
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00377">377</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  377</span><span class="keyword">def </span>prune_non_overlapping_boxes(boxlist1, boxlist2, minoverlap=0.0):</div>
<div class="line"><span class="lineno">  378</span>  <span class="stringliteral">&quot;&quot;&quot;Prunes the boxes in boxlist1 that overlap less than thresh with boxlist2.</span></div>
<div class="line"><span class="lineno">  379</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  380</span><span class="stringliteral">  For each box </span><span class="keywordflow">in</span> boxlist1, we want its IOA to be more than minoverlap <span class="keyword">with</span></div>
<div class="line"><span class="lineno">  381</span>  at least one of the boxes <span class="keywordflow">in</span> boxlist2. If it does <span class="keywordflow">not</span>, we remove it.</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>  Args:</div>
<div class="line"><span class="lineno">  384</span>    boxlist1: BoxList holding N boxes.</div>
<div class="line"><span class="lineno">  385</span>    boxlist2: BoxList holding M boxes.</div>
<div class="line"><span class="lineno">  386</span>    minoverlap: Minimum required overlap between boxes, to count them <span class="keyword">as</span></div>
<div class="line"><span class="lineno">  387</span>                overlapping.</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span>  Returns:</div>
<div class="line"><span class="lineno">  390</span>    A pruned boxlist <span class="keyword">with</span> size [N<span class="stringliteral">&#39;, 4].</span></div>
<div class="line"><span class="lineno">  391</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  392</span><span class="stringliteral">  intersection_over_area = ioa(boxlist2, boxlist1)  </span><span class="comment"># [M, N] tensor</span></div>
<div class="line"><span class="lineno">  393</span>  intersection_over_area = np.amax(intersection_over_area, axis=0)  <span class="comment"># [N] tensor</span></div>
<div class="line"><span class="lineno">  394</span>  keep_bool = np.greater_equal(intersection_over_area, np.array(minoverlap))</div>
<div class="line"><span class="lineno">  395</span>  keep_inds = np.nonzero(keep_bool)[0]</div>
<div class="line"><span class="lineno">  396</span>  new_boxlist1 = gather(boxlist1, keep_inds)</div>
<div class="line"><span class="lineno">  397</span>  <span class="keywordflow">return</span> new_boxlist1</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_abc05c2fdd014bd0d9e9cd9f9af2f32e7_cgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_abc05c2fdd014bd0d9e9cd9f9af2f32e7_cgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_abc05c2fdd014bd0d9e9cd9f9af2f32e7_cgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_abc05c2fdd014bd0d9e9cd9f9af2f32e7_cgraph">
<area shape="rect" title=" " alt="" coords="5,30,172,85"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a9781657d68639dcb6f6e7bc8f9b3ed58" title=" " alt="" coords="220,5,372,45"/>
<area shape="poly" title=" " alt="" coords="172,42,206,36,207,42,172,47"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#ae54fb4d62e0673102ef7018b06aa067c" title=" " alt="" coords="220,69,372,109"/>
<area shape="poly" title=" " alt="" coords="172,68,207,73,206,78,172,73"/>
</map>
</div>

</div>
</div>
<a id="a20077b9e955652c979fb86a9ce208a1a" name="a20077b9e955652c979fb86a9ce208a1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20077b9e955652c979fb86a9ce208a1a">&#9670;&#160;</a></span>prune_outside_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.prune_outside_window </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>window</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Prunes bounding boxes that fall outside a given window.

This function prunes bounding boxes that even partially fall outside the given
window. See also ClipToWindow which only prunes bounding boxes that fall
completely outside the window, and clips any bounding boxes that partially
overflow.

Args:
  boxlist: a BoxList holding M_in boxes.
  window: a numpy array of size 4, representing [ymin, xmin, ymax, xmax]
          of the window.

Returns:
  pruned_corners: a tensor with shape [M_out, 4] where M_out &lt;= M_in.
  valid_indices: a tensor with shape [M_out] indexing the valid bounding boxes
   in the input tensor.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00400">400</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  400</span><span class="keyword">def </span>prune_outside_window(boxlist, window):</div>
<div class="line"><span class="lineno">  401</span>  <span class="stringliteral">&quot;&quot;&quot;Prunes bounding boxes that fall outside a given window.</span></div>
<div class="line"><span class="lineno">  402</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  403</span><span class="stringliteral">  This function prunes bounding boxes that even partially fall outside the given</span></div>
<div class="line"><span class="lineno">  404</span><span class="stringliteral">  window. See also ClipToWindow which only prunes bounding boxes that fall</span></div>
<div class="line"><span class="lineno">  405</span><span class="stringliteral">  completely outside the window, </span><span class="keywordflow">and</span> clips any bounding boxes that partially</div>
<div class="line"><span class="lineno">  406</span>  overflow.</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>  Args:</div>
<div class="line"><span class="lineno">  409</span>    boxlist: a BoxList holding M_in boxes.</div>
<div class="line"><span class="lineno">  410</span>    window: a numpy array of size 4, representing [ymin, xmin, ymax, xmax]</div>
<div class="line"><span class="lineno">  411</span>            of the window.</div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span>  Returns:</div>
<div class="line"><span class="lineno">  414</span>    pruned_corners: a tensor <span class="keyword">with</span> shape [M_out, 4] where M_out &lt;= M_in.</div>
<div class="line"><span class="lineno">  415</span>    valid_indices: a tensor <span class="keyword">with</span> shape [M_out] indexing the valid bounding boxes</div>
<div class="line"><span class="lineno">  416</span>     <span class="keywordflow">in</span> the input tensor.</div>
<div class="line"><span class="lineno">  417</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  418</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  419</span><span class="stringliteral">  y_min, x_min, y_max, x_max = np.array_split(boxlist.get(), 4, axis=1)</span></div>
<div class="line"><span class="lineno">  420</span><span class="stringliteral">  win_y_min = window[0]</span></div>
<div class="line"><span class="lineno">  421</span><span class="stringliteral">  win_x_min = window[1]</span></div>
<div class="line"><span class="lineno">  422</span><span class="stringliteral">  win_y_max = window[2]</span></div>
<div class="line"><span class="lineno">  423</span><span class="stringliteral">  win_x_max = window[3]</span></div>
<div class="line"><span class="lineno">  424</span><span class="stringliteral">  coordinate_violations = np.hstack([np.less(y_min, win_y_min),</span></div>
<div class="line"><span class="lineno">  425</span><span class="stringliteral">                                     np.less(x_min, win_x_min),</span></div>
<div class="line"><span class="lineno">  426</span><span class="stringliteral">                                     np.greater(y_max, win_y_max),</span></div>
<div class="line"><span class="lineno">  427</span><span class="stringliteral">                                     np.greater(x_max, win_x_max)])</span></div>
<div class="line"><span class="lineno">  428</span><span class="stringliteral">  valid_indices = np.reshape(</span></div>
<div class="line"><span class="lineno">  429</span><span class="stringliteral">      np.where(np.logical_not(np.max(coordinate_violations, axis=1))), [-1])</span></div>
<div class="line"><span class="lineno">  430</span><span class="stringliteral">  </span><span class="keywordflow">return</span> gather(boxlist, valid_indices), valid_indices</div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a20077b9e955652c979fb86a9ce208a1a_cgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a20077b9e955652c979fb86a9ce208a1a_cgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a20077b9e955652c979fb86a9ce208a1a_cgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a20077b9e955652c979fb86a9ce208a1a_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,241,45"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a9781657d68639dcb6f6e7bc8f9b3ed58" title=" " alt="" coords="289,5,441,45"/>
<area shape="poly" title=" " alt="" coords="242,23,276,23,276,28,242,28"/>
</map>
</div>

</div>
</div>
<a id="aeadd24ce65397ffcf87a3b25deab131b" name="aeadd24ce65397ffcf87a3b25deab131b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeadd24ce65397ffcf87a3b25deab131b">&#9670;&#160;</a></span>scale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.scale </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x_scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Scale box coordinates in x and y dimensions.

Args:
  boxlist: BoxList holding N boxes
  y_scale: float
  x_scale: float

Returns:
  boxlist: BoxList holding N boxes
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00313">313</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  313</span><span class="keyword">def </span>scale(boxlist, y_scale, x_scale):</div>
<div class="line"><span class="lineno">  314</span>  <span class="stringliteral">&quot;&quot;&quot;Scale box coordinates in x and y dimensions.</span></div>
<div class="line"><span class="lineno">  315</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  316</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  317</span><span class="stringliteral">    boxlist: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">  318</span><span class="stringliteral">    y_scale: float</span></div>
<div class="line"><span class="lineno">  319</span><span class="stringliteral">    x_scale: float</span></div>
<div class="line"><span class="lineno">  320</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  322</span><span class="stringliteral">    boxlist: BoxList holding N boxes</span></div>
<div class="line"><span class="lineno">  323</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  324</span><span class="stringliteral">  y_min, x_min, y_max, x_max = np.array_split(boxlist.get(), 4, axis=1)</span></div>
<div class="line"><span class="lineno">  325</span><span class="stringliteral">  y_min = y_scale * y_min</span></div>
<div class="line"><span class="lineno">  326</span><span class="stringliteral">  y_max = y_scale * y_max</span></div>
<div class="line"><span class="lineno">  327</span><span class="stringliteral">  x_min = x_scale * x_min</span></div>
<div class="line"><span class="lineno">  328</span><span class="stringliteral">  x_max = x_scale * x_max</span></div>
<div class="line"><span class="lineno">  329</span><span class="stringliteral">  scaled_boxlist = np_box_list.BoxList(np.hstack([y_min, x_min, y_max, x_max]))</span></div>
<div class="line"><span class="lineno">  330</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  331</span><span class="stringliteral">  fields = boxlist.get_extra_fields()</span></div>
<div class="line"><span class="lineno">  332</span><span class="stringliteral">  </span><span class="keywordflow">for</span> field <span class="keywordflow">in</span> fields:</div>
<div class="line"><span class="lineno">  333</span>    extra_field_data = boxlist.get_field(field)</div>
<div class="line"><span class="lineno">  334</span>    scaled_boxlist.add_field(field, extra_field_data)</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>  <span class="keywordflow">return</span> scaled_boxlist</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_aeadd24ce65397ffcf87a3b25deab131b_icgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_aeadd24ce65397ffcf87a3b25deab131b_icgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_aeadd24ce65397ffcf87a3b25deab131b_icgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_aeadd24ce65397ffcf87a3b25deab131b_icgraph">
<area shape="rect" title=" " alt="" coords="308,5,460,45"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a37a0fa083f17a474d1e5c7572b852b56" title=" " alt="" coords="5,5,260,45"/>
<area shape="poly" title=" " alt="" coords="294,28,260,28,260,23,294,23"/>
</map>
</div>

</div>
</div>
<a id="a757076f70d7d4e80ac2e037b2ee96148" name="a757076f70d7d4e80ac2e037b2ee96148"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a757076f70d7d4e80ac2e037b2ee96148">&#9670;&#160;</a></span>sort_by_field()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.utils.np_box_list_ops.sort_by_field </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>order</em> = <code><a class="el" href="../../d3/d27/classdetection__utils_1_1utils_1_1np__box__list__ops_1_1_sort_order.html#aecde42d8b3cc4e57c6279fb9ed8c73de">SortOrder.DESCEND</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Sort boxes and associated fields according to a scalar field.

A common use case is reordering the boxes according to descending scores.

Args:
  boxlist: BoxList holding N boxes.
  field: A BoxList field for sorting and reordering the BoxList.
  order: (Optional) 'descend' or 'ascend'. Default is descend.

Returns:
  sorted_boxlist: A sorted BoxList with the field in the specified order.

Raises:
  ValueError: if specified field does not exist or is not of single dimension.
  ValueError: if the order is not either descend or ascend.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html#l00135">135</a> of file <a class="el" href="../../d3/d79/np__box__list__ops_8py_source.html">np_box_list_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  135</span><span class="keyword">def </span>sort_by_field(boxlist, field, order=SortOrder.DESCEND):</div>
<div class="line"><span class="lineno">  136</span>  <span class="stringliteral">&quot;&quot;&quot;Sort boxes and associated fields according to a scalar field.</span></div>
<div class="line"><span class="lineno">  137</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  138</span><span class="stringliteral">  A common use case </span><span class="keywordflow">is</span> reordering the boxes according to descending scores.</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>  Args:</div>
<div class="line"><span class="lineno">  141</span>    boxlist: BoxList holding N boxes.</div>
<div class="line"><span class="lineno">  142</span>    field: A BoxList field <span class="keywordflow">for</span> sorting <span class="keywordflow">and</span> reordering the BoxList.</div>
<div class="line"><span class="lineno">  143</span>    order: (Optional) <span class="stringliteral">&#39;descend&#39;</span> <span class="keywordflow">or</span> <span class="stringliteral">&#39;ascend&#39;</span>. Default <span class="keywordflow">is</span> descend.</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>  Returns:</div>
<div class="line"><span class="lineno">  146</span>    sorted_boxlist: A sorted BoxList <span class="keyword">with</span> the field <span class="keywordflow">in</span> the specified order.</div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>  Raises:</div>
<div class="line"><span class="lineno">  149</span>    ValueError: <span class="keywordflow">if</span> specified field does <span class="keywordflow">not</span> exist <span class="keywordflow">or</span> <span class="keywordflow">is</span> <span class="keywordflow">not</span> of single dimension.</div>
<div class="line"><span class="lineno">  150</span>    ValueError: <span class="keywordflow">if</span> the order <span class="keywordflow">is</span> <span class="keywordflow">not</span> either descend <span class="keywordflow">or</span> ascend.</div>
<div class="line"><span class="lineno">  151</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  152</span><span class="stringliteral">  </span><span class="keywordflow">if</span> <span class="keywordflow">not</span> boxlist.has_field(field):</div>
<div class="line"><span class="lineno">  153</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;Field &#39;</span> + field + <span class="stringliteral">&#39; does not exist&#39;</span>)</div>
<div class="line"><span class="lineno">  154</span>  <span class="keywordflow">if</span> len(boxlist.get_field(field).shape) != 1:</div>
<div class="line"><span class="lineno">  155</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;Field &#39;</span> + field + <span class="stringliteral">&#39;should be single dimension.&#39;</span>)</div>
<div class="line"><span class="lineno">  156</span>  <span class="keywordflow">if</span> order != SortOrder.DESCEND <span class="keywordflow">and</span> order != SortOrder.ASCEND:</div>
<div class="line"><span class="lineno">  157</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;Invalid sort order&#39;</span>)</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>  field_to_sort = boxlist.get_field(field)</div>
<div class="line"><span class="lineno">  160</span>  sorted_indices = np.argsort(field_to_sort)</div>
<div class="line"><span class="lineno">  161</span>  <span class="keywordflow">if</span> order == SortOrder.DESCEND:</div>
<div class="line"><span class="lineno">  162</span>    sorted_indices = sorted_indices[::-1]</div>
<div class="line"><span class="lineno">  163</span>  <span class="keywordflow">return</span> gather(boxlist, sorted_indices)</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a757076f70d7d4e80ac2e037b2ee96148_cgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a757076f70d7d4e80ac2e037b2ee96148_cgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a757076f70d7d4e80ac2e037b2ee96148_cgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a757076f70d7d4e80ac2e037b2ee96148_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,184,45"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a9781657d68639dcb6f6e7bc8f9b3ed58" title=" " alt="" coords="232,5,384,45"/>
<area shape="poly" title=" " alt="" coords="184,23,218,23,218,28,184,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a757076f70d7d4e80ac2e037b2ee96148_icgraph.png" border="0" usemap="#adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a757076f70d7d4e80ac2e037b2ee96148_icgraph" alt=""/></div>
<map name="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a757076f70d7d4e80ac2e037b2ee96148_icgraph" id="adb/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops_a757076f70d7d4e80ac2e037b2ee96148_icgraph">
<area shape="rect" title=" " alt="" coords="509,13,688,53"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#adea5b4b7f444ffe29a0f178612f35616" title=" " alt="" coords="5,5,177,60"/>
<area shape="poly" title=" " alt="" coords="496,32,461,31,225,31,178,32,178,27,225,26,461,26,496,27"/>
<area shape="rect" href="../../db/d07/namespacedetection__utils_1_1utils_1_1np__box__list__ops.html#a4207b6b69df4bea40c751c55526f2a4e" title=" " alt="" coords="225,41,461,81"/>
<area shape="poly" title=" " alt="" coords="496,47,462,50,461,45,496,41"/>
<area shape="poly" title=" " alt="" coords="211,49,177,45,178,40,212,43"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
