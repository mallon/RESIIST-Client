<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RESIIST: detection_utils.core.keypoint_ops Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RESIIST
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d8/d97/namespacedetection__utils.html">detection_utils</a></li><li class="navelem"><a class="el" href="../../de/d5d/namespacedetection__utils_1_1core.html">core</a></li><li class="navelem"><a class="el" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html">keypoint_ops</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">detection_utils.core.keypoint_ops Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a12b3c20076781456a0208fa523fad607"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#a12b3c20076781456a0208fa523fad607">scale</a> (keypoints, y_scale, x_scale, scope=None)</td></tr>
<tr class="separator:a12b3c20076781456a0208fa523fad607"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7218985c1d488a4af34f784620ce2309"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#a7218985c1d488a4af34f784620ce2309">clip_to_window</a> (keypoints, window, scope=None)</td></tr>
<tr class="separator:a7218985c1d488a4af34f784620ce2309"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a214fb6879d14d53d53660a5099e7f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#a4a214fb6879d14d53d53660a5099e7f4">prune_outside_window</a> (keypoints, window, scope=None)</td></tr>
<tr class="separator:a4a214fb6879d14d53d53660a5099e7f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a004e0a6d9a4c3741fd8b6d557c4712a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#a004e0a6d9a4c3741fd8b6d557c4712a8">change_coordinate_frame</a> (keypoints, window, scope=None)</td></tr>
<tr class="separator:a004e0a6d9a4c3741fd8b6d557c4712a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c2eefb5ebfcdc2ed8a786c82071f901"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#a4c2eefb5ebfcdc2ed8a786c82071f901">to_normalized_coordinates</a> (keypoints, height, width, check_range=True, scope=None)</td></tr>
<tr class="separator:a4c2eefb5ebfcdc2ed8a786c82071f901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1477cedc19843d1b25c0d149971c874"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#ad1477cedc19843d1b25c0d149971c874">to_absolute_coordinates</a> (keypoints, height, width, check_range=True, scope=None)</td></tr>
<tr class="separator:ad1477cedc19843d1b25c0d149971c874"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e930f3eeb48f0c5c9f4308ecb2abf13"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#a1e930f3eeb48f0c5c9f4308ecb2abf13">flip_horizontal</a> (keypoints, flip_point, flip_permutation, scope=None)</td></tr>
<tr class="separator:a1e930f3eeb48f0c5c9f4308ecb2abf13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a865ee483b7ace34c0767589838e577b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#a865ee483b7ace34c0767589838e577b1">flip_vertical</a> (keypoints, flip_point, flip_permutation, scope=None)</td></tr>
<tr class="separator:a865ee483b7ace34c0767589838e577b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af33d083020b5f44a58b2de924a1659a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#af33d083020b5f44a58b2de924a1659a9">rot90</a> (keypoints, scope=None)</td></tr>
<tr class="separator:af33d083020b5f44a58b2de924a1659a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Keypoint operations.

Keypoints are represented as tensors of shape [num_instances, num_keypoints, 2],
where the last dimension holds rank 2 tensors of the form [y, x] representing
the coordinates of the keypoint.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a004e0a6d9a4c3741fd8b6d557c4712a8" name="a004e0a6d9a4c3741fd8b6d557c4712a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a004e0a6d9a4c3741fd8b6d557c4712a8">&#9670;&#160;</a></span>change_coordinate_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.keypoint_ops.change_coordinate_frame </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>keypoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Changes coordinate frame of the keypoints to be relative to window's frame.

Given a window of the form [y_min, x_min, y_max, x_max], changes keypoint
coordinates from keypoints of shape [num_instances, num_keypoints, 2]
to be relative to this window.

An example use case is data augmentation: where we are given groundtruth
keypoints and would like to randomly crop the image to some window. In this
case we need to change the coordinate frame of each groundtruth keypoint to be
relative to this new window.

Args:
  keypoints: a tensor of shape [num_instances, num_keypoints, 2]
  window: a tensor of shape [4] representing the [y_min, x_min, y_max, x_max]
    window we should change the coordinate frame to.
  scope: name scope.

Returns:
  new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]
</pre> 
<p class="definition">Definition at line <a class="el" href="../../de/dec/keypoint__ops_8py_source.html#l00099">99</a> of file <a class="el" href="../../de/dec/keypoint__ops_8py_source.html">keypoint_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   99</span><span class="keyword">def </span>change_coordinate_frame(keypoints, window, scope=None):</div>
<div class="line"><span class="lineno">  100</span>  <span class="stringliteral">&quot;&quot;&quot;Changes coordinate frame of the keypoints to be relative to window&#39;s frame.</span></div>
<div class="line"><span class="lineno">  101</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  102</span><span class="stringliteral">  Given a window of the form [y_min, x_min, y_max, x_max], changes keypoint</span></div>
<div class="line"><span class="lineno">  103</span><span class="stringliteral">  coordinates </span><span class="keyword">from</span> keypoints of shape [num_instances, num_keypoints, 2]</div>
<div class="line"><span class="lineno">  104</span>  to be relative to this window.</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span>  An example use case <span class="keywordflow">is</span> data augmentation: where we are given groundtruth</div>
<div class="line"><span class="lineno">  107</span>  keypoints <span class="keywordflow">and</span> would like to randomly crop the image to some window. In this</div>
<div class="line"><span class="lineno">  108</span>  case we need to change the coordinate frame of each groundtruth keypoint to be</div>
<div class="line"><span class="lineno">  109</span>  relative to this new window.</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>  Args:</div>
<div class="line"><span class="lineno">  112</span>    keypoints: a tensor of shape [num_instances, num_keypoints, 2]</div>
<div class="line"><span class="lineno">  113</span>    window: a tensor of shape [4] representing the [y_min, x_min, y_max, x_max]</div>
<div class="line"><span class="lineno">  114</span>      window we should change the coordinate frame to.</div>
<div class="line"><span class="lineno">  115</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>  Returns:</div>
<div class="line"><span class="lineno">  118</span>    new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]</div>
<div class="line"><span class="lineno">  119</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  120</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;ChangeCoordinateFrame&#39;</span>):</div>
<div class="line"><span class="lineno">  121</span>    win_height = window[2] - window[0]</div>
<div class="line"><span class="lineno">  122</span>    win_width = window[3] - window[1]</div>
<div class="line"><span class="lineno">  123</span>    new_keypoints = scale(keypoints - [window[0], window[1]], 1.0 / win_height,</div>
<div class="line"><span class="lineno">  124</span>                          1.0 / win_width)</div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">return</span> new_keypoints</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_a004e0a6d9a4c3741fd8b6d557c4712a8_cgraph.png" border="0" usemap="#ad8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_a004e0a6d9a4c3741fd8b6d557c4712a8_cgraph" alt=""/></div>
<map name="ad8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_a004e0a6d9a4c3741fd8b6d557c4712a8_cgraph" id="ad8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_a004e0a6d9a4c3741fd8b6d557c4712a8_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,208,45"/>
<area shape="rect" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#a12b3c20076781456a0208fa523fad607" title=" " alt="" coords="256,5,444,45"/>
<area shape="poly" title=" " alt="" coords="208,23,242,23,242,28,208,28"/>
</map>
</div>

</div>
</div>
<a id="a7218985c1d488a4af34f784620ce2309" name="a7218985c1d488a4af34f784620ce2309"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7218985c1d488a4af34f784620ce2309">&#9670;&#160;</a></span>clip_to_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.keypoint_ops.clip_to_window </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>keypoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Clips keypoints to a window.

This op clips any input keypoints to a window.

Args:
  keypoints: a tensor of shape [num_instances, num_keypoints, 2]
  window: a tensor of shape [4] representing the [y_min, x_min, y_max, x_max]
    window to which the op should clip the keypoints.
  scope: name scope.

Returns:
  new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]
</pre> 
<p class="definition">Definition at line <a class="el" href="../../de/dec/keypoint__ops_8py_source.html#l00045">45</a> of file <a class="el" href="../../de/dec/keypoint__ops_8py_source.html">keypoint_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   45</span><span class="keyword">def </span>clip_to_window(keypoints, window, scope=None):</div>
<div class="line"><span class="lineno">   46</span>  <span class="stringliteral">&quot;&quot;&quot;Clips keypoints to a window.</span></div>
<div class="line"><span class="lineno">   47</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   48</span><span class="stringliteral">  This op clips any input keypoints to a window.</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral">    keypoints: a tensor of shape [num_instances, num_keypoints, 2]</span></div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">    window: a tensor of shape [4] representing the [y_min, x_min, y_max, x_max]</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">      window to which the op should clip the keypoints.</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">    scope: name scope.</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">    new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]</span></div>
<div class="line"><span class="lineno">   58</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;ClipToWindow&#39;</span>):</div>
<div class="line"><span class="lineno">   60</span>    y, x = tf.split(value=keypoints, num_or_size_splits=2, axis=2)</div>
<div class="line"><span class="lineno">   61</span>    win_y_min, win_x_min, win_y_max, win_x_max = tf.unstack(window)</div>
<div class="line"><span class="lineno">   62</span>    y = tf.maximum(tf.minimum(y, win_y_max), win_y_min)</div>
<div class="line"><span class="lineno">   63</span>    x = tf.maximum(tf.minimum(x, win_x_max), win_x_min)</div>
<div class="line"><span class="lineno">   64</span>    new_keypoints = tf.concat([y, x], 2)</div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">return</span> new_keypoints</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1e930f3eeb48f0c5c9f4308ecb2abf13" name="a1e930f3eeb48f0c5c9f4308ecb2abf13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e930f3eeb48f0c5c9f4308ecb2abf13">&#9670;&#160;</a></span>flip_horizontal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.keypoint_ops.flip_horizontal </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>keypoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>flip_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>flip_permutation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Flips the keypoints horizontally around the flip_point.

This operation flips the x coordinate for each keypoint around the flip_point
and also permutes the keypoints in a manner specified by flip_permutation.

Args:
  keypoints: a tensor of shape [num_instances, num_keypoints, 2]
  flip_point:  (float) scalar tensor representing the x coordinate to flip the
    keypoints around.
  flip_permutation: rank 1 int32 tensor containing the keypoint flip
    permutation. This specifies the mapping from original keypoint indices
    to the flipped keypoint indices. This is used primarily for keypoints
    that are not reflection invariant. E.g. Suppose there are 3 keypoints
    representing ['head', 'right_eye', 'left_eye'], then a logical choice for
    flip_permutation might be [0, 2, 1] since we want to swap the 'left_eye'
    and 'right_eye' after a horizontal flip.
  scope: name scope.

Returns:
  new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]
</pre> 
<p class="definition">Definition at line <a class="el" href="../../de/dec/keypoint__ops_8py_source.html#l00202">202</a> of file <a class="el" href="../../de/dec/keypoint__ops_8py_source.html">keypoint_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  202</span><span class="keyword">def </span>flip_horizontal(keypoints, flip_point, flip_permutation, scope=None):</div>
<div class="line"><span class="lineno">  203</span>  <span class="stringliteral">&quot;&quot;&quot;Flips the keypoints horizontally around the flip_point.</span></div>
<div class="line"><span class="lineno">  204</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  205</span><span class="stringliteral">  This operation flips the x coordinate </span><span class="keywordflow">for</span> each keypoint around the flip_point</div>
<div class="line"><span class="lineno">  206</span>  <span class="keywordflow">and</span> also permutes the keypoints <span class="keywordflow">in</span> a manner specified by flip_permutation.</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>  Args:</div>
<div class="line"><span class="lineno">  209</span>    keypoints: a tensor of shape [num_instances, num_keypoints, 2]</div>
<div class="line"><span class="lineno">  210</span>    flip_point:  (float) scalar tensor representing the x coordinate to flip the</div>
<div class="line"><span class="lineno">  211</span>      keypoints around.</div>
<div class="line"><span class="lineno">  212</span>    flip_permutation: rank 1 int32 tensor containing the keypoint flip</div>
<div class="line"><span class="lineno">  213</span>      permutation. This specifies the mapping <span class="keyword">from</span> original keypoint indices</div>
<div class="line"><span class="lineno">  214</span>      to the flipped keypoint indices. This <span class="keywordflow">is</span> used primarily <span class="keywordflow">for</span> keypoints</div>
<div class="line"><span class="lineno">  215</span>      that are <span class="keywordflow">not</span> reflection invariant. E.g. Suppose there are 3 keypoints</div>
<div class="line"><span class="lineno">  216</span>      representing [<span class="stringliteral">&#39;head&#39;</span>, <span class="stringliteral">&#39;right_eye&#39;</span>, <span class="stringliteral">&#39;left_eye&#39;</span>], then a logical choice <span class="keywordflow">for</span></div>
<div class="line"><span class="lineno">  217</span>      flip_permutation might be [0, 2, 1] since we want to swap the <span class="stringliteral">&#39;left_eye&#39;</span></div>
<div class="line"><span class="lineno">  218</span>      <span class="keywordflow">and</span> <span class="stringliteral">&#39;right_eye&#39;</span> after a horizontal flip.</div>
<div class="line"><span class="lineno">  219</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>  Returns:</div>
<div class="line"><span class="lineno">  222</span>    new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]</div>
<div class="line"><span class="lineno">  223</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  224</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;FlipHorizontal&#39;</span>):</div>
<div class="line"><span class="lineno">  225</span>    keypoints = tf.transpose(keypoints, [1, 0, 2])</div>
<div class="line"><span class="lineno">  226</span>    keypoints = tf.gather(keypoints, flip_permutation)</div>
<div class="line"><span class="lineno">  227</span>    v, u = tf.split(value=keypoints, num_or_size_splits=2, axis=2)</div>
<div class="line"><span class="lineno">  228</span>    u = flip_point * 2.0 - u</div>
<div class="line"><span class="lineno">  229</span>    new_keypoints = tf.concat([v, u], 2)</div>
<div class="line"><span class="lineno">  230</span>    new_keypoints = tf.transpose(new_keypoints, [1, 0, 2])</div>
<div class="line"><span class="lineno">  231</span>    <span class="keywordflow">return</span> new_keypoints</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a865ee483b7ace34c0767589838e577b1" name="a865ee483b7ace34c0767589838e577b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a865ee483b7ace34c0767589838e577b1">&#9670;&#160;</a></span>flip_vertical()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.keypoint_ops.flip_vertical </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>keypoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>flip_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>flip_permutation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Flips the keypoints vertically around the flip_point.

This operation flips the y coordinate for each keypoint around the flip_point
and also permutes the keypoints in a manner specified by flip_permutation.

Args:
  keypoints: a tensor of shape [num_instances, num_keypoints, 2]
  flip_point:  (float) scalar tensor representing the y coordinate to flip the
    keypoints around.
  flip_permutation: rank 1 int32 tensor containing the keypoint flip
    permutation. This specifies the mapping from original keypoint indices
    to the flipped keypoint indices. This is used primarily for keypoints
    that are not reflection invariant. E.g. Suppose there are 3 keypoints
    representing ['head', 'right_eye', 'left_eye'], then a logical choice for
    flip_permutation might be [0, 2, 1] since we want to swap the 'left_eye'
    and 'right_eye' after a horizontal flip.
  scope: name scope.

Returns:
  new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]
</pre> 
<p class="definition">Definition at line <a class="el" href="../../de/dec/keypoint__ops_8py_source.html#l00234">234</a> of file <a class="el" href="../../de/dec/keypoint__ops_8py_source.html">keypoint_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  234</span><span class="keyword">def </span>flip_vertical(keypoints, flip_point, flip_permutation, scope=None):</div>
<div class="line"><span class="lineno">  235</span>  <span class="stringliteral">&quot;&quot;&quot;Flips the keypoints vertically around the flip_point.</span></div>
<div class="line"><span class="lineno">  236</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  237</span><span class="stringliteral">  This operation flips the y coordinate </span><span class="keywordflow">for</span> each keypoint around the flip_point</div>
<div class="line"><span class="lineno">  238</span>  <span class="keywordflow">and</span> also permutes the keypoints <span class="keywordflow">in</span> a manner specified by flip_permutation.</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>  Args:</div>
<div class="line"><span class="lineno">  241</span>    keypoints: a tensor of shape [num_instances, num_keypoints, 2]</div>
<div class="line"><span class="lineno">  242</span>    flip_point:  (float) scalar tensor representing the y coordinate to flip the</div>
<div class="line"><span class="lineno">  243</span>      keypoints around.</div>
<div class="line"><span class="lineno">  244</span>    flip_permutation: rank 1 int32 tensor containing the keypoint flip</div>
<div class="line"><span class="lineno">  245</span>      permutation. This specifies the mapping <span class="keyword">from</span> original keypoint indices</div>
<div class="line"><span class="lineno">  246</span>      to the flipped keypoint indices. This <span class="keywordflow">is</span> used primarily <span class="keywordflow">for</span> keypoints</div>
<div class="line"><span class="lineno">  247</span>      that are <span class="keywordflow">not</span> reflection invariant. E.g. Suppose there are 3 keypoints</div>
<div class="line"><span class="lineno">  248</span>      representing [<span class="stringliteral">&#39;head&#39;</span>, <span class="stringliteral">&#39;right_eye&#39;</span>, <span class="stringliteral">&#39;left_eye&#39;</span>], then a logical choice <span class="keywordflow">for</span></div>
<div class="line"><span class="lineno">  249</span>      flip_permutation might be [0, 2, 1] since we want to swap the <span class="stringliteral">&#39;left_eye&#39;</span></div>
<div class="line"><span class="lineno">  250</span>      <span class="keywordflow">and</span> <span class="stringliteral">&#39;right_eye&#39;</span> after a horizontal flip.</div>
<div class="line"><span class="lineno">  251</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>  Returns:</div>
<div class="line"><span class="lineno">  254</span>    new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]</div>
<div class="line"><span class="lineno">  255</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  256</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;FlipVertical&#39;</span>):</div>
<div class="line"><span class="lineno">  257</span>    keypoints = tf.transpose(keypoints, [1, 0, 2])</div>
<div class="line"><span class="lineno">  258</span>    keypoints = tf.gather(keypoints, flip_permutation)</div>
<div class="line"><span class="lineno">  259</span>    v, u = tf.split(value=keypoints, num_or_size_splits=2, axis=2)</div>
<div class="line"><span class="lineno">  260</span>    v = flip_point * 2.0 - v</div>
<div class="line"><span class="lineno">  261</span>    new_keypoints = tf.concat([v, u], 2)</div>
<div class="line"><span class="lineno">  262</span>    new_keypoints = tf.transpose(new_keypoints, [1, 0, 2])</div>
<div class="line"><span class="lineno">  263</span>    <span class="keywordflow">return</span> new_keypoints</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a214fb6879d14d53d53660a5099e7f4" name="a4a214fb6879d14d53d53660a5099e7f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a214fb6879d14d53d53660a5099e7f4">&#9670;&#160;</a></span>prune_outside_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.keypoint_ops.prune_outside_window </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>keypoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Prunes keypoints that fall outside a given window.

This function replaces keypoints that fall outside the given window with nan.
See also clip_to_window which clips any keypoints that fall outside the given
window.

Args:
  keypoints: a tensor of shape [num_instances, num_keypoints, 2]
  window: a tensor of shape [4] representing the [y_min, x_min, y_max, x_max]
    window outside of which the op should prune the keypoints.
  scope: name scope.

Returns:
  new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]
</pre> 
<p class="definition">Definition at line <a class="el" href="../../de/dec/keypoint__ops_8py_source.html#l00068">68</a> of file <a class="el" href="../../de/dec/keypoint__ops_8py_source.html">keypoint_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span><span class="keyword">def </span>prune_outside_window(keypoints, window, scope=None):</div>
<div class="line"><span class="lineno">   69</span>  <span class="stringliteral">&quot;&quot;&quot;Prunes keypoints that fall outside a given window.</span></div>
<div class="line"><span class="lineno">   70</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   71</span><span class="stringliteral">  This function replaces keypoints that fall outside the given window </span><span class="keyword">with</span> nan.</div>
<div class="line"><span class="lineno">   72</span>  See also clip_to_window which clips any keypoints that fall outside the given</div>
<div class="line"><span class="lineno">   73</span>  window.</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>  Args:</div>
<div class="line"><span class="lineno">   76</span>    keypoints: a tensor of shape [num_instances, num_keypoints, 2]</div>
<div class="line"><span class="lineno">   77</span>    window: a tensor of shape [4] representing the [y_min, x_min, y_max, x_max]</div>
<div class="line"><span class="lineno">   78</span>      window outside of which the op should prune the keypoints.</div>
<div class="line"><span class="lineno">   79</span>    scope: name scope.</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>  Returns:</div>
<div class="line"><span class="lineno">   82</span>    new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]</div>
<div class="line"><span class="lineno">   83</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;PruneOutsideWindow&#39;</span>):</div>
<div class="line"><span class="lineno">   85</span>    y, x = tf.split(value=keypoints, num_or_size_splits=2, axis=2)</div>
<div class="line"><span class="lineno">   86</span>    win_y_min, win_x_min, win_y_max, win_x_max = tf.unstack(window)</div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span>    valid_indices = tf.logical_and(</div>
<div class="line"><span class="lineno">   89</span>        tf.logical_and(y &gt;= win_y_min, y &lt;= win_y_max),</div>
<div class="line"><span class="lineno">   90</span>        tf.logical_and(x &gt;= win_x_min, x &lt;= win_x_max))</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>    new_y = tf.where(valid_indices, y, np.nan * tf.ones_like(y))</div>
<div class="line"><span class="lineno">   93</span>    new_x = tf.where(valid_indices, x, np.nan * tf.ones_like(x))</div>
<div class="line"><span class="lineno">   94</span>    new_keypoints = tf.concat([new_y, new_x], 2)</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordflow">return</span> new_keypoints</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af33d083020b5f44a58b2de924a1659a9" name="af33d083020b5f44a58b2de924a1659a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af33d083020b5f44a58b2de924a1659a9">&#9670;&#160;</a></span>rot90()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.keypoint_ops.rot90 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>keypoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Rotates the keypoints counter-clockwise by 90 degrees.

Args:
  keypoints: a tensor of shape [num_instances, num_keypoints, 2]
  scope: name scope.

Returns:
  new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]
</pre> 
<p class="definition">Definition at line <a class="el" href="../../de/dec/keypoint__ops_8py_source.html#l00266">266</a> of file <a class="el" href="../../de/dec/keypoint__ops_8py_source.html">keypoint_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  266</span><span class="keyword">def </span>rot90(keypoints, scope=None):</div>
<div class="line"><span class="lineno">  267</span>  <span class="stringliteral">&quot;&quot;&quot;Rotates the keypoints counter-clockwise by 90 degrees.</span></div>
<div class="line"><span class="lineno">  268</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  269</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  270</span><span class="stringliteral">    keypoints: a tensor of shape [num_instances, num_keypoints, 2]</span></div>
<div class="line"><span class="lineno">  271</span><span class="stringliteral">    scope: name scope.</span></div>
<div class="line"><span class="lineno">  272</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  273</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  274</span><span class="stringliteral">    new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]</span></div>
<div class="line"><span class="lineno">  275</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  276</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;Rot90&#39;</span>):</div>
<div class="line"><span class="lineno">  277</span>    keypoints = tf.transpose(keypoints, [1, 0, 2])</div>
<div class="line"><span class="lineno">  278</span>    v, u = tf.split(value=keypoints[:, :, ::-1], num_or_size_splits=2, axis=2)</div>
<div class="line"><span class="lineno">  279</span>    v = 1.0 - v</div>
<div class="line"><span class="lineno">  280</span>    new_keypoints = tf.concat([v, u], 2)</div>
<div class="line"><span class="lineno">  281</span>    new_keypoints = tf.transpose(new_keypoints, [1, 0, 2])</div>
<div class="line"><span class="lineno">  282</span>    <span class="keywordflow">return</span> new_keypoints</div>
</div><!-- fragment -->
</div>
</div>
<a id="a12b3c20076781456a0208fa523fad607" name="a12b3c20076781456a0208fa523fad607"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12b3c20076781456a0208fa523fad607">&#9670;&#160;</a></span>scale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.keypoint_ops.scale </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>keypoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x_scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Scales keypoint coordinates in x and y dimensions.

Args:
  keypoints: a tensor of shape [num_instances, num_keypoints, 2]
  y_scale: (float) scalar tensor
  x_scale: (float) scalar tensor
  scope: name scope.

Returns:
  new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]
</pre> 
<p class="definition">Definition at line <a class="el" href="../../de/dec/keypoint__ops_8py_source.html#l00026">26</a> of file <a class="el" href="../../de/dec/keypoint__ops_8py_source.html">keypoint_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   26</span><span class="keyword">def </span>scale(keypoints, y_scale, x_scale, scope=None):</div>
<div class="line"><span class="lineno">   27</span>  <span class="stringliteral">&quot;&quot;&quot;Scales keypoint coordinates in x and y dimensions.</span></div>
<div class="line"><span class="lineno">   28</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   29</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">   30</span><span class="stringliteral">    keypoints: a tensor of shape [num_instances, num_keypoints, 2]</span></div>
<div class="line"><span class="lineno">   31</span><span class="stringliteral">    y_scale: (float) scalar tensor</span></div>
<div class="line"><span class="lineno">   32</span><span class="stringliteral">    x_scale: (float) scalar tensor</span></div>
<div class="line"><span class="lineno">   33</span><span class="stringliteral">    scope: name scope.</span></div>
<div class="line"><span class="lineno">   34</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   35</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">   36</span><span class="stringliteral">    new_keypoints: a tensor of shape [num_instances, num_keypoints, 2]</span></div>
<div class="line"><span class="lineno">   37</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   38</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;Scale&#39;</span>):</div>
<div class="line"><span class="lineno">   39</span>    y_scale = tf.cast(y_scale, tf.float32)</div>
<div class="line"><span class="lineno">   40</span>    x_scale = tf.cast(x_scale, tf.float32)</div>
<div class="line"><span class="lineno">   41</span>    new_keypoints = keypoints * [[[y_scale, x_scale]]]</div>
<div class="line"><span class="lineno">   42</span>    <span class="keywordflow">return</span> new_keypoints</div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_a12b3c20076781456a0208fa523fad607_icgraph.png" border="0" usemap="#ad8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_a12b3c20076781456a0208fa523fad607_icgraph" alt=""/></div>
<map name="ad8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_a12b3c20076781456a0208fa523fad607_icgraph" id="ad8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_a12b3c20076781456a0208fa523fad607_icgraph">
<area shape="rect" title=" " alt="" coords="263,69,451,109"/>
<area shape="rect" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#a004e0a6d9a4c3741fd8b6d557c4712a8" title=" " alt="" coords="9,5,211,45"/>
<area shape="poly" title=" " alt="" coords="265,68,187,48,188,43,266,63"/>
<area shape="rect" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#ad1477cedc19843d1b25c0d149971c874" title=" " alt="" coords="13,69,207,109"/>
<area shape="poly" title=" " alt="" coords="249,92,208,92,208,87,249,87"/>
<area shape="rect" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#a4c2eefb5ebfcdc2ed8a786c82071f901" title=" " alt="" coords="5,133,215,173"/>
<area shape="poly" title=" " alt="" coords="266,115,188,136,187,131,265,110"/>
</map>
</div>

</div>
</div>
<a id="ad1477cedc19843d1b25c0d149971c874" name="ad1477cedc19843d1b25c0d149971c874"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1477cedc19843d1b25c0d149971c874">&#9670;&#160;</a></span>to_absolute_coordinates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.keypoint_ops.to_absolute_coordinates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>keypoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>check_range</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Converts normalized keypoint coordinates to absolute pixel coordinates.

This function raises an assertion failed error when the maximum keypoint
coordinate value is larger than 1.01 (in which case coordinates are already
absolute).

Args:
  keypoints: A tensor of shape [num_instances, num_keypoints, 2]
  height: Maximum value for y coordinate of absolute keypoint coordinates.
  width: Maximum value for x coordinate of absolute keypoint coordinates.
  check_range: If True, checks if the coordinates are normalized or not.
  scope: name scope.

Returns:
  tensor of shape [num_instances, num_keypoints, 2] with absolute coordinates
  in terms of the image size.</pre> 
<p class="definition">Definition at line <a class="el" href="../../de/dec/keypoint__ops_8py_source.html#l00166">166</a> of file <a class="el" href="../../de/dec/keypoint__ops_8py_source.html">keypoint_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  167</span>                            check_range=<span class="keyword">True</span>, scope=<span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno">  168</span>  <span class="stringliteral">&quot;&quot;&quot;Converts normalized keypoint coordinates to absolute pixel coordinates.</span></div>
<div class="line"><span class="lineno">  169</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  170</span><span class="stringliteral">  This function raises an assertion failed error when the maximum keypoint</span></div>
<div class="line"><span class="lineno">  171</span><span class="stringliteral">  coordinate value </span><span class="keywordflow">is</span> larger than 1.01 (<span class="keywordflow">in</span> which case coordinates are already</div>
<div class="line"><span class="lineno">  172</span>  absolute).</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>  Args:</div>
<div class="line"><span class="lineno">  175</span>    keypoints: A tensor of shape [num_instances, num_keypoints, 2]</div>
<div class="line"><span class="lineno">  176</span>    height: Maximum value <span class="keywordflow">for</span> y coordinate of absolute keypoint coordinates.</div>
<div class="line"><span class="lineno">  177</span>    width: Maximum value <span class="keywordflow">for</span> x coordinate of absolute keypoint coordinates.</div>
<div class="line"><span class="lineno">  178</span>    check_range: If <span class="keyword">True</span>, checks <span class="keywordflow">if</span> the coordinates are normalized <span class="keywordflow">or</span> <span class="keywordflow">not</span>.</div>
<div class="line"><span class="lineno">  179</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>  Returns:</div>
<div class="line"><span class="lineno">  182</span>    tensor of shape [num_instances, num_keypoints, 2] <span class="keyword">with</span> absolute coordinates</div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordflow">in</span> terms of the image size.</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  186</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;ToAbsoluteCoordinates&#39;</span>):</div>
<div class="line"><span class="lineno">  187</span>    height = tf.cast(height, tf.float32)</div>
<div class="line"><span class="lineno">  188</span>    width = tf.cast(width, tf.float32)</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>    <span class="comment"># Ensure range of input keypoints is correct.</span></div>
<div class="line"><span class="lineno">  191</span>    <span class="keywordflow">if</span> check_range:</div>
<div class="line"><span class="lineno">  192</span>      max_val = tf.reduce_max(keypoints)</div>
<div class="line"><span class="lineno">  193</span>      max_assert = tf.Assert(tf.greater_equal(1.01, max_val),</div>
<div class="line"><span class="lineno">  194</span>                             [<span class="stringliteral">&#39;maximum keypoint coordinate value is larger &#39;</span></div>
<div class="line"><span class="lineno">  195</span>                              <span class="stringliteral">&#39;than 1.01: &#39;</span>, max_val])</div>
<div class="line"><span class="lineno">  196</span>      <span class="keyword">with</span> tf.control_dependencies([max_assert]):</div>
<div class="line"><span class="lineno">  197</span>        width = tf.identity(width)</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordflow">return</span> scale(keypoints, height, width)</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_ad1477cedc19843d1b25c0d149971c874_cgraph.png" border="0" usemap="#ad8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_ad1477cedc19843d1b25c0d149971c874_cgraph" alt=""/></div>
<map name="ad8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_ad1477cedc19843d1b25c0d149971c874_cgraph" id="ad8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_ad1477cedc19843d1b25c0d149971c874_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,200,45"/>
<area shape="rect" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#a12b3c20076781456a0208fa523fad607" title=" " alt="" coords="248,5,436,45"/>
<area shape="poly" title=" " alt="" coords="200,23,234,23,234,28,200,28"/>
</map>
</div>

</div>
</div>
<a id="a4c2eefb5ebfcdc2ed8a786c82071f901" name="a4c2eefb5ebfcdc2ed8a786c82071f901"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c2eefb5ebfcdc2ed8a786c82071f901">&#9670;&#160;</a></span>to_normalized_coordinates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">detection_utils.core.keypoint_ops.to_normalized_coordinates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>keypoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>check_range</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scope</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Converts absolute keypoint coordinates to normalized coordinates in [0, 1].

Usually one uses the dynamic shape of the image or conv-layer tensor:
  keypoints = keypoint_ops.to_normalized_coordinates(keypoints,
                                                     tf.shape(images)[1],
                                                     tf.shape(images)[2]),

This function raises an assertion failed error at graph execution time when
the maximum coordinate is smaller than 1.01 (which means that coordinates are
already normalized). The value 1.01 is to deal with small rounding errors.

Args:
  keypoints: A tensor of shape [num_instances, num_keypoints, 2].
  height: Maximum value for y coordinate of absolute keypoint coordinates.
  width: Maximum value for x coordinate of absolute keypoint coordinates.
  check_range: If True, checks if the coordinates are normalized.
  scope: name scope.

Returns:
  tensor of shape [num_instances, num_keypoints, 2] with normalized
  coordinates in [0, 1].
</pre> 
<p class="definition">Definition at line <a class="el" href="../../de/dec/keypoint__ops_8py_source.html#l00128">128</a> of file <a class="el" href="../../de/dec/keypoint__ops_8py_source.html">keypoint_ops.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  129</span>                              check_range=<span class="keyword">True</span>, scope=<span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno">  130</span>  <span class="stringliteral">&quot;&quot;&quot;Converts absolute keypoint coordinates to normalized coordinates in [0, 1].</span></div>
<div class="line"><span class="lineno">  131</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  132</span><span class="stringliteral">  Usually one uses the dynamic shape of the image </span><span class="keywordflow">or</span> conv-layer tensor:</div>
<div class="line"><span class="lineno">  133</span>    keypoints = keypoint_ops.to_normalized_coordinates(keypoints,</div>
<div class="line"><span class="lineno">  134</span>                                                       tf.shape(images)[1],</div>
<div class="line"><span class="lineno">  135</span>                                                       tf.shape(images)[2]),</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>  This function raises an assertion failed error at graph execution time when</div>
<div class="line"><span class="lineno">  138</span>  the maximum coordinate <span class="keywordflow">is</span> smaller than 1.01 (which means that coordinates are</div>
<div class="line"><span class="lineno">  139</span>  already normalized). The value 1.01 <span class="keywordflow">is</span> to deal <span class="keyword">with</span> small rounding errors.</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>  Args:</div>
<div class="line"><span class="lineno">  142</span>    keypoints: A tensor of shape [num_instances, num_keypoints, 2].</div>
<div class="line"><span class="lineno">  143</span>    height: Maximum value <span class="keywordflow">for</span> y coordinate of absolute keypoint coordinates.</div>
<div class="line"><span class="lineno">  144</span>    width: Maximum value <span class="keywordflow">for</span> x coordinate of absolute keypoint coordinates.</div>
<div class="line"><span class="lineno">  145</span>    check_range: If <span class="keyword">True</span>, checks <span class="keywordflow">if</span> the coordinates are normalized.</div>
<div class="line"><span class="lineno">  146</span>    scope: name scope.</div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>  Returns:</div>
<div class="line"><span class="lineno">  149</span>    tensor of shape [num_instances, num_keypoints, 2] <span class="keyword">with</span> normalized</div>
<div class="line"><span class="lineno">  150</span>    coordinates <span class="keywordflow">in</span> [0, 1].</div>
<div class="line"><span class="lineno">  151</span>  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  152</span><span class="stringliteral">  </span><span class="keyword">with</span> tf.name_scope(scope, <span class="stringliteral">&#39;ToNormalizedCoordinates&#39;</span>):</div>
<div class="line"><span class="lineno">  153</span>    height = tf.cast(height, tf.float32)</div>
<div class="line"><span class="lineno">  154</span>    width = tf.cast(width, tf.float32)</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">if</span> check_range:</div>
<div class="line"><span class="lineno">  157</span>      max_val = tf.reduce_max(keypoints)</div>
<div class="line"><span class="lineno">  158</span>      max_assert = tf.Assert(tf.greater(max_val, 1.01),</div>
<div class="line"><span class="lineno">  159</span>                             [<span class="stringliteral">&#39;max value is lower than 1.01: &#39;</span>, max_val])</div>
<div class="line"><span class="lineno">  160</span>      <span class="keyword">with</span> tf.control_dependencies([max_assert]):</div>
<div class="line"><span class="lineno">  161</span>        width = tf.identity(width)</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>    <span class="keywordflow">return</span> scale(keypoints, 1.0 / height, 1.0 / width)</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_a4c2eefb5ebfcdc2ed8a786c82071f901_cgraph.png" border="0" usemap="#ad8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_a4c2eefb5ebfcdc2ed8a786c82071f901_cgraph" alt=""/></div>
<map name="ad8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_a4c2eefb5ebfcdc2ed8a786c82071f901_cgraph" id="ad8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops_a4c2eefb5ebfcdc2ed8a786c82071f901_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,215,45"/>
<area shape="rect" href="../../d8/d36/namespacedetection__utils_1_1core_1_1keypoint__ops.html#a12b3c20076781456a0208fa523fad607" title=" " alt="" coords="263,5,451,45"/>
<area shape="poly" title=" " alt="" coords="215,23,249,23,249,28,215,28"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
